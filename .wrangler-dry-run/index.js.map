{
  "version": 3,
  "sources": ["../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/_internal/utils.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/perf_hooks/performance.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/perf_hooks.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/polyfill/performance.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/mock/noop.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/console.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/node/console.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-console", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/hrtime.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/tty/read-stream.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/tty/write-stream.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/tty.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/node-version.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/process.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/node/process.mjs", "../../../../../../home/yojahny/.config/nvm/versions/node/v22.17.1/lib/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-process", "../node_modules/dayjs/dayjs.min.js", "../src/index.ts", "../node_modules/hono/dist/index.js", "../node_modules/hono/dist/hono.js", "../node_modules/hono/dist/hono-base.js", "../node_modules/hono/dist/compose.js", "../node_modules/hono/dist/context.js", "../node_modules/hono/dist/request.js", "../node_modules/hono/dist/http-exception.js", "../node_modules/hono/dist/request/constants.js", "../node_modules/hono/dist/utils/body.js", "../node_modules/hono/dist/utils/url.js", "../node_modules/hono/dist/utils/html.js", "../node_modules/hono/dist/router.js", "../node_modules/hono/dist/utils/constants.js", "../node_modules/hono/dist/router/reg-exp-router/index.js", "../node_modules/hono/dist/router/reg-exp-router/router.js", "../node_modules/hono/dist/router/reg-exp-router/matcher.js", "../node_modules/hono/dist/router/reg-exp-router/node.js", "../node_modules/hono/dist/router/reg-exp-router/trie.js", "../node_modules/hono/dist/router/reg-exp-router/prepared-router.js", "../node_modules/hono/dist/router/smart-router/index.js", "../node_modules/hono/dist/router/smart-router/router.js", "../node_modules/hono/dist/router/trie-router/index.js", "../node_modules/hono/dist/router/trie-router/router.js", "../node_modules/hono/dist/router/trie-router/node.js", "../src/middleware/rate-limiter.ts", "../src/utils/ip-hash.ts", "../src/middleware/security-headers.ts", "../src/middleware/meta-injection.ts", "../src/services/statistics.service.ts", "../src/utils/weighted-median.ts", "../src/routes/predict.ts", "../src/utils/validation.ts", "../node_modules/zod/index.js", "../node_modules/zod/v3/external.js", "../node_modules/zod/v3/errors.js", "../node_modules/zod/v3/locales/en.js", "../node_modules/zod/v3/ZodError.js", "../node_modules/zod/v3/helpers/util.js", "../node_modules/zod/v3/helpers/parseUtil.js", "../node_modules/zod/v3/types.js", "../node_modules/zod/v3/helpers/errorUtil.js", "../src/utils/cookie.ts", "../src/utils/turnstile.ts", "../src/services/predictions-aggregation.service.ts", "../src/services/capacity.service.ts", "../src/utils/degradation.ts", "../src/routes/stats.ts", "../src/routes/sentiment.ts", "../src/services/sentiment.service.ts", "../src/routes/status.ts", "../src/services/status.service.ts", "../src/utils/status-calculator.ts", "../src/routes/predictions.ts", "../src/routes/degradation.ts", "../src/routes/delete.ts", "../src/services/cleanup.service.ts"],
  "sourceRoot": ".wrangler-dry-run",
  "sourcesContent": ["/* @__NO_SIDE_EFFECTS__ */\nexport function rawHeaders(headers) {\n\tconst rawHeaders = [];\n\tfor (const key in headers) {\n\t\tif (Array.isArray(headers[key])) {\n\t\t\tfor (const h of headers[key]) {\n\t\t\t\trawHeaders.push(key, h);\n\t\t\t}\n\t\t} else {\n\t\t\trawHeaders.push(key, headers[key]);\n\t\t}\n\t}\n\treturn rawHeaders;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function mergeFns(...functions) {\n\treturn function(...args) {\n\t\tfor (const fn of functions) {\n\t\t\tfn(...args);\n\t\t}\n\t};\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function createNotImplementedError(name) {\n\treturn new Error(`[unenv] ${name} is not implemented yet!`);\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplemented(name) {\n\tconst fn = () => {\n\t\tthrow createNotImplementedError(name);\n\t};\n\treturn Object.assign(fn, { __unenv__: true });\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedAsync(name) {\n\tconst fn = notImplemented(name);\n\tfn.__promisify__ = () => notImplemented(name + \".__promisify__\");\n\tfn.native = fn;\n\treturn fn;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedClass(name) {\n\treturn class {\n\t\t__unenv__ = true;\n\t\tconstructor() {\n\t\t\tthrow new Error(`[unenv] ${name} is not implemented yet!`);\n\t\t}\n\t};\n}\n", "import { createNotImplementedError } from \"../../../_internal/utils.mjs\";\nconst _timeOrigin = globalThis.performance?.timeOrigin ?? Date.now();\nconst _performanceNow = globalThis.performance?.now ? globalThis.performance.now.bind(globalThis.performance) : () => Date.now() - _timeOrigin;\nconst nodeTiming = {\n\tname: \"node\",\n\tentryType: \"node\",\n\tstartTime: 0,\n\tduration: 0,\n\tnodeStart: 0,\n\tv8Start: 0,\n\tbootstrapComplete: 0,\n\tenvironment: 0,\n\tloopStart: 0,\n\tloopExit: 0,\n\tidleTime: 0,\n\tuvMetricsInfo: {\n\t\tloopCount: 0,\n\t\tevents: 0,\n\t\teventsWaiting: 0\n\t},\n\tdetail: undefined,\n\ttoJSON() {\n\t\treturn this;\n\t}\n};\n// PerformanceEntry\nexport class PerformanceEntry {\n\t__unenv__ = true;\n\tdetail;\n\tentryType = \"event\";\n\tname;\n\tstartTime;\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tthis.startTime = options?.startTime || _performanceNow();\n\t\tthis.detail = options?.detail;\n\t}\n\tget duration() {\n\t\treturn _performanceNow() - this.startTime;\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tentryType: this.entryType,\n\t\t\tstartTime: this.startTime,\n\t\t\tduration: this.duration,\n\t\t\tdetail: this.detail\n\t\t};\n\t}\n}\n// PerformanceMark\nexport const PerformanceMark = class PerformanceMark extends PerformanceEntry {\n\tentryType = \"mark\";\n\tconstructor() {\n\t\t// @ts-ignore\n\t\tsuper(...arguments);\n\t}\n\tget duration() {\n\t\treturn 0;\n\t}\n};\n// PerformanceMark\nexport class PerformanceMeasure extends PerformanceEntry {\n\tentryType = \"measure\";\n}\n// PerformanceResourceTiming\nexport class PerformanceResourceTiming extends PerformanceEntry {\n\tentryType = \"resource\";\n\tserverTiming = [];\n\tconnectEnd = 0;\n\tconnectStart = 0;\n\tdecodedBodySize = 0;\n\tdomainLookupEnd = 0;\n\tdomainLookupStart = 0;\n\tencodedBodySize = 0;\n\tfetchStart = 0;\n\tinitiatorType = \"\";\n\tname = \"\";\n\tnextHopProtocol = \"\";\n\tredirectEnd = 0;\n\tredirectStart = 0;\n\trequestStart = 0;\n\tresponseEnd = 0;\n\tresponseStart = 0;\n\tsecureConnectionStart = 0;\n\tstartTime = 0;\n\ttransferSize = 0;\n\tworkerStart = 0;\n\tresponseStatus = 0;\n}\n// PerformanceObserverEntryList\nexport class PerformanceObserverEntryList {\n\t__unenv__ = true;\n\tgetEntries() {\n\t\treturn [];\n\t}\n\tgetEntriesByName(_name, _type) {\n\t\treturn [];\n\t}\n\tgetEntriesByType(type) {\n\t\treturn [];\n\t}\n}\n// Performance\nexport class Performance {\n\t__unenv__ = true;\n\ttimeOrigin = _timeOrigin;\n\teventCounts = new Map();\n\t_entries = [];\n\t_resourceTimingBufferSize = 0;\n\tnavigation = undefined;\n\ttiming = undefined;\n\ttimerify(_fn, _options) {\n\t\tthrow createNotImplementedError(\"Performance.timerify\");\n\t}\n\tget nodeTiming() {\n\t\treturn nodeTiming;\n\t}\n\teventLoopUtilization() {\n\t\treturn {};\n\t}\n\tmarkResourceTiming() {\n\t\t// TODO: create a new PerformanceResourceTiming entry\n\t\t// so that performance.getEntries, getEntriesByName, and getEntriesByType return it\n\t\t// see: https://nodejs.org/api/perf_hooks.html#performancemarkresourcetimingtiminginfo-requestedurl-initiatortype-global-cachemode-bodyinfo-responsestatus-deliverytype\n\t\treturn new PerformanceResourceTiming(\"\");\n\t}\n\tonresourcetimingbufferfull = null;\n\tnow() {\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\n\t\tif (this.timeOrigin === _timeOrigin) {\n\t\t\treturn _performanceNow();\n\t\t}\n\t\treturn Date.now() - this.timeOrigin;\n\t}\n\tclearMarks(markName) {\n\t\tthis._entries = markName ? this._entries.filter((e) => e.name !== markName) : this._entries.filter((e) => e.entryType !== \"mark\");\n\t}\n\tclearMeasures(measureName) {\n\t\tthis._entries = measureName ? this._entries.filter((e) => e.name !== measureName) : this._entries.filter((e) => e.entryType !== \"measure\");\n\t}\n\tclearResourceTimings() {\n\t\tthis._entries = this._entries.filter((e) => e.entryType !== \"resource\" || e.entryType !== \"navigation\");\n\t}\n\tgetEntries() {\n\t\treturn this._entries;\n\t}\n\tgetEntriesByName(name, type) {\n\t\treturn this._entries.filter((e) => e.name === name && (!type || e.entryType === type));\n\t}\n\tgetEntriesByType(type) {\n\t\treturn this._entries.filter((e) => e.entryType === type);\n\t}\n\tmark(name, options) {\n\t\t// @ts-expect-error constructor is not protected\n\t\tconst entry = new PerformanceMark(name, options);\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tmeasure(measureName, startOrMeasureOptions, endMark) {\n\t\tlet start;\n\t\tlet end;\n\t\tif (typeof startOrMeasureOptions === \"string\") {\n\t\t\tstart = this.getEntriesByName(startOrMeasureOptions, \"mark\")[0]?.startTime;\n\t\t\tend = this.getEntriesByName(endMark, \"mark\")[0]?.startTime;\n\t\t} else {\n\t\t\tstart = Number.parseFloat(startOrMeasureOptions?.start) || this.now();\n\t\t\tend = Number.parseFloat(startOrMeasureOptions?.end) || this.now();\n\t\t}\n\t\tconst entry = new PerformanceMeasure(measureName, {\n\t\t\tstartTime: start,\n\t\t\tdetail: {\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t}\n\t\t});\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tsetResourceTimingBufferSize(maxSize) {\n\t\tthis._resourceTimingBufferSize = maxSize;\n\t}\n\taddEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.addEventListener\");\n\t}\n\tremoveEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.removeEventListener\");\n\t}\n\tdispatchEvent(event) {\n\t\tthrow createNotImplementedError(\"Performance.dispatchEvent\");\n\t}\n\ttoJSON() {\n\t\treturn this;\n\t}\n}\n// PerformanceObserver\nexport class PerformanceObserver {\n\t__unenv__ = true;\n\tstatic supportedEntryTypes = [];\n\t_callback = null;\n\tconstructor(callback) {\n\t\tthis._callback = callback;\n\t}\n\ttakeRecords() {\n\t\treturn [];\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.disconnect\");\n\t}\n\tobserve(options) {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.observe\");\n\t}\n\tbind(fn) {\n\t\treturn fn;\n\t}\n\trunInAsyncScope(fn, thisArg, ...args) {\n\t\treturn fn.call(thisArg, ...args);\n\t}\n\tasyncId() {\n\t\treturn 0;\n\t}\n\ttriggerAsyncId() {\n\t\treturn 0;\n\t}\n\temitDestroy() {\n\t\treturn this;\n\t}\n}\n// workerd implements a subset of globalThis.performance (as of last check, only timeOrigin set to 0 + now() implemented)\n// We already use performance.now() from globalThis.performance, if provided (see top of this file)\n// If we detect this condition, we can just use polyfill instead.\nexport const performance = globalThis.performance && \"addEventListener\" in globalThis.performance ? globalThis.performance : new Performance();\n", "import { IntervalHistogram, RecordableHistogram } from \"./internal/perf_hooks/histogram.mjs\";\nimport { performance, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserverEntryList, PerformanceObserver, PerformanceResourceTiming } from \"./internal/perf_hooks/performance.mjs\";\nexport * from \"./internal/perf_hooks/performance.mjs\";\n// prettier-ignore\nimport { NODE_PERFORMANCE_GC_MAJOR, NODE_PERFORMANCE_GC_MINOR, NODE_PERFORMANCE_GC_INCREMENTAL, NODE_PERFORMANCE_GC_WEAKCB, NODE_PERFORMANCE_GC_FLAGS_NO, NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED, NODE_PERFORMANCE_GC_FLAGS_FORCED, NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING, NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE, NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY, NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE, NODE_PERFORMANCE_ENTRY_TYPE_GC, NODE_PERFORMANCE_ENTRY_TYPE_HTTP, NODE_PERFORMANCE_ENTRY_TYPE_HTTP2, NODE_PERFORMANCE_ENTRY_TYPE_NET, NODE_PERFORMANCE_ENTRY_TYPE_DNS, NODE_PERFORMANCE_MILESTONE_TIME_ORIGIN_TIMESTAMP, NODE_PERFORMANCE_MILESTONE_TIME_ORIGIN, NODE_PERFORMANCE_MILESTONE_ENVIRONMENT, NODE_PERFORMANCE_MILESTONE_NODE_START, NODE_PERFORMANCE_MILESTONE_V8_START, NODE_PERFORMANCE_MILESTONE_LOOP_START, NODE_PERFORMANCE_MILESTONE_LOOP_EXIT, NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE } from \"./internal/perf_hooks/constants.mjs\";\n// prettier-ignore\nexport const constants = {\n\tNODE_PERFORMANCE_GC_MAJOR,\n\tNODE_PERFORMANCE_GC_MINOR,\n\tNODE_PERFORMANCE_GC_INCREMENTAL,\n\tNODE_PERFORMANCE_GC_WEAKCB,\n\tNODE_PERFORMANCE_GC_FLAGS_NO,\n\tNODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED,\n\tNODE_PERFORMANCE_GC_FLAGS_FORCED,\n\tNODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING,\n\tNODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE,\n\tNODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY,\n\tNODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE,\n\tNODE_PERFORMANCE_ENTRY_TYPE_GC,\n\tNODE_PERFORMANCE_ENTRY_TYPE_HTTP,\n\tNODE_PERFORMANCE_ENTRY_TYPE_HTTP2,\n\tNODE_PERFORMANCE_ENTRY_TYPE_NET,\n\tNODE_PERFORMANCE_ENTRY_TYPE_DNS,\n\tNODE_PERFORMANCE_MILESTONE_TIME_ORIGIN_TIMESTAMP,\n\tNODE_PERFORMANCE_MILESTONE_TIME_ORIGIN,\n\tNODE_PERFORMANCE_MILESTONE_ENVIRONMENT,\n\tNODE_PERFORMANCE_MILESTONE_NODE_START,\n\tNODE_PERFORMANCE_MILESTONE_V8_START,\n\tNODE_PERFORMANCE_MILESTONE_LOOP_START,\n\tNODE_PERFORMANCE_MILESTONE_LOOP_EXIT,\n\tNODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE\n};\nexport const monitorEventLoopDelay = function(_options) {\n\treturn new IntervalHistogram();\n};\nexport const createHistogram = function(_options) {\n\treturn new RecordableHistogram();\n};\nexport default {\n\tPerformance,\n\tPerformanceMark,\n\tPerformanceEntry,\n\tPerformanceMeasure,\n\tPerformanceObserverEntryList,\n\tPerformanceObserver,\n\tPerformanceResourceTiming,\n\tperformance,\n\tconstants,\n\tcreateHistogram,\n\tmonitorEventLoopDelay\n};\n", "import {\n  performance,\n  Performance,\n  PerformanceEntry,\n  PerformanceMark,\n  PerformanceMeasure,\n  PerformanceObserver,\n  PerformanceObserverEntryList,\n  PerformanceResourceTiming\n} from \"node:perf_hooks\";\nglobalThis.performance = performance;\nglobalThis.Performance = Performance;\nglobalThis.PerformanceEntry = PerformanceEntry;\nglobalThis.PerformanceMark = PerformanceMark;\nglobalThis.PerformanceMeasure = PerformanceMeasure;\nglobalThis.PerformanceObserver = PerformanceObserver;\nglobalThis.PerformanceObserverEntryList = PerformanceObserverEntryList;\nglobalThis.PerformanceResourceTiming = PerformanceResourceTiming;\n", "export default Object.assign(() => {}, { __unenv__: true });\n", "import { Writable } from \"node:stream\";\nimport noop from \"../mock/noop.mjs\";\nimport { notImplemented, notImplementedClass } from \"../_internal/utils.mjs\";\nconst _console = globalThis.console;\n// undocumented public APIs\nexport const _ignoreErrors = true;\nexport const _stderr = new Writable();\nexport const _stdout = new Writable();\nexport const log = _console?.log ?? noop;\nexport const info = _console?.info ?? log;\nexport const trace = _console?.trace ?? info;\nexport const debug = _console?.debug ?? log;\nexport const table = _console?.table ?? log;\nexport const error = _console?.error ?? log;\nexport const warn = _console?.warn ?? error;\n// https://developer.chrome.com/docs/devtools/console/api#createtask\nexport const createTask = _console?.createTask ?? /* @__PURE__ */ notImplemented(\"console.createTask\");\nexport const assert = /* @__PURE__ */ notImplemented(\"console.assert\");\n// noop\nexport const clear = _console?.clear ?? noop;\nexport const count = _console?.count ?? noop;\nexport const countReset = _console?.countReset ?? noop;\nexport const dir = _console?.dir ?? noop;\nexport const dirxml = _console?.dirxml ?? noop;\nexport const group = _console?.group ?? noop;\nexport const groupEnd = _console?.groupEnd ?? noop;\nexport const groupCollapsed = _console?.groupCollapsed ?? noop;\nexport const profile = _console?.profile ?? noop;\nexport const profileEnd = _console?.profileEnd ?? noop;\nexport const time = _console?.time ?? noop;\nexport const timeEnd = _console?.timeEnd ?? noop;\nexport const timeLog = _console?.timeLog ?? noop;\nexport const timeStamp = _console?.timeStamp ?? noop;\nexport const Console = _console?.Console ?? /* @__PURE__ */ notImplementedClass(\"console.Console\");\nexport const _times = /* @__PURE__ */ new Map();\nexport function context() {\n\t// TODO: Should be Console with all the methods\n\treturn _console;\n}\nexport const _stdoutErrorHandler = noop;\nexport const _stderrErrorHandler = noop;\nexport default {\n\t_times,\n\t_ignoreErrors,\n\t_stdoutErrorHandler,\n\t_stderrErrorHandler,\n\t_stdout,\n\t_stderr,\n\tassert,\n\tclear,\n\tConsole,\n\tcount,\n\tcountReset,\n\tdebug,\n\tdir,\n\tdirxml,\n\terror,\n\tcontext,\n\tcreateTask,\n\tgroup,\n\tgroupEnd,\n\tgroupCollapsed,\n\tinfo,\n\tlog,\n\tprofile,\n\tprofileEnd,\n\ttable,\n\ttime,\n\ttimeEnd,\n\ttimeLog,\n\ttimeStamp,\n\ttrace,\n\twarn\n};\n", "import {\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times,\n  Console\n} from \"unenv/node/console\";\nexport {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n} from \"unenv/node/console\";\nconst workerdConsole = globalThis[\"console\"];\nexport const {\n  assert,\n  clear,\n  // @ts-expect-error undocumented public API\n  context,\n  count,\n  countReset,\n  // @ts-expect-error undocumented public API\n  createTask,\n  debug,\n  dir,\n  dirxml,\n  error,\n  group,\n  groupCollapsed,\n  groupEnd,\n  info,\n  log,\n  profile,\n  profileEnd,\n  table,\n  time,\n  timeEnd,\n  timeLog,\n  timeStamp,\n  trace,\n  warn\n} = workerdConsole;\nObject.assign(workerdConsole, {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n});\nexport default workerdConsole;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/console\";\nglobalThis.console = defaultExport;", "// https://nodejs.org/api/process.html#processhrtime\nexport const hrtime = /* @__PURE__ */ Object.assign(function hrtime(startTime) {\n\tconst now = Date.now();\n\t// millis to seconds\n\tconst seconds = Math.trunc(now / 1e3);\n\t// convert millis to nanos\n\tconst nanos = now % 1e3 * 1e6;\n\tif (startTime) {\n\t\tlet diffSeconds = seconds - startTime[0];\n\t\tlet diffNanos = nanos - startTime[0];\n\t\tif (diffNanos < 0) {\n\t\t\tdiffSeconds = diffSeconds - 1;\n\t\t\tdiffNanos = 1e9 + diffNanos;\n\t\t}\n\t\treturn [diffSeconds, diffNanos];\n\t}\n\treturn [seconds, nanos];\n}, { bigint: function bigint() {\n\t// Convert milliseconds to nanoseconds\n\treturn BigInt(Date.now() * 1e6);\n} });\n", "export class ReadStream {\n\tfd;\n\tisRaw = false;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tsetRawMode(mode) {\n\t\tthis.isRaw = mode;\n\t\treturn this;\n\t}\n}\n", "export class WriteStream {\n\tfd;\n\tcolumns = 80;\n\trows = 24;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tclearLine(dir, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tclearScreenDown(callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tcursorTo(x, y, callback) {\n\t\tcallback && typeof callback === \"function\" && callback();\n\t\treturn false;\n\t}\n\tmoveCursor(dx, dy, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tgetColorDepth(env) {\n\t\treturn 1;\n\t}\n\thasColors(count, env) {\n\t\treturn false;\n\t}\n\tgetWindowSize() {\n\t\treturn [this.columns, this.rows];\n\t}\n\twrite(str, encoding, cb) {\n\t\tif (str instanceof Uint8Array) {\n\t\t\tstr = new TextDecoder().decode(str);\n\t\t}\n\t\ttry {\n\t\t\tconsole.log(str);\n\t\t} catch {}\n\t\tcb && typeof cb === \"function\" && cb();\n\t\treturn false;\n\t}\n}\n", "import { ReadStream } from \"./internal/tty/read-stream.mjs\";\nimport { WriteStream } from \"./internal/tty/write-stream.mjs\";\nexport { ReadStream } from \"./internal/tty/read-stream.mjs\";\nexport { WriteStream } from \"./internal/tty/write-stream.mjs\";\nexport const isatty = function() {\n\treturn false;\n};\nexport default {\n\tReadStream,\n\tWriteStream,\n\tisatty\n};\n", "// Extracted from .nvmrc\nexport const NODE_VERSION = \"22.14.0\";\n", "import { EventEmitter } from \"node:events\";\nimport { ReadStream, WriteStream } from \"node:tty\";\nimport { notImplemented, createNotImplementedError } from \"../../../_internal/utils.mjs\";\n// node-version.ts is generated at build time\nimport { NODE_VERSION } from \"./node-version.mjs\";\nexport class Process extends EventEmitter {\n\tenv;\n\thrtime;\n\tnextTick;\n\tconstructor(impl) {\n\t\tsuper();\n\t\tthis.env = impl.env;\n\t\tthis.hrtime = impl.hrtime;\n\t\tthis.nextTick = impl.nextTick;\n\t\tfor (const prop of [...Object.getOwnPropertyNames(Process.prototype), ...Object.getOwnPropertyNames(EventEmitter.prototype)]) {\n\t\t\tconst value = this[prop];\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tthis[prop] = value.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\t// --- event emitter ---\n\temitWarning(warning, type, code) {\n\t\tconsole.warn(`${code ? `[${code}] ` : \"\"}${type ? `${type}: ` : \"\"}${warning}`);\n\t}\n\temit(...args) {\n\t\t// @ts-ignore\n\t\treturn super.emit(...args);\n\t}\n\tlisteners(eventName) {\n\t\treturn super.listeners(eventName);\n\t}\n\t// --- stdio (lazy initializers) ---\n\t#stdin;\n\t#stdout;\n\t#stderr;\n\tget stdin() {\n\t\treturn this.#stdin ??= new ReadStream(0);\n\t}\n\tget stdout() {\n\t\treturn this.#stdout ??= new WriteStream(1);\n\t}\n\tget stderr() {\n\t\treturn this.#stderr ??= new WriteStream(2);\n\t}\n\t// --- cwd ---\n\t#cwd = \"/\";\n\tchdir(cwd) {\n\t\tthis.#cwd = cwd;\n\t}\n\tcwd() {\n\t\treturn this.#cwd;\n\t}\n\t// --- dummy props and getters ---\n\tarch = \"\";\n\tplatform = \"\";\n\targv = [];\n\targv0 = \"\";\n\texecArgv = [];\n\texecPath = \"\";\n\ttitle = \"\";\n\tpid = 200;\n\tppid = 100;\n\tget version() {\n\t\treturn `v${NODE_VERSION}`;\n\t}\n\tget versions() {\n\t\treturn { node: NODE_VERSION };\n\t}\n\tget allowedNodeEnvironmentFlags() {\n\t\treturn new Set();\n\t}\n\tget sourceMapsEnabled() {\n\t\treturn false;\n\t}\n\tget debugPort() {\n\t\treturn 0;\n\t}\n\tget throwDeprecation() {\n\t\treturn false;\n\t}\n\tget traceDeprecation() {\n\t\treturn false;\n\t}\n\tget features() {\n\t\treturn {};\n\t}\n\tget release() {\n\t\treturn {};\n\t}\n\tget connected() {\n\t\treturn false;\n\t}\n\tget config() {\n\t\treturn {};\n\t}\n\tget moduleLoadList() {\n\t\treturn [];\n\t}\n\tconstrainedMemory() {\n\t\treturn 0;\n\t}\n\tavailableMemory() {\n\t\treturn 0;\n\t}\n\tuptime() {\n\t\treturn 0;\n\t}\n\tresourceUsage() {\n\t\treturn {};\n\t}\n\t// --- noop methods ---\n\tref() {\n\t\t// noop\n\t}\n\tunref() {\n\t\t// noop\n\t}\n\t// --- unimplemented methods ---\n\tumask() {\n\t\tthrow createNotImplementedError(\"process.umask\");\n\t}\n\tgetBuiltinModule() {\n\t\treturn undefined;\n\t}\n\tgetActiveResourcesInfo() {\n\t\tthrow createNotImplementedError(\"process.getActiveResourcesInfo\");\n\t}\n\texit() {\n\t\tthrow createNotImplementedError(\"process.exit\");\n\t}\n\treallyExit() {\n\t\tthrow createNotImplementedError(\"process.reallyExit\");\n\t}\n\tkill() {\n\t\tthrow createNotImplementedError(\"process.kill\");\n\t}\n\tabort() {\n\t\tthrow createNotImplementedError(\"process.abort\");\n\t}\n\tdlopen() {\n\t\tthrow createNotImplementedError(\"process.dlopen\");\n\t}\n\tsetSourceMapsEnabled() {\n\t\tthrow createNotImplementedError(\"process.setSourceMapsEnabled\");\n\t}\n\tloadEnvFile() {\n\t\tthrow createNotImplementedError(\"process.loadEnvFile\");\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"process.disconnect\");\n\t}\n\tcpuUsage() {\n\t\tthrow createNotImplementedError(\"process.cpuUsage\");\n\t}\n\tsetUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.setUncaughtExceptionCaptureCallback\");\n\t}\n\thasUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.hasUncaughtExceptionCaptureCallback\");\n\t}\n\tinitgroups() {\n\t\tthrow createNotImplementedError(\"process.initgroups\");\n\t}\n\topenStdin() {\n\t\tthrow createNotImplementedError(\"process.openStdin\");\n\t}\n\tassert() {\n\t\tthrow createNotImplementedError(\"process.assert\");\n\t}\n\tbinding() {\n\t\tthrow createNotImplementedError(\"process.binding\");\n\t}\n\t// --- attached interfaces ---\n\tpermission = { has: /* @__PURE__ */ notImplemented(\"process.permission.has\") };\n\treport = {\n\t\tdirectory: \"\",\n\t\tfilename: \"\",\n\t\tsignal: \"SIGUSR2\",\n\t\tcompact: false,\n\t\treportOnFatalError: false,\n\t\treportOnSignal: false,\n\t\treportOnUncaughtException: false,\n\t\tgetReport: /* @__PURE__ */ notImplemented(\"process.report.getReport\"),\n\t\twriteReport: /* @__PURE__ */ notImplemented(\"process.report.writeReport\")\n\t};\n\tfinalization = {\n\t\tregister: /* @__PURE__ */ notImplemented(\"process.finalization.register\"),\n\t\tunregister: /* @__PURE__ */ notImplemented(\"process.finalization.unregister\"),\n\t\tregisterBeforeExit: /* @__PURE__ */ notImplemented(\"process.finalization.registerBeforeExit\")\n\t};\n\tmemoryUsage = Object.assign(() => ({\n\t\tarrayBuffers: 0,\n\t\trss: 0,\n\t\texternal: 0,\n\t\theapTotal: 0,\n\t\theapUsed: 0\n\t}), { rss: () => 0 });\n\t// --- undefined props ---\n\tmainModule = undefined;\n\tdomain = undefined;\n\t// optional\n\tsend = undefined;\n\texitCode = undefined;\n\tchannel = undefined;\n\tgetegid = undefined;\n\tgeteuid = undefined;\n\tgetgid = undefined;\n\tgetgroups = undefined;\n\tgetuid = undefined;\n\tsetegid = undefined;\n\tseteuid = undefined;\n\tsetgid = undefined;\n\tsetgroups = undefined;\n\tsetuid = undefined;\n\t// internals\n\t_events = undefined;\n\t_eventsCount = undefined;\n\t_exiting = undefined;\n\t_maxListeners = undefined;\n\t_debugEnd = undefined;\n\t_debugProcess = undefined;\n\t_fatalException = undefined;\n\t_getActiveHandles = undefined;\n\t_getActiveRequests = undefined;\n\t_kill = undefined;\n\t_preload_modules = undefined;\n\t_rawDebug = undefined;\n\t_startProfilerIdleNotifier = undefined;\n\t_stopProfilerIdleNotifier = undefined;\n\t_tickCallback = undefined;\n\t_disconnect = undefined;\n\t_handleQueue = undefined;\n\t_pendingMessage = undefined;\n\t_channel = undefined;\n\t_send = undefined;\n\t_linkedBinding = undefined;\n}\n", "import { hrtime as UnenvHrTime } from \"unenv/node/internal/process/hrtime\";\nimport { Process as UnenvProcess } from \"unenv/node/internal/process/process\";\nconst globalProcess = globalThis[\"process\"];\nexport const getBuiltinModule = globalProcess.getBuiltinModule;\nconst workerdProcess = getBuiltinModule(\"node:process\");\nconst isWorkerdProcessV2 = globalThis.Cloudflare.compatibilityFlags.enable_nodejs_process_v2;\nconst unenvProcess = new UnenvProcess({\n  env: globalProcess.env,\n  // `hrtime` is only available from workerd process v2\n  hrtime: isWorkerdProcessV2 ? workerdProcess.hrtime : UnenvHrTime,\n  // `nextTick` is available from workerd process v1\n  nextTick: workerdProcess.nextTick\n});\nexport const { exit, features, platform } = workerdProcess;\nexport const {\n  // Always implemented by workerd\n  env,\n  // Only implemented in workerd v2\n  hrtime,\n  // Always implemented by workerd\n  nextTick\n} = unenvProcess;\nexport const {\n  _channel,\n  _disconnect,\n  _events,\n  _eventsCount,\n  _handleQueue,\n  _maxListeners,\n  _pendingMessage,\n  _send,\n  assert,\n  disconnect,\n  mainModule\n} = unenvProcess;\nexport const {\n  // @ts-expect-error `_debugEnd` is missing typings\n  _debugEnd,\n  // @ts-expect-error `_debugProcess` is missing typings\n  _debugProcess,\n  // @ts-expect-error `_exiting` is missing typings\n  _exiting,\n  // @ts-expect-error `_fatalException` is missing typings\n  _fatalException,\n  // @ts-expect-error `_getActiveHandles` is missing typings\n  _getActiveHandles,\n  // @ts-expect-error `_getActiveRequests` is missing typings\n  _getActiveRequests,\n  // @ts-expect-error `_kill` is missing typings\n  _kill,\n  // @ts-expect-error `_linkedBinding` is missing typings\n  _linkedBinding,\n  // @ts-expect-error `_preload_modules` is missing typings\n  _preload_modules,\n  // @ts-expect-error `_rawDebug` is missing typings\n  _rawDebug,\n  // @ts-expect-error `_startProfilerIdleNotifier` is missing typings\n  _startProfilerIdleNotifier,\n  // @ts-expect-error `_stopProfilerIdleNotifier` is missing typings\n  _stopProfilerIdleNotifier,\n  // @ts-expect-error `_tickCallback` is missing typings\n  _tickCallback,\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  arch,\n  argv,\n  argv0,\n  availableMemory,\n  // @ts-expect-error `binding` is missing typings\n  binding,\n  channel,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  // @ts-expect-error `domain` is missing typings\n  domain,\n  emit,\n  emitWarning,\n  eventNames,\n  execArgv,\n  execPath,\n  exitCode,\n  finalization,\n  getActiveResourcesInfo,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getMaxListeners,\n  getuid,\n  hasUncaughtExceptionCaptureCallback,\n  // @ts-expect-error `initgroups` is missing typings\n  initgroups,\n  kill,\n  listenerCount,\n  listeners,\n  loadEnvFile,\n  memoryUsage,\n  // @ts-expect-error `moduleLoadList` is missing typings\n  moduleLoadList,\n  off,\n  on,\n  once,\n  // @ts-expect-error `openStdin` is missing typings\n  openStdin,\n  permission,\n  pid,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  // @ts-expect-error `reallyExit` is missing typings\n  reallyExit,\n  ref,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  send,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  setuid,\n  setUncaughtExceptionCaptureCallback,\n  sourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  throwDeprecation,\n  title,\n  traceDeprecation,\n  umask,\n  unref,\n  uptime,\n  version,\n  versions\n} = isWorkerdProcessV2 ? workerdProcess : unenvProcess;\nconst _process = {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  exit,\n  finalization,\n  features,\n  getBuiltinModule,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  nextTick,\n  on,\n  off,\n  once,\n  pid,\n  platform,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  // @ts-expect-error old API\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n};\nexport default _process;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/process\";\nglobalThis.process = defaultExport;", "!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));", "import { Hono } from 'hono';\nimport type { Env } from './types';\nimport { rateLimitMiddleware } from './middleware/rate-limiter';\nimport { securityHeadersMiddleware } from './middleware/security-headers';\nimport { metaInjectionMiddleware } from './middleware/meta-injection';\nimport { createPredictRoutes } from './routes/predict';\nimport { createStatsRoutes } from './routes/stats';\nimport { createSentimentRoutes } from './routes/sentiment';\nimport { createStatusRoutes } from './routes/status';\nimport { createPredictionsRoutes } from './routes/predictions';\nimport { createDegradationRoutes } from './routes/degradation';\nimport { createDeleteRoutes } from './routes/delete';\nimport { runDailyCleanup, generateCleanupReportSummary } from './services/cleanup.service';\n\nconst app = new Hono<{ Bindings: Env }>();\n\n// Apply meta injection middleware to all routes (Story 5.3)\n// Must be applied BEFORE other middleware to intercept HTML responses\napp.use('*', metaInjectionMiddleware);\n\n// Apply security headers middleware to all routes (Story 3.5 follow-up)\napp.use('*', securityHeadersMiddleware);\n\n// Apply rate limiting middleware to all API routes\napp.use('/api/*', rateLimitMiddleware);\n\n// Register prediction routes (Story 2.7, 2.8)\napp.route('/', createPredictRoutes());\n\n// Register statistics routes (Story 2.10)\napp.route('/', createStatsRoutes());\n\n// Register sentiment routes (Story 10.1)\napp.route('/', createSentimentRoutes());\n\n// Register status routes (Story 10.4)\napp.route('/', createStatusRoutes());\n\n// Register predictions data routes (Story 3.4b)\napp.route('/', createPredictionsRoutes());\n\n// Register degradation status routes (Story 3.7)\napp.route('/', createDegradationRoutes());\n\n// Register delete routes (Story 4.6)\napp.route('/', createDeleteRoutes());\n\n// Health check endpoint\napp.get('/health', (c) => {\n  return c.json({ status: 'healthy', timestamp: new Date().toISOString() });\n});\n\n// Serve HTML files with meta injection (Story 5.3)\n// Handle index.html requests to inject dynamic meta tags\n// Note: html_handling = \"none\" in wrangler.toml ensures HTML goes through this handler\napp.get('/', async (c) => {\n  try {\n    // Fetch index.html from Assets binding\n    // Use the request URL to maintain proper context\n    const assetUrl = new URL(c.req.url);\n    assetUrl.pathname = '/index.html';\n\n    const response = await c.env.ASSETS.fetch(assetUrl.toString());\n\n    if (!response.ok) {\n      return c.notFound();\n    }\n\n    // Get HTML content\n    const html = await response.text();\n\n    // Return HTML response (meta injection middleware will process it)\n    return c.html(html);\n  } catch (error) {\n    console.error('Error serving index.html:', error);\n    return c.text('Error loading page', 500);\n  }\n});\n\n// Serve other HTML pages with meta injection (privacy, terms, about, delete)\napp.get('/:page.html', async (c) => {\n  try {\n    const page = c.req.param('page');\n    const assetUrl = new URL(c.req.url);\n    assetUrl.pathname = `/${page}.html`;\n\n    const response = await c.env.ASSETS.fetch(assetUrl.toString());\n\n    if (!response.ok) {\n      return c.notFound();\n    }\n\n    const html = await response.text();\n    return c.html(html);\n  } catch (error) {\n    console.error('Error serving HTML page:', error);\n    return c.text('Error loading page', 500);\n  }\n});\n\n// Database connection test endpoint (Story 1.2 - Task 5)\napp.get('/api/db-test', async (c) => {\n  try {\n    // Test database connection by querying the predictions table\n    const result = await c.env.DB.prepare('SELECT COUNT(*) as count FROM predictions').first();\n\n    return c.json({\n      success: true,\n      message: 'Database connection successful',\n      data: {\n        predictions_count: result?.count || 0,\n        database_connected: true,\n        timestamp: new Date().toISOString(),\n      },\n    });\n  } catch (error) {\n    console.error('Database connection test failed:', error);\n    return c.json(\n      {\n        success: false,\n        message: 'Database connection failed',\n        error: error instanceof Error ? error.message : 'Unknown error',\n        timestamp: new Date().toISOString(),\n      },\n      500\n    );\n  }\n});\n\n// Export Hono app as default fetch handler\nexport default {\n  fetch: app.fetch,\n\n  /**\n   * Scheduled event handler for Cloudflare Cron Triggers\n   * Story 4.8: Data Retention Policy - Daily cleanup at 2 AM UTC\n   *\n   * To enable: Uncomment the [triggers] section in wrangler.toml\n   *\n   * @param event ScheduledEvent from Cloudflare Workers\n   * @param env Environment bindings (DB, KV namespaces, etc.)\n   * @param ctx ExecutionContext for extending worker lifetime\n   */\n  async scheduled(event: ScheduledEvent, env: Env, ctx: ExecutionContext): Promise<void> {\n    console.log(\n      JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'INFO',\n        message: 'Starting scheduled data retention cleanup',\n        context: {\n          scheduledTime: event.scheduledTime,\n          cron: event.cron,\n        },\n      })\n    );\n\n    try {\n      // Run daily cleanup and wait for completion\n      ctx.waitUntil(\n        (async () => {\n          const report = await runDailyCleanup(env.DB);\n          const summary = generateCleanupReportSummary(report);\n\n          console.log(\n            JSON.stringify({\n              timestamp: new Date().toISOString(),\n              level: 'INFO',\n              message: 'Scheduled cleanup completed successfully',\n              context: {\n                report,\n                summary,\n              },\n            })\n          );\n\n          // Log any errors that occurred during cleanup\n          if (report.errors.length > 0) {\n            console.error(\n              JSON.stringify({\n                timestamp: new Date().toISOString(),\n                level: 'ERROR',\n                message: 'Cleanup completed with errors',\n                context: {\n                  errorCount: report.errors.length,\n                  errors: report.errors,\n                },\n              })\n            );\n          }\n        })()\n      );\n    } catch (error) {\n      console.error(\n        JSON.stringify({\n          timestamp: new Date().toISOString(),\n          level: 'ERROR',\n          message: 'Scheduled cleanup failed',\n          context: {\n            error: error instanceof Error ? error.message : String(error),\n            stack: error instanceof Error ? error.stack : undefined,\n          },\n        })\n      );\n    }\n  },\n};\n", "// src/index.ts\nimport { Hono } from \"./hono.js\";\nexport {\n  Hono\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  router;\n  getPath;\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  errorHandler = errorHandler;\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  env = {};\n  #var;\n  finalized = false;\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  setLayout = (layout) => this.#layout = layout;\n  getLayout = () => this.#layout;\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  raw;\n  #validatedData;\n  #matchResult;\n  routeIndex = 0;\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  get url() {\n    return this.raw.url;\n  }\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/http-exception.ts\nvar HTTPException = class extends Error {\n  res;\n  status;\n  constructor(status = 500, options) {\n    super(options?.message, { cause: options?.cause });\n    this.res = options?.res;\n    this.status = status;\n  }\n  getResponse() {\n    if (this.res) {\n      const newResponse = new Response(this.res.body, {\n        status: this.status,\n        headers: this.res.headers\n      });\n      return newResponse;\n    }\n    return new Response(this.message, {\n      status: this.status\n    });\n  }\n};\nexport {\n  HTTPException\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(\"?\", 8);\n    if (keyIndex2 === -1) {\n      return void 0;\n    }\n    if (!url.startsWith(key, keyIndex2 + 1)) {\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/router/reg-exp-router/index.ts\nimport { RegExpRouter } from \"./router.js\";\nimport { PreparedRegExpRouter, buildInitParams, serializeInitParams } from \"./prepared-router.js\";\nexport {\n  PreparedRegExpRouter,\n  RegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = (method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  };\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/prepared-router.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { RegExpRouter } from \"./router.js\";\nvar PreparedRegExpRouter = class {\n  name = \"PreparedRegExpRouter\";\n  #matchers;\n  #relocateMap;\n  constructor(matchers, relocateMap) {\n    this.#matchers = matchers;\n    this.#relocateMap = relocateMap;\n  }\n  #addWildcard(method, handlerData) {\n    const matcher = this.#matchers[method];\n    matcher[1].forEach((list) => list && list.push(handlerData));\n    Object.values(matcher[2]).forEach((list) => list[0].push(handlerData));\n  }\n  #addPath(method, path, handler, indexes, map) {\n    const matcher = this.#matchers[method];\n    if (!map) {\n      matcher[2][path][0].push([handler, {}]);\n    } else {\n      indexes.forEach((index) => {\n        if (typeof index === \"number\") {\n          matcher[1][index].push([handler, map]);\n        } else {\n          ;\n          matcher[2][index || path][0].push([handler, map]);\n        }\n      });\n    }\n  }\n  add(method, path, handler) {\n    if (!this.#matchers[method]) {\n      const all = this.#matchers[METHOD_NAME_ALL];\n      const staticMap = {};\n      for (const key in all[2]) {\n        staticMap[key] = [all[2][key][0].slice(), emptyParam];\n      }\n      this.#matchers[method] = [\n        all[0],\n        all[1].map((list) => Array.isArray(list) ? list.slice() : 0),\n        staticMap\n      ];\n    }\n    if (path === \"/*\" || path === \"*\") {\n      const handlerData = [handler, {}];\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addWildcard(m, handlerData);\n        }\n      } else {\n        this.#addWildcard(method, handlerData);\n      }\n      return;\n    }\n    const data = this.#relocateMap[path];\n    if (!data) {\n      throw new Error(`Path ${path} is not registered`);\n    }\n    for (const [indexes, map] of data) {\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addPath(m, path, handler, indexes, map);\n        }\n      } else {\n        this.#addPath(method, path, handler, indexes, map);\n      }\n    }\n  }\n  buildAllMatchers() {\n    return this.#matchers;\n  }\n  match = match;\n};\nvar buildInitParams = ({ paths }) => {\n  const RegExpRouterWithMatcherExport = class extends RegExpRouter {\n    buildAndExportAllMatchers() {\n      return this.buildAllMatchers();\n    }\n  };\n  const router = new RegExpRouterWithMatcherExport();\n  for (const path of paths) {\n    router.add(METHOD_NAME_ALL, path, path);\n  }\n  const matchers = router.buildAndExportAllMatchers();\n  const all = matchers[METHOD_NAME_ALL];\n  const relocateMap = {};\n  for (const path of paths) {\n    if (path === \"/*\" || path === \"*\") {\n      continue;\n    }\n    all[1].forEach((list, i) => {\n      list.forEach(([p, map]) => {\n        if (p === path) {\n          if (relocateMap[path]) {\n            relocateMap[path][0][1] = {\n              ...relocateMap[path][0][1],\n              ...map\n            };\n          } else {\n            relocateMap[path] = [[[], map]];\n          }\n          if (relocateMap[path][0][0].findIndex((j) => j === i) === -1) {\n            relocateMap[path][0][0].push(i);\n          }\n        }\n      });\n    });\n    for (const path2 in all[2]) {\n      all[2][path2][0].forEach(([p]) => {\n        if (p === path) {\n          relocateMap[path] ||= [[[]]];\n          const value = path2 === path ? \"\" : path2;\n          if (relocateMap[path][0][0].findIndex((v) => v === value) === -1) {\n            relocateMap[path][0][0].push(value);\n          }\n        }\n      });\n    }\n  }\n  for (let i = 0, len = all[1].length; i < len; i++) {\n    all[1][i] = all[1][i] ? [] : 0;\n  }\n  for (const path in all[2]) {\n    all[2][path][0] = [];\n  }\n  return [matchers, relocateMap];\n};\nvar serializeInitParams = ([matchers, relocateMap]) => {\n  const matchersStr = JSON.stringify(\n    matchers,\n    (_, value) => value instanceof RegExp ? `##${value.toString()}##` : value\n  ).replace(/\"##(.+?)##\"/g, (_, str) => str.replace(/\\\\\\\\/g, \"\\\\\"));\n  const relocateMapStr = JSON.stringify(relocateMap);\n  return `[${matchersStr},${relocateMapStr}]`;\n};\nexport {\n  PreparedRegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/smart-router/index.ts\nimport { SmartRouter } from \"./router.js\";\nexport {\n  SmartRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/index.ts\nimport { TrieRouter } from \"./router.js\";\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "/**\n * Rate Limiter Middleware Module\n *\n * Implements sliding window rate limiting per IP address using Cloudflare KV.\n * Protects API endpoints from automated script abuse (FR77).\n *\n * Features:\n * - Sliding window algorithm (not fixed intervals)\n * - Per-endpoint configurable limits\n * - Cloudflare KV for distributed rate limiting\n * - Fail-open pattern (allows requests if KV unavailable)\n * - Standard rate limit headers (X-RateLimit-*, Retry-After)\n *\n * @see Story 2.6 - Rate Limiting Per IP Address\n * @see docs/architecture.md - Performance Considerations\n */\n\nimport { Context, Next } from 'hono';\nimport type { Env, RateLimitResult, RateLimitConfig } from '../types';\nimport { extractClientIP, hashIP } from '../utils/ip-hash';\n\n/**\n * Default rate limit configurations per endpoint\n * Configurable via environment variables\n */\nexport const DEFAULT_RATE_LIMITS: Record<string, RateLimitConfig> = {\n  'POST:/api/predict': {\n    limit: 10,\n    windowSeconds: 60,\n    endpoint: 'submit',\n  },\n  'PUT:/api/predict': {\n    limit: 30,\n    windowSeconds: 60,\n    endpoint: 'update',\n  },\n  'GET:/api/stats': {\n    limit: 60,\n    windowSeconds: 60,\n    endpoint: 'stats',\n  },\n};\n\n/**\n * Rate limit window size in seconds\n * Used for TTL on KV entries and reset time calculations\n */\nconst WINDOW_SECONDS = 60;\n\n/**\n * Check rate limit for a given IP hash and endpoint\n *\n * Implements sliding window rate limiting using Cloudflare KV.\n * Key format: `ratelimit:${ipHash}:${endpoint}`\n *\n * Algorithm:\n * 1. Construct KV key from IP hash and endpoint\n * 2. Get current counter value (or 0 if not exists)\n * 3. If counter >= limit, deny request\n * 4. Otherwise, increment counter with TTL and allow request\n *\n * @param kv - Cloudflare KV namespace binding\n * @param ipHash - Hashed IP address (64-char hex string)\n * @param endpoint - Endpoint identifier (e.g., 'submit', 'update', 'stats')\n * @param limit - Maximum requests per window\n * @returns RateLimitResult with allowed status, remaining count, and reset time\n */\nexport async function checkRateLimit(\n  kv: KVNamespace,\n  ipHash: string,\n  endpoint: string,\n  limit: number\n): Promise<RateLimitResult> {\n  const key = `ratelimit:${ipHash}:${endpoint}`;\n  const now = Math.floor(Date.now() / 1000);\n  const resetAt = now + WINDOW_SECONDS;\n\n  try {\n    // Get current counter value\n    const current = await kv.get(key);\n    const count = current ? parseInt(current, 10) : 0;\n\n    // Check if limit exceeded\n    if (count >= limit) {\n      return {\n        allowed: false,\n        remaining: 0,\n        resetAt,\n        limit,\n      };\n    }\n\n    // Increment counter with TTL (atomic in KV)\n    await kv.put(key, (count + 1).toString(), { expirationTtl: WINDOW_SECONDS });\n\n    return {\n      allowed: true,\n      remaining: limit - count - 1,\n      resetAt,\n      limit,\n    };\n  } catch (error) {\n    // Fail-open: If KV unavailable, allow request (don't block all traffic)\n    console.error('Rate limit KV error (fail-open):', error);\n    return {\n      allowed: true,\n      remaining: limit,\n      resetAt,\n      limit,\n      error: error instanceof Error ? error.message : 'KV unavailable',\n    };\n  }\n}\n\n/**\n * Generate rate limit response headers\n *\n * Standard headers returned with every response:\n * - X-RateLimit-Limit: Max requests per window\n * - X-RateLimit-Remaining: Requests left in current window\n * - X-RateLimit-Reset: Unix timestamp when limit resets\n *\n * Additional header on 429 responses:\n * - Retry-After: Seconds to wait before retrying\n *\n * @param result - Rate limit check result\n * @param includeRetryAfter - Include Retry-After header (for 429 responses)\n * @returns Headers object\n */\nexport function getRateLimitHeaders(\n  result: RateLimitResult,\n  includeRetryAfter: boolean = false\n): Record<string, string> {\n  const now = Math.floor(Date.now() / 1000);\n  const retryAfter = Math.max(0, result.resetAt - now);\n\n  const headers: Record<string, string> = {\n    'X-RateLimit-Limit': result.limit.toString(),\n    'X-RateLimit-Remaining': result.remaining.toString(),\n    'X-RateLimit-Reset': result.resetAt.toString(),\n  };\n\n  if (includeRetryAfter) {\n    headers['Retry-After'] = retryAfter.toString();\n  }\n\n  return headers;\n}\n\n/**\n * Generate user-friendly rate limit error message\n *\n * @param result - Rate limit check result\n * @returns Human-readable error message with wait time\n */\nexport function getRateLimitErrorMessage(result: RateLimitResult): string {\n  const now = Math.floor(Date.now() / 1000);\n  const waitSeconds = Math.max(0, result.resetAt - now);\n  return `You're submitting too quickly. Please wait ${waitSeconds} seconds and try again.`;\n}\n\n/**\n * Get rate limit configuration for a given method and path\n *\n * Looks up endpoint-specific limits, falling back to default if not found.\n * Supports environment variable overrides for limits.\n *\n * @param method - HTTP method (GET, POST, PUT, etc.)\n * @param path - Request path (e.g., '/api/predict')\n * @param env - Environment bindings (for overrides)\n * @returns Rate limit configuration or null if endpoint not rate-limited\n */\nexport function getRateLimitConfig(\n  method: string,\n  path: string,\n  env?: Partial<Env>\n): RateLimitConfig | null {\n  const key = `${method}:${path}`;\n  const config = DEFAULT_RATE_LIMITS[key];\n\n  if (!config) {\n    return null;\n  }\n\n  // Support environment variable overrides\n  if (env) {\n    const envKey = `RATE_LIMIT_${config.endpoint.toUpperCase()}`;\n    const envValue = (env as Record<string, unknown>)[envKey];\n    if (typeof envValue === 'string') {\n      const parsed = parseInt(envValue, 10);\n      if (!isNaN(parsed) && parsed > 0) {\n        return { ...config, limit: parsed };\n      }\n    }\n  }\n\n  return config;\n}\n\n/**\n * Rate limiting middleware for Hono\n *\n * Extracts client IP, hashes it, checks rate limit, and either:\n * - Allows request with rate limit headers\n * - Returns 429 Too Many Requests with error message and headers\n *\n * @param c - Hono context\n * @param next - Next middleware function\n * @returns Response or passes to next middleware\n */\nexport async function rateLimitMiddleware(c: Context<{ Bindings: Env }>, next: Next) {\n  const method = c.req.method;\n  const path = c.req.path;\n\n  // Get rate limit config for this endpoint\n  const config = getRateLimitConfig(method, path, c.env);\n\n  // Skip rate limiting if endpoint not configured\n  if (!config) {\n    return next();\n  }\n\n  // Check if KV binding is available\n  if (!c.env.gta6_rate_limit) {\n    // Fail-open: Allow request if KV not configured\n    console.warn('gta6_rate_limit KV binding not available, skipping rate limit');\n    return next();\n  }\n\n  // Extract and hash client IP\n  const clientIP = extractClientIP(c.req.raw);\n  if (!clientIP) {\n    // No IP found - skip rate limiting (shouldn't happen in production)\n    console.warn('Could not extract client IP, skipping rate limit');\n    return next();\n  }\n\n  let ipHash: string;\n  try {\n    ipHash = await hashIP(clientIP, c.env.SALT_V1 || c.env.IP_HASH_SALT || 'default-salt');\n  } catch (error) {\n    // Failed to hash IP - skip rate limiting\n    console.error('Failed to hash IP for rate limiting:', error);\n    return next();\n  }\n\n  // Check rate limit\n  const result = await checkRateLimit(c.env.gta6_rate_limit, ipHash, config.endpoint, config.limit);\n\n  // Log rate limit violations for monitoring\n  if (!result.allowed) {\n    console.warn(\n      `Rate limit exceeded: IP=${ipHash.substring(0, 8)}... endpoint=${config.endpoint}`\n    );\n  }\n\n  // Add rate limit headers to response\n  const headers = getRateLimitHeaders(result, !result.allowed);\n  for (const [key, value] of Object.entries(headers)) {\n    c.header(key, value);\n  }\n\n  // If rate limit exceeded, return 429\n  if (!result.allowed) {\n    return c.json(\n      {\n        success: false,\n        error: {\n          code: 'RATE_LIMIT_EXCEEDED',\n          message: getRateLimitErrorMessage(result),\n        },\n      },\n      429\n    );\n  }\n\n  // Proceed to next middleware/handler\n  return next();\n}\n\n/**\n * RateLimiter class for programmatic rate limiting\n *\n * Alternative to middleware for cases where fine-grained control is needed.\n * Used by API handlers that need to check rate limits manually.\n */\nexport class RateLimiter {\n  private kv: KVNamespace;\n  private salt: string;\n\n  constructor(kv: KVNamespace, salt: string) {\n    this.kv = kv;\n    this.salt = salt;\n  }\n\n  /**\n   * Check rate limit for a request\n   *\n   * @param request - HTTP request object\n   * @param endpoint - Endpoint identifier\n   * @param limit - Maximum requests per window\n   * @returns Rate limit result\n   */\n  async checkLimit(request: Request, endpoint: string, limit: number): Promise<RateLimitResult> {\n    const clientIP = extractClientIP(request);\n    if (!clientIP) {\n      // No IP - allow request\n      return {\n        allowed: true,\n        remaining: limit,\n        resetAt: Math.floor(Date.now() / 1000) + WINDOW_SECONDS,\n        limit,\n      };\n    }\n\n    let ipHash: string;\n    try {\n      ipHash = await hashIP(clientIP, this.salt);\n    } catch {\n      // Failed to hash - allow request\n      return {\n        allowed: true,\n        remaining: limit,\n        resetAt: Math.floor(Date.now() / 1000) + WINDOW_SECONDS,\n        limit,\n      };\n    }\n\n    return checkRateLimit(this.kv, ipHash, endpoint, limit);\n  }\n\n  /**\n   * Check rate limit using pre-computed IP hash\n   *\n   * @param ipHash - Already-hashed IP address\n   * @param endpoint - Endpoint identifier\n   * @param limit - Maximum requests per window\n   * @returns Rate limit result\n   */\n  async checkLimitByHash(\n    ipHash: string,\n    endpoint: string,\n    limit: number\n  ): Promise<RateLimitResult> {\n    return checkRateLimit(this.kv, ipHash, endpoint, limit);\n  }\n}\n", "/**\n * IP Address Hashing Utility Module\n *\n * Provides functions for privacy-preserving IP address hashing using\n * cryptographic hash functions (BLAKE2b or SHA-256 fallback).\n *\n * Privacy: Implements IP hashing before storage to comply with GDPR (NFR-S2).\n * Original IP addresses are NEVER stored or logged - only hashed values.\n *\n * Security: Uses salted hashing to prevent rainbow table attacks (FR80).\n * Salt is versioned (SALT_V1) to support future rotation (FR79).\n */\n\n/**\n * IPv4 validation regex\n * Matches valid IPv4 addresses: 0.0.0.0 to 255.255.255.255\n */\nconst IPV4_REGEX =\n  /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\n\n/**\n * IPv6 validation regex\n * Matches standard IPv6 addresses and compressed formats\n * Supports: full format, compressed (::), and IPv4-mapped IPv6\n */\nconst IPV6_REGEX =\n  /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\n\n/**\n * IP Hash type alias (64-character hex string)\n * Result of BLAKE2b-256 or SHA-256 hashing\n * Exported for use in API endpoints and type definitions\n */\nexport type IPHash = string;\n\n/**\n * Hash algorithm used for IP address hashing\n * BLAKE2b is preferred but may not be available in all environments\n */\nexport type HashAlgorithm = 'BLAKE2b-256' | 'SHA-256';\n\n/**\n * Validate if a given string is a valid IP address (IPv4 or IPv6)\n *\n * Validation criteria:\n * - IPv4: Standard dotted decimal notation (0.0.0.0 to 255.255.255.255)\n * - IPv6: Standard and compressed formats\n *\n * @param {string} ip - The IP address to validate\n * @returns {boolean} True if valid IPv4 or IPv6, false otherwise\n *\n * @example\n * validateIPAddress(\"192.168.1.1\"); // true (IPv4)\n * validateIPAddress(\"::1\"); // true (IPv6 localhost)\n * validateIPAddress(\"invalid\"); // false\n */\nexport function validateIPAddress(ip: string): boolean {\n  if (!ip || typeof ip !== 'string') {\n    return false;\n  }\n\n  // Remove whitespace\n  const trimmed = ip.trim();\n\n  // Check IPv4\n  if (IPV4_REGEX.test(trimmed)) {\n    return true;\n  }\n\n  // Check IPv6\n  if (IPV6_REGEX.test(trimmed)) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Extract client IP address from Cloudflare request headers\n *\n * Cloudflare provides the real client IP in the CF-Connecting-IP header.\n * This header contains the actual IP address of the client, not the\n * Cloudflare proxy IP.\n *\n * Fallback order:\n * 1. CF-Connecting-IP (Cloudflare-specific, most reliable)\n * 2. X-Forwarded-For (first IP in comma-separated list)\n * 3. X-Real-IP (nginx/other proxies)\n * 4. Empty string if none found\n *\n * @param {Request} request - The HTTP request object\n * @returns {string} Client IP address or empty string if not found\n *\n * @example\n * const ip = extractClientIP(request);\n * // Returns: \"203.0.113.1\" (from CF-Connecting-IP header)\n */\nexport function extractClientIP(request: Request): string {\n  // Cloudflare-specific header (most reliable)\n  const cfConnectingIP = request.headers.get('CF-Connecting-IP');\n  if (cfConnectingIP) {\n    return cfConnectingIP.trim();\n  }\n\n  // X-Forwarded-For header (may contain multiple IPs)\n  const xForwardedFor = request.headers.get('X-Forwarded-For');\n  if (xForwardedFor) {\n    // Take first IP in comma-separated list (original client)\n    const firstIP = xForwardedFor.split(',')[0];\n    return firstIP.trim();\n  }\n\n  // X-Real-IP header (nginx/other proxies)\n  const xRealIP = request.headers.get('X-Real-IP');\n  if (xRealIP) {\n    return xRealIP.trim();\n  }\n\n  // No IP found - return empty string\n  return '';\n}\n\n/**\n * Hash an IP address using BLAKE2b-256 or SHA-256 (with salt)\n *\n * Uses Web Crypto API's crypto.subtle.digest() which provides:\n * - Cryptographically secure hashing\n * - Built-in browser/Workers API (no dependencies)\n * - BLAKE2b-256 preferred (faster, more secure than SHA-256)\n * - SHA-256 fallback if BLAKE2b unavailable\n *\n * Hashing process:\n * 1. Concatenate salt + IP address (salt prefix prevents rainbow tables)\n * 2. Hash with BLAKE2b-256 or SHA-256 (256-bit output)\n * 3. Convert to lowercase hexadecimal string (64 characters)\n *\n * Security properties:\n * - Deterministic: same IP + salt always produces same hash\n * - One-way: hash cannot be reversed to recover original IP\n * - Salted: prevents rainbow table attacks (FR80)\n * - 256-bit output: 2^128 collision resistance\n *\n * @param {string} ip - The IP address to hash (IPv4 or IPv6)\n * @param {string} salt - Cryptographic salt (from SALT_V1 env var)\n * @returns {Promise<IPHash>} 64-character lowercase hex string\n * @throws {Error} If salt is empty or IP is invalid format\n *\n * @example\n * const hash = await hashIP(\"192.168.1.1\", process.env.SALT_V1);\n * // Returns: \"a3bb189e8bf9388899912ace4e6543002f1a2b3c4d5e6f7890abcdef12345678\"\n */\nexport async function hashIP(ip: string, salt: string): Promise<IPHash> {\n  // Validate inputs\n  if (!salt || salt.trim().length === 0) {\n    throw new Error('Salt cannot be empty');\n  }\n\n  if (!validateIPAddress(ip)) {\n    throw new Error(`Invalid IP address format: ${ip}`);\n  }\n\n  // Prepare data: salt + IP (salt prefix prevents rainbow tables)\n  const encoder = new TextEncoder();\n  const data = encoder.encode(salt + ip);\n\n  // Try BLAKE2b-256 first (preferred for speed and security)\n  // Note: BLAKE2b may not be available in all Cloudflare Workers environments\n  let hashBuffer: ArrayBuffer;\n  try {\n    hashBuffer = await crypto.subtle.digest('BLAKE2b-256', data);\n  } catch (error) {\n    // Fallback to SHA-256 if BLAKE2b unavailable\n    // SHA-256 is universally supported in Web Crypto API\n    hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  }\n\n  // Convert ArrayBuffer to hex string (64 characters for 256-bit hash)\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n\n  return hashHex;\n}\n\n/**\n * Detect which hash algorithm is being used\n *\n * Helper function for testing and debugging to determine if BLAKE2b\n * is available or if SHA-256 fallback is being used.\n *\n * @returns {Promise<HashAlgorithm>} 'BLAKE2b-256' or 'SHA-256'\n *\n * @example\n * const algorithm = await detectHashAlgorithm();\n * console.log(`Using ${algorithm} for IP hashing`);\n */\nexport async function detectHashAlgorithm(): Promise<HashAlgorithm> {\n  const encoder = new TextEncoder();\n  const testData = encoder.encode('test');\n\n  try {\n    await crypto.subtle.digest('BLAKE2b-256', testData);\n    return 'BLAKE2b-256';\n  } catch {\n    return 'SHA-256';\n  }\n}\n\n/**\n * Hash and validate an IP address in one operation\n *\n * Convenience function combining extraction, validation, and hashing.\n * Useful for API endpoints that need to process IP addresses from requests.\n *\n * @param {Request} request - The HTTP request object\n * @param {string} salt - Cryptographic salt (from SALT_V1 env var)\n * @returns {Promise<IPHash>} 64-character lowercase hex string\n * @throws {Error} If IP cannot be extracted, is invalid, or salt is empty\n *\n * @example\n * const ipHash = await hashRequestIP(request, env.SALT_V1);\n * // Returns: \"a3bb189e8bf9388899912ace4e6543002f1a2b3c4d5e6f7890abcdef12345678\"\n */\nexport async function hashRequestIP(request: Request, salt: string): Promise<IPHash> {\n  const ip = extractClientIP(request);\n\n  if (!ip) {\n    throw new Error('Could not extract IP address from request');\n  }\n\n  return hashIP(ip, salt);\n}\n", "/**\n * Security Headers Middleware\n *\n * Adds Content Security Policy (CSP) and other security headers\n * to protect against XSS, clickjacking, and other attacks.\n *\n * Added as part of Story 3.5 code review follow-up.\n */\n\nimport { MiddlewareHandler } from 'hono';\n\n/**\n * Security headers middleware\n * Adds CSP and other security headers to all responses\n */\nexport const securityHeadersMiddleware: MiddlewareHandler = async (c, next) => {\n  await next();\n\n  // Content Security Policy (CSP) - Story 3.5 Follow-up + Story 5.5 updates\n  // Protects against XSS by restricting resource loading\n  const csp = [\n    \"default-src 'self'\",\n    \"script-src 'self' https://challenges.cloudflare.com https://cdn.jsdelivr.net https://static.cloudflareinsights.com\", // Allow Turnstile, Chart.js CDN, Cloudflare Analytics\n    \"style-src 'self' 'unsafe-inline'\", // Tailwind requires inline styles\n    \"img-src 'self' data: https:\",\n    \"font-src 'self' data:\",\n    \"connect-src 'self' https://cloudflareinsights.com\", // Allow Cloudflare Analytics beacon\n    'frame-src https://challenges.cloudflare.com', // Allow Turnstile iframe\n    \"base-uri 'self'\",\n    \"form-action 'self'\",\n    \"frame-ancestors 'none'\", // Prevent clickjacking\n  ].join('; ');\n\n  c.header('Content-Security-Policy', csp);\n\n  // Additional security headers\n  c.header('X-Content-Type-Options', 'nosniff'); // Prevent MIME sniffing\n  c.header('X-Frame-Options', 'DENY'); // Prevent clickjacking (redundant with CSP frame-ancestors)\n  c.header('X-XSS-Protection', '1; mode=block'); // Legacy XSS protection\n  c.header('Referrer-Policy', 'strict-origin-when-cross-origin'); // Control referrer information\n  c.header('Permissions-Policy', 'geolocation=(), microphone=(), camera=()'); // Disable unnecessary features\n};\n", "/**\n * Meta Injection Middleware - Stories 5.3 & 5.4\n *\n * Server-side injection of dynamic Open Graph, SEO, and Schema.org meta tags into HTML responses.\n * Enables rich social previews when links are shared on Twitter, Facebook, LinkedIn, etc.\n * Provides SEO optimization and structured data for search engines.\n *\n * Features:\n * - Dynamic OG tags with current median/total from /api/stats (Story 5.3)\n * - Personalized meta tags when ?u={hash} parameter present (FR23)\n * - SEO meta tags (title, description, keywords) - FR35, FR36\n * - Schema.org VideoGame structured data - FR37\n * - Schema.org Event structured data - FR38\n * - 5-minute cache TTL (aligns with stats API cache)\n * - Only processes HTML responses (checks Content-Type)\n * - Sanitizes all data to prevent XSS\n * - Graceful fallback if stats API fails\n *\n * @see docs/architecture.md - ADR-007: Dynamic Meta Tags via Workers Middleware\n * @see docs/sprint-artifacts/tech-spec-epic-5.md - MetaInjectionMiddleware\n */\n\nimport { Context, Next } from 'hono';\nimport type { Env, PersonalizedMetaData } from '../types';\nimport dayjs from 'dayjs';\nimport {\n  getStatisticsWithCache,\n  STATS_CACHE_KEY,\n  STATS_CACHE_TTL,\n} from '../services/statistics.service';\n\n/**\n * Cache key for meta injection (5-minute TTL)\n */\nconst META_CACHE_PREFIX = 'meta_injection:';\nconst META_CACHE_TTL = 300; // 5 minutes (same as stats API)\n\n/**\n * Default fallback stats if API fails\n */\nconst FALLBACK_STATS = {\n  median: '2027-03-15',\n  count: 0,\n};\n\n/**\n * Escape HTML entities to prevent XSS in meta tags\n */\nfunction escapeHtml(text: string): string {\n  const map: Record<string, string> = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;',\n  };\n  return text.replace(/[&<>\"']/g, (m) => map[m]);\n}\n\n/**\n * Format date for display in meta tags\n */\nfunction formatDateForDisplay(isoDate: string): string {\n  return dayjs(isoDate).format('MMM D, YYYY');\n}\n\n/**\n * Format number with commas (e.g., 10234 -> \"10,234\")\n */\nfunction formatNumber(num: number): string {\n  return num.toLocaleString('en-US');\n}\n\n/**\n * Look up user prediction by cookie_id hash from database\n * Used for personalized meta tags (FR23)\n */\nasync function lookupUserPrediction(\n  db: D1Database,\n  cookieHash: string\n): Promise<{ predicted_date: string } | null> {\n  try {\n    const result = await db\n      .prepare('SELECT predicted_date FROM predictions WHERE cookie_id = ? LIMIT 1')\n      .bind(cookieHash)\n      .first<{ predicted_date: string }>();\n\n    return result || null;\n  } catch (error) {\n    console.error('Error looking up user prediction:', error);\n    return null;\n  }\n}\n\n/**\n * Calculate delta days and sentiment for personalized meta tags\n */\nfunction calculatePersonalization(userDate: string, medianDate: string): PersonalizedMetaData {\n  const userDayjs = dayjs(userDate);\n  const medianDayjs = dayjs(medianDate);\n  const deltaDays = userDayjs.diff(medianDayjs, 'day');\n\n  let sentiment: 'optimistic' | 'pessimistic' | 'aligned';\n  if (deltaDays > 7) {\n    sentiment = 'pessimistic'; // Later than median = pessimistic\n  } else if (deltaDays < -7) {\n    sentiment = 'optimistic'; // Earlier than median = optimistic\n  } else {\n    sentiment = 'aligned'; // Within 7 days = aligned\n  }\n\n  return {\n    userDate,\n    deltaDays: Math.abs(deltaDays),\n    sentiment,\n  };\n}\n\n/**\n * Generate SEO meta tags HTML (Story 5.4: FR35, FR36)\n */\nfunction generateSEOTags(\n  stats: { median: string; count: number; min?: string; max?: string },\n  url: string\n): string {\n  const medianFormatted = formatDateForDisplay(stats.median);\n  const countFormatted = formatNumber(stats.count);\n\n  // FR35: Meta title optimized for \"GTA 6 predictions\"\n  const title = escapeHtml('GTA 6 Launch Date Predictions - Community Sentiment Tracker');\n\n  // FR36: Meta description with dynamic median and total count\n  const description = escapeHtml(\n    `Track community predictions for GTA 6's launch date. Submit your prediction and see what ${countFormatted} other fans think. Current median: ${medianFormatted}.`\n  );\n\n  // Keywords (optional, low SEO value per modern SEO best practices)\n  const keywords = escapeHtml(\n    'GTA 6, launch date, predictions, community, Rockstar, Grand Theft Auto 6'\n  );\n\n  // Canonical URL (must be absolute)\n  const baseUrl = new URL(url).origin;\n  const canonicalUrl = escapeHtml(`${baseUrl}/`);\n\n  return `\n    <title>${title}</title>\n    <meta name=\"description\" content=\"${description}\" />\n    <meta name=\"keywords\" content=\"${keywords}\" />\n    <link rel=\"canonical\" href=\"${canonicalUrl}\" />\n  `.trim();\n}\n\n/**\n * Generate Schema.org VideoGame structured data (Story 5.4: FR37)\n */\nfunction generateSchemaVideoGame(stats: {\n  median: string;\n  count: number;\n  min?: string;\n  max?: string;\n}): object {\n  return {\n    '@context': 'https://schema.org',\n    '@type': 'VideoGame',\n    name: 'Grand Theft Auto VI',\n    gamePlatform: ['PlayStation 5', 'Xbox Series X'],\n    publisher: {\n      '@type': 'Organization',\n      name: 'Rockstar Games',\n    },\n    datePublished: 'TBD',\n    aggregateRating: {\n      '@type': 'AggregateRating',\n      ratingValue: stats.median,\n      ratingCount: stats.count,\n      bestRating: stats.max || '2099-01-01',\n      worstRating: stats.min || '2025-12-01',\n    },\n  };\n}\n\n/**\n * Generate Schema.org Event structured data (Story 5.4: FR38)\n */\nfunction generateSchemaEvent(stats: { median: string }): object {\n  return {\n    '@context': 'https://schema.org',\n    '@type': 'Event',\n    name: 'GTA 6 Launch Date',\n    startDate: stats.median,\n    location: {\n      '@type': 'VirtualLocation',\n      url: 'https://rockstargames.com',\n    },\n    organizer: {\n      '@type': 'Organization',\n      name: 'Rockstar Games',\n    },\n  };\n}\n\n/**\n * Generate Open Graph meta tags HTML\n */\nfunction generateOGTags(\n  stats: { median: string; count: number },\n  url: string,\n  personalized?: PersonalizedMetaData\n): string {\n  const baseUrl = new URL(url).origin;\n  // Use PNG for Twitter compatibility (Twitter doesn't support SVG)\n  // SVG version available at og-image.svg for platforms that support it\n  const ogImageUrl = `${baseUrl}/images/og-image.png`;\n\n  let ogTitle: string;\n  let ogDescription: string;\n  let twitterTitle: string;\n  let twitterDescription: string;\n\n  if (personalized) {\n    // Personalized meta tags (FR23)\n    const userDateFormatted = formatDateForDisplay(personalized.userDate);\n    const medianFormatted = formatDateForDisplay(stats.median);\n\n    ogTitle = escapeHtml(`I predicted GTA 6 will launch on ${userDateFormatted}`);\n\n    const sentimentText =\n      personalized.sentiment === 'optimistic'\n        ? `I'm ${personalized.deltaDays} days more optimistic`\n        : personalized.sentiment === 'pessimistic'\n          ? `I'm ${personalized.deltaDays} days more pessimistic`\n          : \"I'm aligned with the community\";\n\n    ogDescription = escapeHtml(\n      `The community median is ${medianFormatted}. ${sentimentText}. What do you think?`\n    );\n\n    twitterTitle = ogTitle;\n    twitterDescription = escapeHtml(\n      `Community median: ${medianFormatted} (${formatNumber(stats.count)} predictions)`\n    );\n  } else {\n    // Default meta tags\n    const medianFormatted = formatDateForDisplay(stats.median);\n    const countFormatted = formatNumber(stats.count);\n\n    ogTitle = escapeHtml('GTA 6 Launch Date Predictions - Community Sentiment');\n    ogDescription = escapeHtml(\n      `The community predicts GTA 6 will launch on ${medianFormatted} (median of ${countFormatted} predictions). What do you think?`\n    );\n\n    twitterTitle = escapeHtml('GTA 6 Launch Date Predictions');\n    twitterDescription = escapeHtml(\n      `Community median: ${medianFormatted} (${countFormatted} predictions)`\n    );\n  }\n\n  // Generate meta tags HTML\n  return `\n    <meta property=\"og:title\" content=\"${ogTitle}\" />\n    <meta property=\"og:description\" content=\"${ogDescription}\" />\n    <meta property=\"og:image\" content=\"${escapeHtml(ogImageUrl)}\" />\n    <meta property=\"og:url\" content=\"${escapeHtml(url)}\" />\n    <meta property=\"og:type\" content=\"website\" />\n    <meta name=\"twitter:card\" content=\"summary_large_image\" />\n    <meta name=\"twitter:title\" content=\"${twitterTitle}\" />\n    <meta name=\"twitter:description\" content=\"${twitterDescription}\" />\n    <meta name=\"twitter:image\" content=\"${escapeHtml(ogImageUrl)}\" />\n  `.trim();\n}\n\n/**\n * Fetch stats from statistics service with caching\n * Story 5.4: Extended to include min/max for Schema.org aggregateRating\n * Uses the same statistics service and KV cache as /api/stats endpoint\n */\nasync function fetchStats(\n  c: Context<{ Bindings: Env }>\n): Promise<{ median: string; count: number; min?: string; max?: string }> {\n  try {\n    // Use the statistics service with KV cache (same as /api/stats)\n    const { stats } = await getStatisticsWithCache(\n      c.env.DB,\n      c.env.gta6_stats_cache,\n      STATS_CACHE_KEY,\n      STATS_CACHE_TTL\n    );\n\n    // Return stats in the format expected by meta tag generation\n    if (stats && stats.median && stats.count >= 0) {\n      return {\n        median: stats.median,\n        count: stats.count,\n        min: stats.min,\n        max: stats.max,\n      };\n    }\n\n    // Fallback to hardcoded default if no stats available\n    return FALLBACK_STATS;\n  } catch (error) {\n    console.error('Error fetching stats for meta injection:', error);\n    return FALLBACK_STATS;\n  }\n}\n\n/**\n * Meta Injection Middleware\n *\n * Intercepts HTML responses and injects dynamic Open Graph meta tags.\n * Only processes HTML Content-Type. Caches generated tags for 5 minutes.\n *\n * @param c Hono context\n * @param next Next middleware\n */\nexport async function metaInjectionMiddleware(\n  c: Context<{ Bindings: Env }>,\n  next: Next\n): Promise<void> {\n  // Call next middleware first to get response\n  await next();\n\n  // Only process HTML responses\n  const contentType = c.res.headers.get('content-type');\n  if (!contentType || !contentType.includes('text/html')) {\n    return;\n  }\n\n  const startTime = Date.now();\n\n  try {\n    // Get request URL\n    const url = c.req.url;\n\n    // Optional: Only inject for social crawlers (optimization)\n    // For MVP, inject for all HTML requests to ensure consistency\n    // const userAgent = c.req.header('user-agent') || null;\n    // const isCrawler = isSocialCrawler(userAgent);\n    // if (!isCrawler) {\n    //   return;\n    // }\n\n    // Check for ?u={hash} parameter for personalized meta tags\n    const urlObj = new URL(url);\n    const userHash = urlObj.searchParams.get('u');\n\n    // Build cache key\n    const cacheKey = `${META_CACHE_PREFIX}${userHash || 'default'}`;\n\n    // Try to get cached meta tags from KV\n    let metaTags: string | null = null;\n    if (c.env.gta6_stats_cache) {\n      metaTags = await c.env.gta6_stats_cache.get(cacheKey);\n    }\n\n    if (!metaTags) {\n      // Cache miss - generate meta tags\n      const stats = await fetchStats(c);\n\n      let personalized: PersonalizedMetaData | undefined;\n\n      if (userHash) {\n        // Look up user prediction for personalization\n        const userPrediction = await lookupUserPrediction(c.env.DB, userHash);\n        if (userPrediction) {\n          personalized = calculatePersonalization(userPrediction.predicted_date, stats.median);\n        }\n      }\n\n      // Generate all meta tags (OG, SEO, Schema.org)\n      const ogTags = generateOGTags(stats, url, personalized);\n      const seoTags = generateSEOTags(stats, url);\n      const schemaVideoGame = generateSchemaVideoGame(stats);\n      const schemaEvent = generateSchemaEvent(stats);\n\n      // Generate JSON-LD script tags for Schema.org\n      const schemaVideoGameScript = `<script type=\"application/ld+json\">${JSON.stringify(schemaVideoGame, null, 2)}</script>`;\n      const schemaEventScript = `<script type=\"application/ld+json\">${JSON.stringify(schemaEvent, null, 2)}</script>`;\n\n      // Combine all meta tags\n      metaTags = `${seoTags}\\n${ogTags}\\n${schemaVideoGameScript}\\n${schemaEventScript}`;\n\n      // Cache generated meta tags\n      if (c.env.gta6_stats_cache) {\n        await c.env.gta6_stats_cache.put(cacheKey, metaTags, { expirationTtl: META_CACHE_TTL });\n      }\n\n      console.log(\n        JSON.stringify({\n          timestamp: new Date().toISOString(),\n          level: 'INFO',\n          event: 'meta_injection',\n          cache_hit: false,\n          personalized: !!personalized,\n          duration_ms: Date.now() - startTime,\n        })\n      );\n    } else {\n      console.log(\n        JSON.stringify({\n          timestamp: new Date().toISOString(),\n          level: 'INFO',\n          event: 'meta_injection',\n          cache_hit: true,\n          duration_ms: Date.now() - startTime,\n        })\n      );\n    }\n\n    // Get HTML body\n    const html = await c.res.text();\n\n    // Inject meta tags before </head>\n    const modifiedHtml = html.replace('</head>', `${metaTags}\\n  </head>`);\n\n    // Replace response with modified HTML\n    c.res = new Response(modifiedHtml, {\n      status: c.res.status,\n      headers: c.res.headers,\n    });\n  } catch (error) {\n    console.error(\n      JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'ERROR',\n        event: 'meta_injection_error',\n        error: error instanceof Error ? error.message : String(error),\n        duration_ms: Date.now() - startTime,\n      })\n    );\n    // Don't block page load on meta injection errors\n    // Original HTML is served without dynamic tags\n  }\n}\n", "/**\n * Statistics Service Module\n *\n * Provides functions for calculating and caching prediction statistics.\n * Implements efficient database queries for min/max/count and calls\n * the weighted median algorithm from Story 2.9.\n *\n * Statistics include:\n * - Weighted median date (reduces troll influence)\n * - Minimum predicted date (earliest prediction)\n * - Maximum predicted date (latest prediction)\n * - Total prediction count\n *\n * @see Story 2.10: Statistics Calculation and Caching\n * @see docs/architecture.md - API Contracts: GET /api/stats\n */\n\nimport dayjs from 'dayjs';\nimport { calculateWeightedMedianFromRows } from '../utils/weighted-median';\n\n/**\n * Statistics response interface\n * Matches the API contract for GET /api/stats\n */\nexport interface StatsResponse {\n  median: string; // Weighted median date (ISO 8601: YYYY-MM-DD)\n  min: string; // Earliest prediction date\n  max: string; // Latest prediction date\n  count: number; // Total prediction count\n  cached_at: string; // ISO 8601 timestamp when stats were calculated\n}\n\n/**\n * Database row type for aggregation query\n */\ninterface StatsAggregation {\n  min_date: string | null;\n  max_date: string | null;\n  total_count: number;\n}\n\n/**\n * Database row type for predictions query\n */\ninterface PredictionRow {\n  predicted_date: string;\n  weight: number;\n}\n\n/**\n * Calculate statistics from the database\n *\n * Performs two efficient queries:\n * 1. Aggregation query for min/max/count (single pass)\n * 2. Ordered predictions query for weighted median calculation\n *\n * @param db - D1Database instance\n * @returns StatsResponse with all calculated statistics\n *\n * @example\n * const stats = await calculateStatistics(c.env.DB);\n * // {\n * //   median: \"2026-11-19\",\n * //   min: \"2025-06-15\",\n * //   max: \"2099-12-31\",\n * //   count: 10234,\n * //   cached_at: \"2025-11-24T14:30:00Z\"\n * // }\n */\nexport async function calculateStatistics(db: D1Database): Promise<StatsResponse> {\n  const startTime = Date.now();\n\n  // Query 1: Get min, max, and count in a single efficient query\n  const aggregationResult = await db\n    .prepare(\n      `SELECT\n        MIN(predicted_date) as min_date,\n        MAX(predicted_date) as max_date,\n        COUNT(*) as total_count\n      FROM predictions`\n    )\n    .first<StatsAggregation>();\n\n  // Handle empty database case\n  if (\n    !aggregationResult ||\n    aggregationResult.total_count === 0 ||\n    !aggregationResult.min_date ||\n    !aggregationResult.max_date\n  ) {\n    return {\n      median: '',\n      min: '',\n      max: '',\n      count: 0,\n      cached_at: dayjs().toISOString(),\n    };\n  }\n\n  // Query 2: Get all predictions with weights for median calculation\n  // Ordered by predicted_date for efficient median finding\n  const predictionsResult = await db\n    .prepare(\n      `SELECT predicted_date, weight\n       FROM predictions\n       ORDER BY predicted_date ASC`\n    )\n    .all<PredictionRow>();\n\n  // Calculate weighted median using Story 2.9 algorithm\n  const median = calculateWeightedMedianFromRows(predictionsResult.results || []);\n\n  const calculationTime = Date.now() - startTime;\n\n  // Performance monitoring: Log slow calculations (>100ms)\n  if (calculationTime > 100) {\n    console.warn('Stats calculation slow', {\n      duration_ms: calculationTime,\n      prediction_count: aggregationResult.total_count,\n    });\n  } else {\n    console.log('Stats calculated', {\n      duration_ms: calculationTime,\n      prediction_count: aggregationResult.total_count,\n    });\n  }\n\n  return {\n    median: median || aggregationResult.min_date, // Fallback to min if median calculation fails\n    min: aggregationResult.min_date,\n    max: aggregationResult.max_date,\n    count: aggregationResult.total_count,\n    cached_at: dayjs().toISOString(),\n  };\n}\n\n/**\n * Get statistics with caching support\n *\n * Checks the Cloudflare KV cache first. On cache miss, calculates\n * statistics from database and stores in cache with TTL.\n *\n * @param db - D1Database instance\n * @param kv - KVNamespace for stats cache (optional, direct calculation if not provided)\n * @param cacheKey - Cache key (default: 'stats:latest')\n * @param ttlSeconds - Cache TTL in seconds (default: 300 = 5 minutes)\n * @returns Object with stats and cache hit indicator\n *\n * @example\n * const { stats, cacheHit } = await getStatisticsWithCache(\n *   c.env.DB,\n *   c.env.gta6_stats_cache,\n *   'stats:latest',\n *   300\n * );\n */\nexport async function getStatisticsWithCache(\n  db: D1Database,\n  kv: KVNamespace | undefined,\n  cacheKey: string = 'stats:latest',\n  ttlSeconds: number = 300\n): Promise<{ stats: StatsResponse; cacheHit: boolean }> {\n  // Try cache first if KV is available\n  if (kv) {\n    try {\n      const cached = await kv.get(cacheKey);\n      if (cached) {\n        const stats = JSON.parse(cached) as StatsResponse;\n        console.log('Stats cache HIT', { cacheKey });\n        return { stats, cacheHit: true };\n      }\n      console.log('Stats cache MISS', { cacheKey });\n    } catch (error) {\n      // Cache read failed - continue with database query\n      console.warn('KV cache read failed, falling back to database:', error);\n    }\n  }\n\n  // Cache miss - calculate from database\n  const stats = await calculateStatistics(db);\n\n  // Store in cache if KV is available\n  if (kv) {\n    try {\n      await kv.put(cacheKey, JSON.stringify(stats), {\n        expirationTtl: ttlSeconds,\n      });\n    } catch (error) {\n      // Cache write failed - log but don't fail the request\n      console.warn('KV cache write failed:', error);\n    }\n  }\n\n  return { stats, cacheHit: false };\n}\n\n/**\n * Invalidate statistics cache\n *\n * Called after prediction submission, update, or deletion to ensure\n * fresh data is returned on next request.\n *\n * @param kv - KVNamespace for stats cache\n * @param cacheKey - Cache key (default: 'stats:latest')\n *\n * @example\n * // After successful prediction submission\n * await invalidateStatsCache(c.env.gta6_stats_cache);\n */\nexport async function invalidateStatsCache(\n  kv: KVNamespace | undefined,\n  cacheKey: string = 'stats:latest'\n): Promise<void> {\n  if (!kv) {\n    return;\n  }\n\n  try {\n    await kv.delete(cacheKey);\n    console.log('Stats cache invalidated', { cacheKey });\n  } catch (error) {\n    // Cache invalidation failed - log but don't fail\n    console.warn('Stats cache invalidation failed:', error);\n  }\n}\n\n/**\n * Statistics cache key constant\n * Used for consistent key naming across the application\n */\nexport const STATS_CACHE_KEY = 'stats:latest';\n\n/**\n * Default cache TTL in seconds (5 minutes per FR12)\n */\nexport const STATS_CACHE_TTL = 300;\n", "/**\n * Weighted Median Algorithm Utility Module\n *\n * Provides functions for calculating weighted medians and date-based weights\n * to reduce the influence of troll predictions (e.g., 2099, 1999).\n *\n * Weight tiers (based on years difference from official date 2026-11-19):\n * - Within 5 years: 1.0 (full weight) - reasonable predictions\n * - 5-50 years: 0.3 (reduced weight) - less likely but possible\n * - Beyond 50 years: 0.1 (minimal weight) - troll/unreasonable predictions\n *\n * @see Story 2.9: Weighted Median Algorithm Implementation\n * @see docs/architecture.md - Implementation Patterns: Weighted Median Algorithm\n */\n\nimport dayjs from 'dayjs';\n\n/**\n * Official GTA 6 release date (announced by Rockstar Games)\n * Used as the reference point for calculating date reasonableness\n */\nexport const OFFICIAL_DATE = '2026-11-19';\n\n/**\n * Weight tier boundaries (years from official date)\n */\nexport const WEIGHT_TIER_FULL = 5; // 0-5 years: full weight (1.0)\nexport const WEIGHT_TIER_REDUCED = 50; // 5-50 years: reduced weight (0.3)\n\n/**\n * Weight values for each tier\n */\nexport const WEIGHT_FULL = 1.0; // Within 5 years\nexport const WEIGHT_REDUCED = 0.3; // 5-50 years\nexport const WEIGHT_MINIMAL = 0.1; // Beyond 50 years\n\n/**\n * Interface for weighted prediction data\n */\nexport interface WeightedPrediction {\n  date: string; // ISO 8601 format (YYYY-MM-DD)\n  weight: number; // Weight value (0.1 to 1.0)\n}\n\n/**\n * Calculate weight based on date reasonableness\n *\n * Weight formula: Predictions closer to the official date get higher weight\n * - Within 5 years (2021-2031): 1.0 (full weight)\n * - 5-50 years: 0.3 (reduced weight)\n * - Beyond 50 years: 0.1 (minimal weight)\n *\n * @param predictedDate - Date string in ISO 8601 format (YYYY-MM-DD) or Date object\n * @returns Weight value between 0.1 and 1.0\n *\n * @example\n * calculateWeight('2026-11-19') // 1.0 (official date)\n * calculateWeight('2027-03-15') // 1.0 (within 5 years)\n * calculateWeight('2040-01-01') // 0.3 (about 13 years)\n * calculateWeight('2099-12-31') // 0.1 (73 years out)\n */\nexport function calculateWeight(predictedDate: Date | string): number {\n  const officialDate = dayjs(OFFICIAL_DATE);\n  const predicted = dayjs(predictedDate);\n\n  // Calculate absolute years difference (handles both past and future)\n  const yearsDiff = Math.abs(predicted.diff(officialDate, 'year', true));\n\n  // Apply weight tiers\n  if (yearsDiff <= WEIGHT_TIER_FULL) {\n    return WEIGHT_FULL; // 1.0 for predictions within 5 years\n  }\n\n  if (yearsDiff <= WEIGHT_TIER_REDUCED) {\n    return WEIGHT_REDUCED; // 0.3 for predictions 5-50 years out\n  }\n\n  return WEIGHT_MINIMAL; // 0.1 for predictions beyond 50 years\n}\n\n/**\n * Calculate weighted median from an array of weighted predictions\n *\n * Algorithm:\n * 1. Sort predictions by date (ascending)\n * 2. Calculate total weight sum\n * 3. Find 50th percentile by cumulative weight\n * 4. Return the date where cumulative weight >= targetWeight (50%)\n *\n * Time complexity: O(n log n) for sorting, O(n) for finding median\n *\n * @param predictions - Array of weighted predictions with date and weight\n * @returns Weighted median date string (ISO 8601), or null if no valid predictions\n *\n * @example\n * // All reasonable dates - returns true median\n * calculateWeightedMedian([\n *   { date: '2026-01-01', weight: 1.0 },\n *   { date: '2026-11-19', weight: 1.0 },\n *   { date: '2027-06-15', weight: 1.0 },\n * ]) // '2026-11-19'\n *\n * // Mix of reasonable + outliers - outliers have less influence\n * calculateWeightedMedian([\n *   { date: '2026-11-19', weight: 1.0 },\n *   { date: '2027-01-01', weight: 1.0 },\n *   { date: '2099-12-31', weight: 0.1 },  // Troll prediction\n * ]) // '2026-11-19' (outlier has minimal influence)\n */\nexport function calculateWeightedMedian(predictions: WeightedPrediction[]): string | null {\n  // Edge case: Empty array\n  if (predictions.length === 0) {\n    return null;\n  }\n\n  // Edge case: Single prediction\n  if (predictions.length === 1) {\n    return predictions[0].date;\n  }\n\n  // Sort by date (ascending)\n  const sorted = [...predictions].sort((a, b) => dayjs(a.date).unix() - dayjs(b.date).unix());\n\n  // Calculate total weight\n  const totalWeight = sorted.reduce((sum, p) => sum + p.weight, 0);\n\n  // Edge case: All weights are 0 - fallback to simple median\n  if (totalWeight === 0) {\n    const middleIndex = Math.floor((sorted.length - 1) / 2);\n    return sorted[middleIndex].date;\n  }\n\n  // Find 50th percentile by cumulative weight\n  const targetWeight = totalWeight / 2;\n  let cumulativeWeight = 0;\n\n  for (const item of sorted) {\n    cumulativeWeight += item.weight;\n    if (cumulativeWeight >= targetWeight) {\n      return item.date;\n    }\n  }\n\n  // Fallback: Return last item (should not reach here with valid data)\n  return sorted[sorted.length - 1].date;\n}\n\n/**\n * Calculate weighted median directly from database result rows\n *\n * Convenience function that accepts database result format directly.\n * Converts predicted_date and weight fields to WeightedPrediction format.\n *\n * @param rows - Array of database rows with predicted_date and weight fields\n * @returns Weighted median date string (ISO 8601), or null if no valid predictions\n *\n * @example\n * const rows = await db.prepare(\n *   'SELECT predicted_date, weight FROM predictions ORDER BY predicted_date ASC'\n * ).all();\n * const median = calculateWeightedMedianFromRows(rows.results);\n */\nexport function calculateWeightedMedianFromRows(\n  rows: Array<{ predicted_date: string; weight: number }>\n): string | null {\n  const predictions: WeightedPrediction[] = rows.map((row) => ({\n    date: row.predicted_date,\n    weight: row.weight,\n  }));\n\n  return calculateWeightedMedian(predictions);\n}\n\n/**\n * Calculate simple median (unweighted) - fallback function\n *\n * Used when all weights are 0 (FR63 requirement) or as comparison baseline.\n * For even number of predictions, returns the lower of the two middle values.\n *\n * @param dates - Array of date strings in ISO 8601 format\n * @returns Median date string, or null if empty array\n *\n * @example\n * calculateSimpleMedian(['2026-01-01', '2026-06-15', '2027-01-01']) // '2026-06-15'\n * calculateSimpleMedian(['2026-01-01', '2027-01-01']) // '2026-01-01' (lower of middle two)\n */\nexport function calculateSimpleMedian(dates: string[]): string | null {\n  if (dates.length === 0) {\n    return null;\n  }\n\n  // Sort by date (ascending)\n  const sorted = [...dates].sort((a, b) => dayjs(a).unix() - dayjs(b).unix());\n\n  // For even number, return lower of two middle values\n  const middleIndex = Math.floor((sorted.length - 1) / 2);\n  return sorted[middleIndex];\n}\n", "/**\n * Prediction Routes - POST /api/predict and PUT /api/predict\n *\n * Handles prediction submission and update with multi-layered validation:\n * 1. Cookie ID extraction and validation (Story 2.1)\n * 2. IP address hashing (Story 2.2)\n * 3. Input validation (Story 2.4)\n * 4. Turnstile verification (Story 2.5B)\n * 5. Rate limiting (Story 2.6 - via middleware)\n * 6. Weight calculation (Story 2.9)\n * 7. Database transaction with UNIQUE constraint handling (Story 1.4)\n *\n * @see Story 2.7: Prediction Submission API Endpoint (POST)\n * @see Story 2.8: Prediction Update API Endpoint (PUT)\n * @see docs/architecture.md - API Contracts\n */\n\nimport { Hono } from 'hono';\nimport type { Env, ErrorResponse, QueuedSubmission } from '../types';\nimport { PredictionRequestSchema } from '../utils/validation';\nimport {\n  getCookie,\n  validateCookieID,\n  generateCookieID,\n  setCookie,\n  COOKIE_NAME,\n  getDefaultCookieOptions,\n} from '../utils/cookie';\nimport { hashRequestIP } from '../utils/ip-hash';\nimport { verifyAndEvaluateTurnstile } from '../utils/turnstile';\nimport { calculateWeight } from '../utils/weighted-median';\nimport { calculateStatistics } from '../services/statistics.service';\nimport { invalidateAllCaches } from '../services/predictions-aggregation.service';\nimport {\n  getCapacityLevel,\n  incrementRequestCount,\n  queueSubmission,\n  hasAlertBeenSent,\n  markAlertSent,\n} from '../services/capacity.service';\nimport { getDegradationState } from '../utils/degradation';\n\n/**\n * Retry helper for database deadlocks and BUSY errors (Story 3.6 - AC: Scenario 3)\n * Implements exponential backoff: 100ms, 200ms, 400ms\n *\n * @param fn - Async function to retry\n * @param maxAttempts - Maximum number of attempts (default: 3)\n * @param delays - Delay in ms between retries (default: [100, 200, 400])\n * @returns Result from successful execution\n * @throws Error if all retries fail\n */\nasync function retryWithBackoff<T>(\n  fn: () => Promise<T>,\n  maxAttempts: number = 3,\n  delays: number[] = [100, 200, 400]\n): Promise<T> {\n  let lastError: Error | null = null;\n  let deadlockCount = 0;\n\n  for (let attempt = 0; attempt < maxAttempts; attempt++) {\n    try {\n      return await fn();\n    } catch (error) {\n      lastError = error instanceof Error ? error : new Error(String(error));\n      const errorMessage = lastError.message.toLowerCase();\n\n      // Check if error is a deadlock or BUSY error (SQLite specific)\n      const isDeadlock =\n        errorMessage.includes('busy') ||\n        errorMessage.includes('deadlock') ||\n        errorMessage.includes('locked');\n\n      if (!isDeadlock || attempt === maxAttempts - 1) {\n        // Not a deadlock error, or final attempt - rethrow\n        throw lastError;\n      }\n\n      // Log deadlock detection (Story 3.6 - AC: Transaction logging)\n      deadlockCount++;\n      const delay = delays[attempt] || delays[delays.length - 1];\n      console.warn('Database deadlock/BUSY detected - retrying', {\n        attempt: attempt + 1,\n        maxAttempts,\n        nextDelay: delay,\n        error: errorMessage.substring(0, 100),\n        timestamp: new Date().toISOString(),\n      });\n\n      // Wait before retry with exponential backoff\n      await new Promise((resolve) => setTimeout(resolve, delay));\n    }\n  }\n\n  // Log deadlock rate for monitoring (Story 3.6 - AC: Alert if rate > 1%)\n  if (deadlockCount > 0) {\n    console.log('Deadlock retry completed', {\n      totalAttempts: maxAttempts,\n      deadlockCount,\n      success: false,\n      timestamp: new Date().toISOString(),\n    });\n  }\n\n  // All retries failed\n  throw lastError || new Error('Retry failed - unknown error');\n}\n\n/**\n * Create prediction submission routes\n *\n * @returns Hono app with /api/predict routes configured\n */\nexport function createPredictRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * GET /api/predict - Get current user's prediction\n   *\n   * Fetches the user's existing prediction using their cookie_id.\n   * Returns 404 if no prediction found (user hasn't submitted yet).\n   *\n   * Success (200 OK):\n   * {\n   *   \"success\": true,\n   *   \"data\": {\n   *     \"predicted_date\": \"2027-02-14\",\n   *     \"submitted_at\": \"2025-11-27T10:30:00.000Z\",\n   *     \"updated_at\": \"2025-11-27T15:45:00.000Z\"\n   *   }\n   * }\n   *\n   * Error responses:\n   * - 404: No prediction found (user hasn't submitted)\n   * - 400: Invalid or missing cookie\n   */\n  app.get('/api/predict', async (c) => {\n    try {\n      // Extract cookie_id\n      const cookieHeader = c.req.header('Cookie') || '';\n      const cookieId = getCookie(cookieHeader, COOKIE_NAME) || null;\n\n      // Validate cookie\n      if (!cookieId || !validateCookieID(cookieId)) {\n        return c.json(\n          {\n            success: false,\n            error: {\n              code: 'NOT_FOUND',\n              message: 'No prediction found. Please submit a prediction first.',\n            },\n          },\n          404\n        );\n      }\n\n      // Query prediction by cookie_id\n      const prediction = await c.env.DB.prepare(\n        'SELECT predicted_date, submitted_at, updated_at FROM predictions WHERE cookie_id = ?'\n      )\n        .bind(cookieId)\n        .first();\n\n      if (!prediction) {\n        return c.json(\n          {\n            success: false,\n            error: {\n              code: 'NOT_FOUND',\n              message: 'No prediction found. Please submit a prediction first.',\n            },\n          },\n          404\n        );\n      }\n\n      // Return user's prediction\n      return c.json(\n        {\n          success: true,\n          data: {\n            predicted_date: prediction.predicted_date,\n            submitted_at: prediction.submitted_at,\n            updated_at: prediction.updated_at,\n          },\n        },\n        200\n      );\n    } catch (error) {\n      console.error('Error fetching user prediction:', error);\n      return c.json(\n        {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to fetch prediction. Please try again.',\n          },\n        },\n        500\n      );\n    }\n  });\n\n  /**\n   * POST /api/predict - Submit a new prediction\n   *\n   * Request body:\n   * {\n   *   \"predicted_date\": \"2026-11-19\",\n   *   \"turnstile_token\": \"0x1aBcDeFg...\"\n   * }\n   *\n   * Success (201 Created):\n   * {\n   *   \"success\": true,\n   *   \"prediction_id\": 1234,\n   *   \"predicted_date\": \"2026-11-19\",\n   *   \"message\": \"Your prediction has been recorded!\"\n   * }\n   *\n   * Error responses:\n   * - 400: Validation error\n   * - 409: IP already submitted (UNIQUE constraint)\n   * - 429: Rate limit exceeded (handled by middleware)\n   * - 503: Bot detected (Turnstile failed)\n   * - 500: Server/database error\n   */\n  app.post('/api/predict', async (c) => {\n    const startTime = Date.now();\n    let cookieId: string | null = null;\n    let ipHash: string | null = null;\n\n    try {\n      // Step 0: Check capacity and increment request counter (Story 3.7)\n      const kv = c.env.gta6_capacity;\n      await incrementRequestCount(kv);\n\n      const { level: capacityLevel, requestsToday, resetAt } = await getCapacityLevel(kv);\n      const degradationState = getDegradationState(capacityLevel, requestsToday, resetAt);\n\n      // AC12: Alert at 80% threshold\n      if (capacityLevel === 'elevated' && !(await hasAlertBeenSent(kv))) {\n        console.warn(\n          JSON.stringify({\n            timestamp: new Date().toISOString(),\n            level: 'WARN',\n            message: 'Capacity threshold reached: 80%',\n            context: { requestsToday, capacityLevel },\n          })\n        );\n        await markAlertSent(kv);\n      }\n\n      // AC8-AC10: At 100% capacity - read-only mode\n      if (!degradationState.features.submissionsEnabled) {\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: \"We've reached capacity for today. Try again later.\",\n            details: {\n              capacityLevel,\n              resetAt: degradationState.resetAt,\n            },\n          },\n        };\n        return c.json(errorResponse, 503);\n      }\n\n      // Step 1: Parse and validate request body\n      const body = await c.req.json();\n      const validationResult = PredictionRequestSchema.safeParse(body);\n\n      if (!validationResult.success) {\n        const firstError = validationResult.error.errors[0];\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: firstError.message,\n            field: firstError.path.join('.'),\n          },\n        };\n        return c.json(errorResponse, 400);\n      }\n\n      const { predicted_date, turnstile_token } = validationResult.data;\n\n      // Step 2: Extract and validate cookie_id\n      const cookieHeader = c.req.header('Cookie') || '';\n      cookieId = getCookie(cookieHeader, COOKIE_NAME) || null;\n\n      // DEBUG: Log cookie detection\n      console.log('POST /api/predict - Cookie detection', {\n        hasCookieHeader: !!cookieHeader,\n        cookieHeaderLength: cookieHeader?.length || 0,\n        extractedCookieId: cookieId ? cookieId.substring(0, 8) + '...' : null,\n        cookieName: COOKIE_NAME,\n      });\n\n      // Generate new cookie if not present or invalid\n      let isNewCookie = false;\n      if (!cookieId || !validateCookieID(cookieId)) {\n        const oldCookie = cookieId;\n        cookieId = generateCookieID();\n        isNewCookie = true;\n        console.log('POST /api/predict - Generated new cookie', {\n          reason: !oldCookie ? 'no_cookie' : 'invalid_cookie',\n          oldCookiePrefix: oldCookie ? oldCookie.substring(0, 8) : null,\n          newCookiePrefix: cookieId.substring(0, 8),\n        });\n      }\n\n      // Step 3: Extract and hash IP address\n      try {\n        ipHash = await hashRequestIP(c.req.raw, c.env.SALT_V1 || c.env.IP_HASH_SALT || '');\n      } catch (error) {\n        console.error('IP hash error:', error);\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to process request. Please try again.',\n          },\n        };\n        return c.json(errorResponse, 500);\n      }\n\n      // Step 4: Verify Turnstile token (bot protection)\n      const { passed, result: turnstileResult } = await verifyAndEvaluateTurnstile(\n        turnstile_token,\n        c.env.TURNSTILE_SECRET_KEY || ''\n      );\n\n      if (!passed) {\n        console.warn('Turnstile verification failed', {\n          errorCodes: turnstileResult['error-codes'],\n          ipHashPrefix: ipHash.substring(0, 8),\n        });\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'BOT_DETECTED',\n            message: 'Verification failed. Please complete the challenge and try again.',\n          },\n        };\n        return c.json(errorResponse, 503);\n      }\n\n      // Step 5: Calculate weight based on date reasonableness\n      const weight = calculateWeight(predicted_date);\n\n      // Step 6: Get user agent (optional)\n      const userAgent = c.req.header('User-Agent') || null;\n\n      // Step 7: Check if cookie_id already exists (Story 3.6 - Cookie-first logic)\n      // If exists, route to UPDATE instead of INSERT (handles double-click scenario)\n      console.log('POST /api/predict - Checking for existing prediction by cookie', {\n        cookieIdPrefix: cookieId.substring(0, 8),\n        isNewCookie,\n      });\n\n      const existingByCookie = await c.env.DB.prepare(\n        'SELECT id, predicted_date FROM predictions WHERE cookie_id = ?'\n      )\n        .bind(cookieId)\n        .first();\n\n      console.log('POST /api/predict - Database lookup result', {\n        cookieIdPrefix: cookieId.substring(0, 8),\n        foundExisting: !!existingByCookie,\n        existingId: existingByCookie?.id,\n        existingDate: existingByCookie?.predicted_date,\n      });\n\n      if (existingByCookie) {\n        // Cookie exists - check if this is an idempotent resubmission (AC: Scenario 2 - Double-click)\n        console.log('POST /api/predict - Found existing prediction by cookie', {\n          cookieIdPrefix: cookieId.substring(0, 8),\n          existingDate: existingByCookie.predicted_date,\n          newDate: predicted_date,\n          dateChanged: existingByCookie.predicted_date !== predicted_date,\n        });\n\n        // If date is the SAME, return success immediately (idempotent - handles double-click)\n        // This prevents duplicate submissions when user rapidly clicks submit button\n        if (existingByCookie.predicted_date === predicted_date) {\n          console.log(\n            'POST /api/predict - Idempotent resubmission (same date) - returning success'\n          );\n          const stats = await calculateStatistics(c.env.DB);\n          const userDate = new Date(predicted_date);\n          const medianDate = new Date(stats.median);\n          const delta_days = Math.round(\n            (userDate.getTime() - medianDate.getTime()) / (24 * 60 * 60 * 1000)\n          );\n          let comparison: 'optimistic' | 'pessimistic' | 'aligned';\n          if (delta_days === 0) comparison = 'aligned';\n          else if (delta_days > 0) comparison = 'pessimistic';\n          else comparison = 'optimistic';\n\n          return c.json(\n            {\n              success: true,\n              data: {\n                prediction_id: existingByCookie.id,\n                predicted_date,\n                submitted_at: new Date().toISOString(),\n                stats: {\n                  median: stats.median,\n                  min: stats.min,\n                  max: stats.max,\n                  count: stats.count,\n                },\n                delta_days,\n                comparison,\n              },\n              message: 'Your prediction has been recorded!',\n            },\n            201\n          );\n        }\n\n        // Different date - this is an intentional update attempt\n        // Return 409 to let frontend handle update flow (maintains existing UI behavior)\n        console.log(\n          'POST /api/predict - Different date detected - returning 409 for frontend to handle'\n        );\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: \"You've already submitted a prediction. Use update instead.\",\n          },\n        };\n        return c.json(errorResponse, 409);\n      }\n\n      // Step 8a: Check if capacity is critical - queue instead of direct insert (Story 3.7 - AC5-AC7)\n      if (capacityLevel === 'critical') {\n        // AC6: Queue submissions at 95% capacity\n        const queuedSubmission: QueuedSubmission = {\n          predicted_date,\n          cookie_id: cookieId,\n          ip_hash: ipHash,\n          user_agent: userAgent,\n          queued_at: new Date().toISOString(),\n        };\n\n        const { position } = await queueSubmission(kv, queuedSubmission);\n\n        console.log(\n          JSON.stringify({\n            timestamp: new Date().toISOString(),\n            level: 'INFO',\n            message: 'Submission queued - critical capacity',\n            context: { capacityLevel, position, cookieIdPrefix: cookieId.substring(0, 8) },\n          })\n        );\n\n        // Return success with queue position (AC7)\n        return c.json(\n          {\n            success: true,\n            data: {\n              queued: true,\n              position,\n              message:\n                \"We're experiencing high traffic. Your submission will be processed shortly.\",\n              resetAt: degradationState.resetAt,\n            },\n          },\n          202 // Accepted\n        );\n      }\n\n      // Step 8b: Database transaction - INSERT prediction with retry (Story 3.6 - AC: Scenario 3)\n      console.log('POST /api/predict - Proceeding to INSERT', {\n        cookieIdPrefix: cookieId.substring(0, 8),\n        ipHashPrefix: ipHash.substring(0, 8),\n        isNewCookie,\n        predicted_date,\n      });\n\n      const now = new Date().toISOString();\n\n      try {\n        // Wrap INSERT in retry logic for deadlock/BUSY handling\n        const insertResult = await retryWithBackoff(async () => {\n          const result = await c.env.DB.prepare(\n            `INSERT INTO predictions (predicted_date, submitted_at, updated_at, ip_hash, cookie_id, user_agent, weight)\n             VALUES (?, ?, ?, ?, ?, ?, ?)`\n          )\n            .bind(predicted_date, now, now, ipHash, cookieId, userAgent, weight)\n            .run();\n\n          if (!result.success) {\n            throw new Error('Database insert failed');\n          }\n\n          return result;\n        });\n\n        // Get the inserted prediction_id\n        const predictionId = insertResult.meta.last_row_id;\n\n        // Invalidate both stats and predictions caches after successful submission (Story 2.10, 3.4b)\n        await invalidateAllCaches(c.env.gta6_stats_cache);\n\n        // Calculate fresh stats for comparison (Story 3.2)\n        const stats = await calculateStatistics(c.env.DB);\n\n        // Calculate delta_days for social comparison\n        const userDate = new Date(predicted_date);\n        const medianDate = new Date(stats.median);\n        const delta_days = Math.round(\n          (userDate.getTime() - medianDate.getTime()) / (24 * 60 * 60 * 1000)\n        );\n\n        // Determine comparison direction\n        let comparison: 'optimistic' | 'pessimistic' | 'aligned';\n        if (delta_days === 0) comparison = 'aligned';\n        else if (delta_days > 0) comparison = 'pessimistic';\n        else comparison = 'optimistic';\n\n        // Set cookie in response if new\n        if (isNewCookie) {\n          const cookieOptions = getDefaultCookieOptions();\n          c.header('Set-Cookie', setCookie(COOKIE_NAME, cookieId, cookieOptions));\n        }\n\n        // Log successful submission\n        console.log('Prediction submitted', {\n          prediction_id: predictionId,\n          predicted_date,\n          weight,\n          delta_days,\n          comparison,\n          ipHashPrefix: ipHash.substring(0, 8),\n          duration_ms: Date.now() - startTime,\n        });\n\n        // Return 201 Created response with stats for comparison (Story 3.2)\n        return c.json(\n          {\n            success: true,\n            data: {\n              prediction_id: predictionId,\n              predicted_date,\n              submitted_at: now,\n              stats: {\n                median: stats.median,\n                min: stats.min,\n                max: stats.max,\n                count: stats.count,\n              },\n              delta_days,\n              comparison,\n            },\n            message: 'Your prediction has been recorded!',\n          },\n          201\n        );\n      } catch (dbError) {\n        // Handle specific database errors\n        const errorMessage = dbError instanceof Error ? dbError.message : 'Unknown error';\n\n        // Check for UNIQUE constraint violation on ip_hash (Story 3.6 - AC: Scenario 1, Story 4.7 - AC: Scenario 2 & 3)\n        if (errorMessage.includes('UNIQUE constraint failed') && errorMessage.includes('ip_hash')) {\n          // Enhanced logging for constraint violations (Story 3.6 - AC: Transaction logging, Story 4.7 - AC: Conflict logging)\n          console.warn('IP conflict detected - same IP, different cookie', {\n            constraint: 'ip_hash',\n            ipHashPrefix: ipHash.substring(0, 8),\n            cookieIdPrefix: cookieId.substring(0, 8),\n            predicted_date,\n            timestamp: new Date().toISOString(),\n            scenario: 'Same IP, different cookies - likely cookie loss or multiple users',\n            conflictType: 'ip_already_used',\n          });\n\n          const errorResponse: ErrorResponse = {\n            success: false,\n            error: {\n              code: 'IP_ALREADY_USED',\n              message:\n                'This IP address has already submitted a prediction. If you previously submitted and lost your cookie, you can restore it from your browser settings. Updates work across IP changes (WiFi, VPN, mobile networks).',\n              details: {\n                help: 'Your cookie allows updates from any IP. Check your browser cookies for \"gta6_prediction_id\".',\n                aboutPage: '/about#how-it-works',\n              },\n            },\n          };\n          return c.json(errorResponse, 409);\n        }\n\n        // Check for UNIQUE constraint violation on cookie_id\n        if (\n          errorMessage.includes('UNIQUE constraint failed') &&\n          errorMessage.includes('cookie_id')\n        ) {\n          // Enhanced logging for cookie constraint violations (Story 3.6 - AC: Transaction logging)\n          console.warn('UNIQUE constraint violation: cookie_id', {\n            constraint: 'cookie_id',\n            cookieIdPrefix: cookieId.substring(0, 8),\n            ipHashPrefix: ipHash.substring(0, 8),\n            predicted_date,\n            timestamp: new Date().toISOString(),\n            scenario: 'Cookie collision (rare - 1 in 1 trillion chance)',\n          });\n\n          // Cookie collision - regenerate and retry once\n          if (!isNewCookie) {\n            // Only retry if we haven't already generated a new cookie\n            cookieId = generateCookieID();\n            isNewCookie = true;\n\n            // Retry insert with new cookie_id\n            const retryResult = await c.env.DB.prepare(\n              `INSERT INTO predictions (predicted_date, submitted_at, updated_at, ip_hash, cookie_id, user_agent, weight)\n               VALUES (?, ?, ?, ?, ?, ?, ?)`\n            )\n              .bind(predicted_date, now, now, ipHash, cookieId, userAgent, weight)\n              .run();\n\n            if (retryResult.success) {\n              const predictionId = retryResult.meta.last_row_id;\n\n              // Invalidate both stats and predictions caches after successful submission (Story 2.10, 3.4b)\n              await invalidateAllCaches(c.env.gta6_stats_cache);\n\n              // Calculate fresh stats for comparison (Story 3.2)\n              const stats = await calculateStatistics(c.env.DB);\n\n              // Calculate delta_days for social comparison\n              const userDate = new Date(predicted_date);\n              const medianDate = new Date(stats.median);\n              const delta_days = Math.round(\n                (userDate.getTime() - medianDate.getTime()) / (24 * 60 * 60 * 1000)\n              );\n\n              // Determine comparison direction\n              let comparison: 'optimistic' | 'pessimistic' | 'aligned';\n              if (delta_days === 0) comparison = 'aligned';\n              else if (delta_days > 0) comparison = 'pessimistic';\n              else comparison = 'optimistic';\n\n              // Set new cookie in response\n              const cookieOptions = getDefaultCookieOptions();\n              c.header('Set-Cookie', setCookie(COOKIE_NAME, cookieId, cookieOptions));\n\n              console.log('Prediction submitted (cookie regenerated)', {\n                prediction_id: predictionId,\n                predicted_date,\n                weight,\n                delta_days,\n                comparison,\n              });\n\n              return c.json(\n                {\n                  success: true,\n                  data: {\n                    prediction_id: predictionId,\n                    predicted_date,\n                    submitted_at: now,\n                    stats: {\n                      median: stats.median,\n                      min: stats.min,\n                      max: stats.max,\n                      count: stats.count,\n                    },\n                    delta_days,\n                    comparison,\n                  },\n                  message: 'Your prediction has been recorded!',\n                },\n                201\n              );\n            }\n          }\n\n          // If retry also failed or we already had a new cookie, return error\n          const errorResponse: ErrorResponse = {\n            success: false,\n            error: {\n              code: 'SERVER_ERROR',\n              message: 'Unable to process request. Please try again.',\n            },\n          };\n          return c.json(errorResponse, 500);\n        }\n\n        // Check for deadlock/BUSY errors after all retries exhausted (Story 3.6 - AC: Scenario 3)\n        const isDeadlock =\n          errorMessage.toLowerCase().includes('busy') ||\n          errorMessage.toLowerCase().includes('deadlock') ||\n          errorMessage.toLowerCase().includes('locked');\n\n        if (isDeadlock) {\n          console.error('Database deadlock - all retries exhausted', {\n            error: errorMessage,\n            ipHashPrefix: ipHash?.substring(0, 8),\n            timestamp: new Date().toISOString(),\n          });\n          const errorResponse: ErrorResponse = {\n            success: false,\n            error: {\n              code: 'SERVER_ERROR',\n              message: 'Service temporarily unavailable due to high load. Please try again.',\n            },\n          };\n          return c.json(errorResponse, 503);\n        }\n\n        // Generic database error\n        console.error('Database error during prediction insert', {\n          error: errorMessage,\n          ipHashPrefix: ipHash?.substring(0, 8),\n        });\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'An error occurred while saving your prediction. Please try again.',\n          },\n        };\n        return c.json(errorResponse, 500);\n      }\n    } catch (error) {\n      // Top-level error handler\n      console.error('Unexpected error in POST /api/predict', {\n        error: error instanceof Error ? error.message : 'Unknown error',\n        ipHashPrefix: ipHash?.substring(0, 8),\n      });\n      const errorResponse: ErrorResponse = {\n        success: false,\n        error: {\n          code: 'SERVER_ERROR',\n          message: 'An unexpected error occurred. Please try again.',\n        },\n      };\n      return c.json(errorResponse, 500);\n    }\n  });\n\n  /**\n   * PUT /api/predict - Update an existing prediction\n   *\n   * Updates a prediction using cookie_id lookup.\n   * Per Story 2.8 and AC8, implements IP conflict resolution where\n   * cookie_id takes precedence over IP (FR67).\n   *\n   * Request body:\n   * {\n   *   \"predicted_date\": \"2027-02-14\",\n   *   \"turnstile_token\": \"0x1aBcDeFg...\"\n   * }\n   *\n   * Success (200 OK):\n   * {\n   *   \"success\": true,\n   *   \"predicted_date\": \"2027-02-14\",\n   *   \"previous_date\": \"2026-11-19\",\n   *   \"message\": \"Your prediction has been updated!\"\n   * }\n   *\n   * Error responses:\n   * - 400: Validation error\n   * - 404: No prediction found for cookie_id\n   * - 429: Rate limit exceeded (handled by middleware, 30/min)\n   * - 503: Bot detected (Turnstile failed)\n   * - 500: Server/database error\n   */\n  app.put('/api/predict', async (c) => {\n    const startTime = Date.now();\n    let cookieId: string | null = null;\n    let ipHash: string | null = null;\n\n    try {\n      // Step 1: Parse and validate request body\n      const body = await c.req.json();\n      const validationResult = PredictionRequestSchema.safeParse(body);\n\n      if (!validationResult.success) {\n        const firstError = validationResult.error.errors[0];\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: firstError.message,\n            field: firstError.path.join('.'),\n          },\n        };\n        return c.json(errorResponse, 400);\n      }\n\n      const { predicted_date, turnstile_token } = validationResult.data;\n\n      // Step 2: Extract and validate cookie_id (REQUIRED for updates)\n      const cookieHeader = c.req.header('Cookie') || '';\n      cookieId = getCookie(cookieHeader, COOKIE_NAME) || null;\n\n      // For updates, cookie_id must be present and valid\n      if (!cookieId || !validateCookieID(cookieId)) {\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'No prediction found. Please submit first.',\n          },\n        };\n        return c.json(errorResponse, 404);\n      }\n\n      // Step 3: Extract and hash IP address (for IP update if changed)\n      try {\n        ipHash = await hashRequestIP(c.req.raw, c.env.SALT_V1 || c.env.IP_HASH_SALT || '');\n      } catch (error) {\n        console.error('IP hash error:', error);\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to process request. Please try again.',\n          },\n        };\n        return c.json(errorResponse, 500);\n      }\n\n      // Step 4: Verify Turnstile token (bot protection)\n      const { passed, result: turnstileResult } = await verifyAndEvaluateTurnstile(\n        turnstile_token,\n        c.env.TURNSTILE_SECRET_KEY || ''\n      );\n\n      if (!passed) {\n        console.warn('Turnstile verification failed on update', {\n          errorCodes: turnstileResult['error-codes'],\n          ipHashPrefix: ipHash.substring(0, 8),\n        });\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'BOT_DETECTED',\n            message: 'Verification failed. Please complete the challenge and try again.',\n          },\n        };\n        return c.json(errorResponse, 503);\n      }\n\n      // Step 5: Query existing prediction by cookie_id\n      const existingPrediction = await c.env.DB.prepare(\n        'SELECT id, predicted_date, ip_hash FROM predictions WHERE cookie_id = ?'\n      )\n        .bind(cookieId)\n        .first();\n\n      // Step 6: Return 404 if not found\n      if (!existingPrediction) {\n        console.warn('Update attempted for non-existent cookie_id', {\n          cookieIdPrefix: cookieId.substring(0, 8),\n        });\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'No prediction found. Please submit first.',\n          },\n        };\n        return c.json(errorResponse, 404);\n      }\n\n      const previousDate = existingPrediction.predicted_date as string;\n      const storedIpHash = existingPrediction.ip_hash as string;\n\n      // Step 7: Check if date is the same (idempotent - skip update)\n      if (previousDate === predicted_date) {\n        console.log('Idempotent update - date unchanged', {\n          cookieIdPrefix: cookieId.substring(0, 8),\n          predicted_date,\n        });\n        return c.json(\n          {\n            success: true,\n            predicted_date,\n            previous_date: previousDate,\n            message: 'Your prediction remains unchanged.',\n          },\n          200\n        );\n      }\n\n      // Step 8: Calculate new weight\n      const weight = calculateWeight(predicted_date);\n\n      // Step 9: Detect IP change for IP conflict resolution (FR67, Story 4.7 - AC: Scenario 1)\n      // Cookie_id takes precedence - update ip_hash to new IP\n      const ipChanged = storedIpHash !== ipHash;\n      if (ipChanged) {\n        console.log('IP change detected - cookie allows update from any IP', {\n          cookieIdPrefix: cookieId.substring(0, 8),\n          oldIpHashPrefix: storedIpHash.substring(0, 8),\n          newIpHashPrefix: ipHash.substring(0, 8),\n          timestamp: new Date().toISOString(),\n          scenario: 'User changed networks (WiFi/mobile/VPN)',\n          conflictType: 'ip_change_allowed',\n          resolution: 'Update ip_hash to new IP, keep cookie_id (FR67)',\n        });\n      }\n\n      // Step 10: Perform UPDATE with prepared statement\n      const now = new Date().toISOString();\n\n      try {\n        // Update prediction with new date, weight, updated_at, and optionally ip_hash\n        const updateResult = await c.env.DB.prepare(\n          `UPDATE predictions\n           SET predicted_date = ?,\n               weight = ?,\n               updated_at = ?,\n               ip_hash = ?\n           WHERE cookie_id = ?`\n        )\n          .bind(predicted_date, weight, now, ipHash, cookieId)\n          .run();\n\n        if (!updateResult.success || updateResult.meta.changes === 0) {\n          // No rows updated - should not happen since we checked existence\n          console.error('Database update failed - no rows affected', {\n            cookieIdPrefix: cookieId.substring(0, 8),\n          });\n          const errorResponse: ErrorResponse = {\n            success: false,\n            error: {\n              code: 'SERVER_ERROR',\n              message: 'An error occurred while updating your prediction. Please try again.',\n            },\n          };\n          return c.json(errorResponse, 500);\n        }\n\n        // Invalidate both stats and predictions caches after successful update (Story 2.10, 3.4b)\n        await invalidateAllCaches(c.env.gta6_stats_cache);\n\n        // Calculate fresh stats for comparison (Story 3.2)\n        const stats = await calculateStatistics(c.env.DB);\n\n        // Calculate delta_days for social comparison\n        const userDate = new Date(predicted_date);\n        const medianDate = new Date(stats.median);\n        const delta_days = Math.round(\n          (userDate.getTime() - medianDate.getTime()) / (24 * 60 * 60 * 1000)\n        );\n\n        // Determine comparison direction\n        let comparison: 'optimistic' | 'pessimistic' | 'aligned';\n        if (delta_days === 0) comparison = 'aligned';\n        else if (delta_days > 0) comparison = 'pessimistic';\n        else comparison = 'optimistic';\n\n        // Step 11: Log successful update\n        console.log('Prediction updated', {\n          cookie_id_prefix: cookieId.substring(0, 8),\n          predicted_date,\n          previous_date: previousDate,\n          weight,\n          delta_days,\n          comparison,\n          ip_changed: ipChanged,\n          duration_ms: Date.now() - startTime,\n        });\n\n        // Step 12: Return 200 OK with stats for comparison (Story 3.2)\n        return c.json(\n          {\n            success: true,\n            data: {\n              prediction_id: existingPrediction.id,\n              predicted_date,\n              previous_date: previousDate,\n              updated_at: now,\n              stats: {\n                median: stats.median,\n                min: stats.min,\n                max: stats.max,\n                count: stats.count,\n              },\n              delta_days,\n              comparison,\n            },\n            message: 'Your prediction has been updated!',\n          },\n          200\n        );\n      } catch (dbError) {\n        const errorMessage = dbError instanceof Error ? dbError.message : 'Unknown error';\n\n        // Handle potential UNIQUE constraint violation on ip_hash\n        // This can happen if user tries to update to an IP that another user already has\n        // Per FR67, cookie_id takes precedence, so this is a conflict scenario\n        if (errorMessage.includes('UNIQUE constraint failed') && errorMessage.includes('ip_hash')) {\n          console.warn('IP conflict during update - another user already has this IP', {\n            cookieIdPrefix: cookieId.substring(0, 8),\n            ipHashPrefix: ipHash.substring(0, 8),\n          });\n          // Still allow the update but keep the old IP hash\n          // Re-run update without changing ip_hash\n          const retryResult = await c.env.DB.prepare(\n            `UPDATE predictions\n             SET predicted_date = ?,\n                 weight = ?,\n                 updated_at = ?\n             WHERE cookie_id = ?`\n          )\n            .bind(predicted_date, weight, now, cookieId)\n            .run();\n\n          if (retryResult.success && retryResult.meta.changes > 0) {\n            // Invalidate both stats and predictions caches after successful update (Story 2.10, 3.4b)\n            await invalidateAllCaches(c.env.gta6_stats_cache);\n\n            // Calculate fresh stats for comparison (Story 3.2)\n            const stats = await calculateStatistics(c.env.DB);\n\n            // Calculate delta_days for social comparison\n            const userDate = new Date(predicted_date);\n            const medianDate = new Date(stats.median);\n            const delta_days = Math.round(\n              (userDate.getTime() - medianDate.getTime()) / (24 * 60 * 60 * 1000)\n            );\n\n            // Determine comparison direction\n            let comparison: 'optimistic' | 'pessimistic' | 'aligned';\n            if (delta_days === 0) comparison = 'aligned';\n            else if (delta_days > 0) comparison = 'pessimistic';\n            else comparison = 'optimistic';\n\n            console.log('Prediction updated (IP conflict resolved - kept original IP)', {\n              cookie_id_prefix: cookieId.substring(0, 8),\n              predicted_date,\n              previous_date: previousDate,\n              delta_days,\n              comparison,\n            });\n\n            return c.json(\n              {\n                success: true,\n                data: {\n                  prediction_id: existingPrediction.id,\n                  predicted_date,\n                  previous_date: previousDate,\n                  updated_at: now,\n                  stats: {\n                    median: stats.median,\n                    min: stats.min,\n                    max: stats.max,\n                    count: stats.count,\n                  },\n                  delta_days,\n                  comparison,\n                },\n                message: 'Your prediction has been updated!',\n              },\n              200\n            );\n          }\n        }\n\n        // Generic database error\n        console.error('Database error during prediction update', {\n          error: errorMessage,\n          cookieIdPrefix: cookieId?.substring(0, 8),\n        });\n        const errorResponse: ErrorResponse = {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'An error occurred while updating your prediction. Please try again.',\n          },\n        };\n        return c.json(errorResponse, 500);\n      }\n    } catch (error) {\n      // Top-level error handler\n      console.error('Unexpected error in PUT /api/predict', {\n        error: error instanceof Error ? error.message : 'Unknown error',\n        cookieIdPrefix: cookieId?.substring(0, 8),\n      });\n      const errorResponse: ErrorResponse = {\n        success: false,\n        error: {\n          code: 'SERVER_ERROR',\n          message: 'An unexpected error occurred. Please try again.',\n        },\n      };\n      return c.json(errorResponse, 500);\n    }\n  });\n\n  return app;\n}\n\nexport default createPredictRoutes;\n", "/**\n * Centralized Validation Module\n *\n * Provides Zod schemas and validation functions for all user inputs.\n * Implements server-side validation with TypeScript-first approach.\n *\n * Requirements: Implements FR78 (input validation), NFR-S4, NFR-S5 (XSS/SQL injection prevention).\n * Story 2.4: Input Validation and XSS Prevention\n *\n * Security: All inputs validated server-side. Never trust client.\n */\n\nimport { z } from 'zod';\n\n/**\n * Minimum allowed date for predictions (November 19, 2026 - Official GTA 6 launch date)\n */\nexport const MIN_DATE = '2026-11-19';\n\n/**\n * Maximum allowed date for predictions (December 31, 2100)\n * Maximum year 2100 for democratic predictions - all voices heard\n */\nexport const MAX_DATE = '2100-12-31';\n\n/**\n * ISO 8601 date format regex (YYYY-MM-DD)\n * Validates year range 2025-2100, months 01-12, days 01-31\n */\nexport const DATE_REGEX = /^(202[5-9]|20[3-9]\\d|2100)-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\n\n/**\n * UUID v4 format regex\n * Format: 8-4-4-4-12 hex digits with '4' in version position and '[89ab]' in variant position\n */\nexport const UUID_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n\n/**\n * Maximum user agent string length\n */\nexport const MAX_USER_AGENT_LENGTH = 256;\n\n/**\n * Zod schema for ISO 8601 date validation with range constraints\n *\n * Validation rules:\n * - Format: YYYY-MM-DD (ISO 8601)\n * - Range: 2026-11-19 to 2125-12-31\n * - Valid calendar date (no Feb 30, no month 13, etc.)\n *\n * @example\n * DateSchema.parse('2026-11-19') // OK\n * DateSchema.parse('2024-12-31') // Error: Date before minimum\n * DateSchema.parse('11/19/2026') // Error: Invalid format\n */\nexport const DateSchema = z\n  .string()\n  .regex(DATE_REGEX, 'Invalid date format. Expected YYYY-MM-DD between 2026-11-19 and 2100-12-31')\n  .refine(\n    (date) => {\n      const parsed = new Date(date);\n      return !isNaN(parsed.getTime());\n    },\n    { message: 'Invalid calendar date' }\n  )\n  .refine(\n    (date) => {\n      const parsed = new Date(date);\n      const min = new Date(MIN_DATE);\n      return parsed >= min;\n    },\n    {\n      message: `Date must be on or after ${MIN_DATE} (official GTA 6 launch date). Predictions before the official launch date are not allowed.`,\n    }\n  )\n  .refine(\n    (date) => {\n      const parsed = new Date(date);\n      const max = new Date(MAX_DATE);\n      return parsed <= max;\n    },\n    { message: `Date must be on or before ${MAX_DATE}` }\n  )\n  .refine(\n    (date) => {\n      // Verify calendar validity (prevents Feb 30, etc.)\n      const parsed = new Date(date);\n      const reconstructed = parsed.toISOString().split('T')[0];\n      return reconstructed === date;\n    },\n    { message: 'Invalid calendar date (e.g., Feb 30, Apr 31)' }\n  );\n\n/**\n * Zod schema for UUID v4 validation\n *\n * Validation rules:\n * - Format: 8-4-4-4-12 hexadecimal\n * - Version field (13th char) must be '4'\n * - Variant field (17th char) must be [89ab]\n * - Max length: 36 characters\n *\n * @example\n * UUIDSchema.parse('550e8400-e29b-41d4-a716-446655440000') // OK\n * UUIDSchema.parse('invalid-uuid') // Error\n */\nexport const UUIDSchema = z\n  .string()\n  .max(36, 'UUID must be at most 36 characters')\n  .regex(UUID_REGEX, 'Invalid UUID v4 format');\n\n/**\n * Zod schema for user agent validation\n *\n * Validation rules:\n * - Max length: 256 characters\n * - Sanitized to remove dangerous patterns\n *\n * Note: User agent is optional in database, but if provided, must be valid\n *\n * @example\n * UserAgentSchema.parse('Mozilla/5.0 ...') // OK\n * UserAgentSchema.parse('x'.repeat(300)) // Error: Too long\n */\nexport const UserAgentSchema = z\n  .string()\n  .max(MAX_USER_AGENT_LENGTH, `User agent must be at most ${MAX_USER_AGENT_LENGTH} characters`);\n\n/**\n * Zod schema for prediction submission request\n *\n * Used by POST /api/predict and PUT /api/predict endpoints\n * Updated to use Cloudflare Turnstile (Story 2.5B)\n *\n * @example\n * PredictionRequestSchema.parse({\n *   predicted_date: '2026-11-19',\n *   turnstile_token: '0x1aBcDeFg...'\n * }) // OK\n */\nexport const PredictionRequestSchema = z.object({\n  predicted_date: DateSchema,\n  turnstile_token: z.string().min(1, 'Turnstile token is required'),\n});\n\n/**\n * Type inference for PredictionRequest\n */\nexport type PredictionRequest = z.infer<typeof PredictionRequestSchema>;\n\n/**\n * Sanitize user agent string to prevent XSS attacks\n *\n * Applies HTML encoding to special characters:\n * - & \u2192 &amp;\n * - < \u2192 &lt;\n * - > \u2192 &gt;\n * - \" \u2192 &quot;\n * - ' \u2192 &#x27;\n *\n * @param {string} userAgent - Raw user agent string\n * @returns {string} Sanitized user agent string\n *\n * @example\n * sanitizeUserAgent('Mozilla/5.0 <script>alert(1)</script>')\n * // Returns: 'Mozilla/5.0 &lt;script&gt;alert(1)&lt;/script&gt;'\n */\nexport function sanitizeUserAgent(userAgent: string): string {\n  if (!userAgent || typeof userAgent !== 'string') {\n    return '';\n  }\n\n  return userAgent\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n\n/**\n * Detect SQL injection patterns in user input\n *\n * Checks for common SQL injection patterns:\n * - UNION SELECT\n * - DROP TABLE/DATABASE\n * - DELETE FROM\n * - INSERT INTO\n * - UPDATE SET\n * - SQL comments (-- and block comments)\n * - OR 1=1 patterns\n * - EXEC/EXECUTE\n *\n * @param {string} input - User input to check\n * @returns {boolean} True if SQL injection detected, false otherwise\n *\n * @example\n * detectSQLInjection('Mozilla/5.0') // false\n * detectSQLInjection(\"'; DROP TABLE users; --\") // true\n * detectSQLInjection('1 OR 1=1') // true\n */\nexport function detectSQLInjection(input: string): boolean {\n  if (!input || typeof input !== 'string') {\n    return false;\n  }\n\n  const sqlPatterns = [\n    /(\\bUNION\\b.*\\bSELECT\\b)/i,\n    /(\\bDROP\\b.*\\b(TABLE|DATABASE)\\b)/i,\n    /(\\bDELETE\\b.*\\bFROM\\b)/i,\n    /(\\bINSERT\\b.*\\bINTO\\b)/i,\n    /(\\bUPDATE\\b.*\\bSET\\b)/i,\n    /(--|\\/\\*|\\*\\/)/,\n    /(\\bOR\\b.*=.*)/i,\n    /(\\bEXEC(UTE)?\\b)/i,\n  ];\n\n  return sqlPatterns.some((pattern) => pattern.test(input));\n}\n\n/**\n * Detect XSS (Cross-Site Scripting) patterns in user input\n *\n * Checks for common XSS attack vectors:\n * - <script> tags\n * - <img> tags with onerror\n * - <iframe> tags\n * - <object> and <embed> tags\n * - Event handlers (onclick, onerror, onload, etc.)\n * - javascript: protocol\n * - data: protocol with base64\n *\n * @param {string} input - User input to check\n * @returns {boolean} True if XSS pattern detected, false otherwise\n *\n * @example\n * detectXSS('Mozilla/5.0') // false\n * detectXSS('<script>alert(1)</script>') // true\n * detectXSS('<img src=x onerror=alert(1)>') // true\n * detectXSS('javascript:alert(1)') // true\n */\nexport function detectXSS(input: string): boolean {\n  if (!input || typeof input !== 'string') {\n    return false;\n  }\n\n  const xssPatterns = [\n    /<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi,\n    /<img[^>]+onerror\\s*=/gi,\n    /<iframe/gi,\n    /<object/gi,\n    /<embed/gi,\n    /on(click|error|load|mouse\\w+|key\\w+)\\s*=/gi,\n    /javascript:/gi,\n    /data:.*base64/gi,\n  ];\n\n  return xssPatterns.some((pattern) => pattern.test(input));\n}\n\n/**\n * Validate user agent string for security threats\n *\n * Combines length validation, SQL injection detection, and XSS detection\n *\n * @param {string} userAgent - User agent string to validate\n * @returns {{ valid: boolean; error?: string; sanitized?: string }} Validation result\n *\n * @example\n * validateUserAgent('Mozilla/5.0')\n * // { valid: true, sanitized: 'Mozilla/5.0' }\n *\n * validateUserAgent('<script>alert(1)</script>')\n * // { valid: false, error: 'User agent contains potentially dangerous XSS patterns' }\n *\n * validateUserAgent(\"'; DROP TABLE users; --\")\n * // { valid: false, error: 'User agent contains potentially dangerous SQL injection patterns' }\n */\nexport function validateUserAgent(userAgent: string): {\n  valid: boolean;\n  error?: string;\n  sanitized?: string;\n} {\n  // Length validation\n  if (userAgent.length > MAX_USER_AGENT_LENGTH) {\n    return {\n      valid: false,\n      error: `User agent must be at most ${MAX_USER_AGENT_LENGTH} characters`,\n    };\n  }\n\n  // SQL injection detection\n  if (detectSQLInjection(userAgent)) {\n    return {\n      valid: false,\n      error: 'User agent contains potentially dangerous SQL injection patterns',\n    };\n  }\n\n  // XSS detection\n  if (detectXSS(userAgent)) {\n    return {\n      valid: false,\n      error: 'User agent contains potentially dangerous XSS patterns',\n    };\n  }\n\n  // Sanitize for storage\n  const sanitized = sanitizeUserAgent(userAgent);\n\n  return { valid: true, sanitized };\n}\n", "import * as z from \"./v3/external.js\";\nexport * from \"./v3/external.js\";\nexport { z };\nexport default z;\n", "export * from \"./errors.js\";\nexport * from \"./helpers/parseUtil.js\";\nexport * from \"./helpers/typeAliases.js\";\nexport * from \"./helpers/util.js\";\nexport * from \"./types.js\";\nexport * from \"./ZodError.js\";\n", "import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n", "import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n", "import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n", "export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n", "import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n", "import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n", "export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n", "/**\n * Cookie Utility Module\n *\n * Provides functions for secure cookie ID generation and validation\n * using UUID v4 format with Web Crypto API.\n *\n * Security: Implements cryptographically secure random IDs to prevent\n * enumeration attacks (FR80). Cookie flags configured per ADR-010.\n */\n\n// UUID v4 validation regex per tech spec\n// Format: 8-4-4-4-12 hex digits with '4' in version position and '[89ab]' in variant position\nconst UUID_V4_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n\n/**\n * Cookie ID type alias (UUID v4 format)\n * Exported for use in API endpoints and type definitions\n */\nexport type CookieID = string;\n\n/**\n * Cookie options configuration for secure cookie attributes\n * Per AC1: httpOnly: false (JavaScript needs access), secure: true, sameSite: 'Strict'\n */\nexport interface CookieOptions {\n  httpOnly?: boolean;\n  secure?: boolean;\n  sameSite?: 'Strict' | 'Lax' | 'None';\n  maxAge?: number; // in seconds\n  path?: string;\n}\n\n/**\n * Generate a cryptographically secure cookie ID using UUID v4\n *\n * Uses Web Crypto API's crypto.randomUUID() which provides:\n * - Cryptographically secure randomness (CSPRNG)\n * - Standard UUID v4 format\n * - Built-in browser/Workers API (no dependencies)\n *\n * @returns {CookieID} UUID v4 string (e.g., \"550e8400-e29b-41d4-a716-446655440000\")\n *\n * @example\n * const cookieId = generateCookieID();\n * // Returns: \"a3bb189e-8bf9-3888-9912-ace4e6543002\"\n */\nexport function generateCookieID(): CookieID {\n  return crypto.randomUUID();\n}\n\n/**\n * Validate if a given string is a valid UUID v4 format\n *\n * Validation criteria per tech spec:\n * - 8-4-4-4-12 hexadecimal format\n * - Version field (13th char) must be '4'\n * - Variant field (17th char) must be [89ab]\n *\n * @param {string} cookieId - The cookie ID to validate\n * @returns {boolean} True if valid UUID v4, false otherwise\n *\n * @example\n * validateCookieID(\"550e8400-e29b-41d4-a716-446655440000\"); // true\n * validateCookieID(\"invalid-uuid\"); // false\n * validateCookieID(\"\"); // false\n */\nexport function validateCookieID(cookieId: string): boolean {\n  if (!cookieId || typeof cookieId !== 'string') {\n    return false;\n  }\n  return UUID_V4_REGEX.test(cookieId);\n}\n\n/**\n * Set a cookie with secure flags\n *\n * This is a server-side utility for setting cookies in HTTP responses.\n * For frontend cookie management, use js-cookie library in public/app.js.\n *\n * Security flags per ADR-010 and AC1:\n * - httpOnly: false (JavaScript needs access for form submissions)\n * - secure: true (HTTPS only, prevents MITM attacks)\n * - sameSite: 'Strict' (prevents CSRF attacks)\n * - maxAge: 63072000 (2 years per FR65)\n * - path: '/' (site-wide access)\n *\n * @param {string} name - Cookie name (e.g., \"gta6_user_id\")\n * @param {string} value - Cookie value (UUID v4)\n * @param {CookieOptions} options - Cookie configuration options\n * @returns {string} Set-Cookie header value\n *\n * @example\n * const cookieHeader = setCookie(\"gta6_user_id\", generateCookieID(), {\n *   httpOnly: false,\n *   secure: true,\n *   sameSite: 'Strict',\n *   maxAge: 63072000,\n *   path: '/'\n * });\n * // Returns: \"gta6_user_id=550e8400-e29b-41d4-a716-446655440000; Max-Age=63072000; Path=/; Secure; SameSite=Strict\"\n */\nexport function setCookie(name: string, value: string, options: CookieOptions = {}): string {\n  const {\n    httpOnly = false,\n    secure = true,\n    sameSite = 'Strict',\n    maxAge = 63072000, // 2 years (per FR65)\n    path = '/',\n  } = options;\n\n  let cookieString = `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n\n  if (maxAge) {\n    cookieString += `; Max-Age=${maxAge}`;\n  }\n\n  if (path) {\n    cookieString += `; Path=${path}`;\n  }\n\n  if (secure) {\n    cookieString += '; Secure';\n  }\n\n  if (httpOnly) {\n    cookieString += '; HttpOnly';\n  }\n\n  if (sameSite) {\n    cookieString += `; SameSite=${sameSite}`;\n  }\n\n  return cookieString;\n}\n\n/**\n * Get cookie value from cookie string\n *\n * This is a server-side utility for parsing cookies from HTTP request headers.\n * For frontend cookie management, use js-cookie library in public/app.js.\n *\n * @param {string} cookieString - Raw Cookie header value\n * @param {string} name - Cookie name to extract\n * @returns {string | undefined} Cookie value if found, undefined otherwise\n *\n * @example\n * const cookieHeader = \"gta6_user_id=550e8400-e29b-41d4-a716-446655440000; session=xyz\";\n * const userId = getCookie(cookieHeader, \"gta6_user_id\");\n * // Returns: \"550e8400-e29b-41d4-a716-446655440000\"\n */\nexport function getCookie(cookieString: string, name: string): string | undefined {\n  if (!cookieString) {\n    return undefined;\n  }\n\n  const cookies = cookieString.split(';').map((c) => c.trim());\n\n  for (const cookie of cookies) {\n    // Handle cases like \"name=value\" or \"name  =  value\" (with extra whitespace)\n    const trimmed = cookie.trim();\n\n    // Find the equals sign\n    const equalIndex = trimmed.indexOf('=');\n    if (equalIndex === -1) {\n      continue;\n    }\n\n    // Extract cookie name and trim whitespace\n    const cookieName = trimmed.substring(0, equalIndex).trim();\n\n    // Check if this is the cookie we're looking for\n    if (cookieName === name) {\n      const value = trimmed.substring(equalIndex + 1).trim();\n      return decodeURIComponent(value);\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * Default cookie name for GTA 6 user tracking\n * Per AC1 and tech spec\n */\nexport const COOKIE_NAME = 'gta6_user_id';\n\n/**\n * Default cookie max age (2 years in seconds)\n * Per FR65 and AC1\n * Calculation: 2 years * 365 days/year * 24 hours/day * 60 min/hour * 60 sec/min\n * Using 365 days (not 365.25) to align with spec: 2 * 365 * 24 * 60 * 60 = 63072000\n */\nexport const COOKIE_MAX_AGE = 63072000; // 2 years\n\n/**\n * Get default cookie options for GTA 6 user tracking\n * Encapsulates security flags per ADR-010 and AC1\n *\n * @returns {CookieOptions} Default cookie configuration\n */\nexport function getDefaultCookieOptions(): CookieOptions {\n  return {\n    httpOnly: false, // JavaScript needs access for form submissions\n    secure: true, // HTTPS only (prevents MITM attacks)\n    sameSite: 'Strict', // Prevents CSRF attacks\n    maxAge: COOKIE_MAX_AGE, // 2 years (FR65)\n    path: '/', // Site-wide access\n  };\n}\n", "/**\n * Cloudflare Turnstile Verification Module (Story 2.5B)\n *\n * Provides bot protection through Cloudflare Turnstile challenge-based verification.\n * Implements fail-open pattern for reliability (allow submission if API unreachable).\n *\n * Related:\n * - ADR-013: Cloudflare Turnstile over Google reCAPTCHA\n * - AC2: Backend verification with Cloudflare API\n * - AC3: Challenge evaluation logic\n * - FR60: Graceful degradation (fail open)\n * - FR76: Bot protection with retry mechanism\n */\n\nimport type { TurnstileVerificationResult } from '../types';\n\n/**\n * Cloudflare Turnstile API endpoint\n * Documentation: https://developers.cloudflare.com/turnstile/get-started/server-side-validation/\n */\nconst TURNSTILE_API_URL = 'https://challenges.cloudflare.com/turnstile/v0/siteverify';\n\n/**\n * Verification timeout (3 seconds)\n * Matches reCAPTCHA timeout for consistency\n * If API doesn't respond within this time, fail open\n */\nconst VERIFICATION_TIMEOUT_MS = 3000;\n\n/**\n * Verify Turnstile token with Cloudflare API\n *\n * Implements AC2: POST to Cloudflare API with secret key and token\n * Implements AC6: Fail-open pattern for network errors (don't block legitimate users)\n *\n * @param token - Token generated by Turnstile widget on frontend\n * @param secretKey - Turnstile secret key from environment (TURNSTILE_SECRET_KEY)\n * @returns Promise<TurnstileVerificationResult> - Verification result with success boolean\n *\n * @example\n * ```typescript\n * const result = await verifyTurnstileToken(token, env.TURNSTILE_SECRET_KEY);\n * if (result.success) {\n *   // User passed challenge\n * } else {\n *   // Bot detected or verification failed\n * }\n * ```\n */\nexport async function verifyTurnstileToken(\n  token: string,\n  secretKey: string\n): Promise<TurnstileVerificationResult> {\n  // Input validation\n  if (!token || typeof token !== 'string') {\n    console.warn('Turnstile token is missing or invalid. Failing open.');\n    return {\n      success: true, // Fail open: allow submission\n      'error-codes': ['missing-input-response'],\n    };\n  }\n\n  if (!secretKey || typeof secretKey !== 'string') {\n    console.error('Turnstile secret key is missing. Failing open.');\n    return {\n      success: true, // Fail open: allow submission\n      'error-codes': ['missing-input-secret'],\n    };\n  }\n\n  try {\n    // Create AbortController for timeout\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), VERIFICATION_TIMEOUT_MS);\n\n    // POST to Cloudflare Turnstile API (AC2)\n    const response = await fetch(TURNSTILE_API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        secret: secretKey,\n        response: token,\n      }),\n      signal: controller.signal,\n    });\n\n    // Clear timeout\n    clearTimeout(timeoutId);\n\n    // Check HTTP status\n    if (!response.ok) {\n      console.error(`Turnstile API returned HTTP ${response.status}. Failing open.`);\n      return {\n        success: true, // Fail open: don't block users for API errors\n        'error-codes': [`http-${response.status}`],\n      };\n    }\n\n    // Parse JSON response (AC2: Parse response with success, challenge_ts, hostname, error-codes)\n    const data = await response.json<TurnstileVerificationResult>();\n\n    // Log verification result for monitoring (Task 9)\n    if (data.success) {\n      console.log('Turnstile verification successful', {\n        challenge_ts: data.challenge_ts,\n        hostname: data.hostname,\n      });\n    } else {\n      console.warn('Turnstile challenge failed', {\n        'error-codes': data['error-codes'] || [],\n      });\n    }\n\n    return data;\n  } catch (error) {\n    // Network errors, timeouts, or API failures (AC6: Fail open)\n    if (error instanceof Error) {\n      if (error.name === 'AbortError') {\n        console.warn('Turnstile verification timed out after 3s. Failing open.', {\n          fail_open: true,\n        });\n      } else {\n        console.error('Turnstile verification network error. Failing open.', {\n          error: error.message,\n          fail_open: true,\n        });\n      }\n    } else {\n      console.error('Turnstile verification unknown error. Failing open.', {\n        fail_open: true,\n      });\n    }\n\n    // Fail open: Allow submission (FR60 graceful degradation)\n    return {\n      success: true, // Don't block legitimate users for network issues\n      'error-codes': ['network-error'],\n    };\n  }\n}\n\n/**\n * Evaluate Turnstile challenge result\n *\n * Implements AC3: Boolean evaluation (success === true passes, success === false rejects)\n * Simpler than reCAPTCHA's score-based evaluation (no threshold tuning needed)\n *\n * @param result - Turnstile verification result from verifyTurnstileToken()\n * @returns boolean - True if challenge passed (legitimate user), false if failed (likely bot)\n *\n * @example\n * ```typescript\n * const result = await verifyTurnstileToken(token, secretKey);\n * if (isChallengeSuccessful(result)) {\n *   // Allow submission\n * } else {\n *   // Reject as bot\n * }\n * ```\n */\nexport function isChallengeSuccessful(result: TurnstileVerificationResult): boolean {\n  // AC3: Simple boolean check (no score threshold like reCAPTCHA)\n  const passed = result.success === true;\n\n  // Log evaluation for monitoring\n  if (passed) {\n    console.log('Turnstile challenge evaluation: PASSED');\n  } else {\n    console.warn('Turnstile challenge evaluation: FAILED', {\n      'error-codes': result['error-codes'] || [],\n    });\n  }\n\n  return passed;\n}\n\n/**\n * Convenience function: Verify and evaluate Turnstile in one call\n *\n * Combines verifyTurnstileToken() + isChallengeSuccessful() for simpler API endpoint usage\n * Mimics reCAPTCHA module pattern for consistency\n *\n * @param token - Turnstile token from frontend\n * @param secretKey - Secret key from environment\n * @returns Promise<{ passed: boolean; result: TurnstileVerificationResult }>\n *\n * @example\n * ```typescript\n * const { passed, result } = await verifyAndEvaluateTurnstile(token, env.TURNSTILE_SECRET_KEY);\n * if (!passed) {\n *   return c.json({ success: false, error: { code: 'BOT_DETECTED', message: 'Please try again' } }, 503);\n * }\n * ```\n */\nexport async function verifyAndEvaluateTurnstile(\n  token: string,\n  secretKey: string\n): Promise<{ passed: boolean; result: TurnstileVerificationResult }> {\n  const result = await verifyTurnstileToken(token, secretKey);\n  const passed = isChallengeSuccessful(result);\n\n  return { passed, result };\n}\n", "/**\n * Predictions Aggregation Service Module\n *\n * Provides functions for aggregating prediction data for chart visualization.\n * Returns privacy-preserving aggregated data grouped by date.\n *\n * Aggregated predictions include:\n * - Predicted date (ISO 8601: YYYY-MM-DD)\n * - Count of predictions for that date\n * - Total predictions count (for 50-prediction threshold check)\n *\n * @see Story 3.4b: Prediction Data API Endpoint\n * @see docs/sprint-artifacts/stories/3-4b-prediction-data-api-endpoint.md\n */\n\nimport dayjs from 'dayjs';\n\n/**\n * Individual prediction data point (aggregated by date)\n * Privacy-preserving: No cookie_id, ip_hash, or weight exposed\n */\nexport interface PredictionData {\n  predicted_date: string; // ISO 8601 date (YYYY-MM-DD)\n  count: number; // Number of predictions for this date\n}\n\n/**\n * Predictions API response interface\n * Matches the API contract for GET /api/predictions\n */\nexport interface PredictionsResponse {\n  data: PredictionData[]; // Array of date/count pairs\n  total_predictions: number; // Total prediction count\n  cached_at: string; // ISO 8601 timestamp when data was calculated\n}\n\n/**\n * Database row type for aggregation query\n */\ninterface AggregatedPredictionRow {\n  predicted_date: string;\n  count: number;\n}\n\n/**\n * Database row type for total count query\n */\ninterface CountRow {\n  total_count: number;\n}\n\n/**\n * Minimum prediction threshold per FR99\n * Chart requires at least 50 predictions to display\n */\nexport const MINIMUM_PREDICTION_THRESHOLD = 50;\n\n/**\n * Get aggregated prediction data from database\n *\n * Performs efficient aggregation query:\n * - Groups predictions by predicted_date\n * - Counts predictions per date\n * - Sorts by predicted_date ascending\n * - Privacy-preserving: No individual user data exposed\n *\n * @param db - D1Database instance\n * @returns PredictionsResponse with aggregated data\n *\n * @example\n * const predictions = await getAggregatedPredictions(c.env.DB);\n * // {\n * //   data: [\n * //     { predicted_date: \"2026-11-19\", count: 1247 },\n * //     { predicted_date: \"2027-02-14\", count: 823 }\n * //   ],\n * //   total_predictions: 10234,\n * //   cached_at: \"2025-11-26T14:30:00Z\"\n * // }\n */\nexport async function getAggregatedPredictions(db: D1Database): Promise<PredictionsResponse> {\n  const startTime = Date.now();\n\n  // Query 1: Get total prediction count for threshold check\n  const countResult = await db\n    .prepare('SELECT COUNT(*) as total_count FROM predictions')\n    .first<CountRow>();\n\n  const totalCount = countResult?.total_count || 0;\n\n  // Check 50-prediction minimum threshold (FR99)\n  if (totalCount < MINIMUM_PREDICTION_THRESHOLD) {\n    console.log('Prediction threshold not met', {\n      current: totalCount,\n      required: MINIMUM_PREDICTION_THRESHOLD,\n    });\n\n    return {\n      data: [], // Empty array when threshold not met\n      total_predictions: totalCount,\n      cached_at: dayjs().toISOString(),\n    };\n  }\n\n  // Query 2: Aggregate predictions by date\n  // Privacy-preserving: Only exposes date and count, no individual records\n  const aggregationResult = await db\n    .prepare(\n      `SELECT\n        predicted_date,\n        COUNT(*) as count\n      FROM predictions\n      GROUP BY predicted_date\n      ORDER BY predicted_date ASC`\n    )\n    .all<AggregatedPredictionRow>();\n\n  const calculationTime = Date.now() - startTime;\n\n  // Performance monitoring: Log slow aggregations (>100ms)\n  if (calculationTime > 100) {\n    console.warn('Predictions aggregation slow', {\n      duration_ms: calculationTime,\n      total_predictions: totalCount,\n      unique_dates: aggregationResult.results?.length || 0,\n    });\n  } else {\n    console.log('Predictions aggregated', {\n      duration_ms: calculationTime,\n      total_predictions: totalCount,\n      unique_dates: aggregationResult.results?.length || 0,\n    });\n  }\n\n  return {\n    data: aggregationResult.results || [],\n    total_predictions: totalCount,\n    cached_at: dayjs().toISOString(),\n  };\n}\n\n/**\n * Get aggregated predictions with caching support\n *\n * Checks the Cloudflare KV cache first. On cache miss, aggregates\n * predictions from database and stores in cache with TTL.\n *\n * Cache is shared with stats invalidation (both invalidated on\n * prediction submission/update).\n *\n * @param db - D1Database instance\n * @param kv - KVNamespace for predictions cache (optional, direct calculation if not provided)\n * @param cacheKey - Cache key (default: 'predictions:aggregated')\n * @param ttlSeconds - Cache TTL in seconds (default: 300 = 5 minutes)\n * @returns Object with predictions data and cache hit indicator\n *\n * @example\n * const { predictions, cacheHit } = await getAggregatedPredictionsWithCache(\n *   c.env.DB,\n *   c.env.gta6_stats_cache,\n *   'predictions:aggregated',\n *   300\n * );\n */\nexport async function getAggregatedPredictionsWithCache(\n  db: D1Database,\n  kv: KVNamespace | undefined,\n  cacheKey: string = 'predictions:aggregated',\n  ttlSeconds: number = 300\n): Promise<{ predictions: PredictionsResponse; cacheHit: boolean }> {\n  // Try cache first if KV is available\n  if (kv) {\n    try {\n      const cached = await kv.get(cacheKey);\n      if (cached) {\n        const predictions = JSON.parse(cached) as PredictionsResponse;\n        console.log('Predictions cache HIT', { cacheKey });\n        return { predictions, cacheHit: true };\n      }\n      console.log('Predictions cache MISS', { cacheKey });\n    } catch (error) {\n      // Cache read failed - continue with database query\n      console.warn('KV cache read failed, falling back to database:', error);\n    }\n  }\n\n  // Cache miss - aggregate from database\n  const predictions = await getAggregatedPredictions(db);\n\n  // Store in cache if KV is available\n  if (kv) {\n    try {\n      await kv.put(cacheKey, JSON.stringify(predictions), {\n        expirationTtl: ttlSeconds,\n      });\n      console.log('Predictions cached', {\n        cacheKey,\n        ttl: ttlSeconds,\n        data_size: predictions.data.length,\n      });\n    } catch (error) {\n      // Cache write failed - log but don't fail the request\n      console.warn('KV cache write failed:', error);\n    }\n  }\n\n  return { predictions, cacheHit: false };\n}\n\n/**\n * Invalidate predictions cache\n *\n * Called after prediction submission, update, or deletion to ensure\n * fresh data is returned on next request.\n *\n * Should be called alongside stats cache invalidation.\n *\n * @param kv - KVNamespace for predictions cache\n * @param cacheKey - Cache key (default: 'predictions:aggregated')\n *\n * @example\n * // After successful prediction submission\n * await invalidatePredictionsCache(c.env.gta6_stats_cache);\n */\nexport async function invalidatePredictionsCache(\n  kv: KVNamespace | undefined,\n  cacheKey: string = 'predictions:aggregated'\n): Promise<void> {\n  if (!kv) {\n    return;\n  }\n\n  try {\n    await kv.delete(cacheKey);\n    console.log('Predictions cache invalidated', { cacheKey });\n  } catch (error) {\n    // Cache invalidation failed - log but don't fail\n    console.warn('Predictions cache invalidation failed:', error);\n  }\n}\n\n/**\n * Invalidate both stats and predictions caches\n *\n * Convenience function to invalidate both caches atomically.\n * Called after prediction submission, update, or deletion.\n *\n * @param kv - KVNamespace for cache\n *\n * @example\n * // After successful prediction submission\n * await invalidateAllCaches(c.env.gta6_stats_cache);\n */\nexport async function invalidateAllCaches(kv: KVNamespace | undefined): Promise<void> {\n  if (!kv) {\n    return;\n  }\n\n  try {\n    // Invalidate all caches in parallel (Story 10.1: added sentiment cache)\n    await Promise.all([\n      kv.delete('stats:latest'),\n      kv.delete('predictions:aggregated'),\n      kv.delete('sentiment:score'), // Story 10.1\n    ]);\n    console.log('All caches invalidated', {\n      keys: ['stats:latest', 'predictions:aggregated', 'sentiment:score'],\n    });\n  } catch (error) {\n    // Cache invalidation failed - log but don't fail\n    console.warn('Cache invalidation failed:', error);\n  }\n}\n\n/**\n * Predictions cache key constant\n * Used for consistent key naming across the application\n */\nexport const PREDICTIONS_CACHE_KEY = 'predictions:aggregated';\n\n/**\n * Default cache TTL in seconds (5 minutes, matches stats cache)\n */\nexport const PREDICTIONS_CACHE_TTL = 300;\n", "/**\n * Capacity Monitoring Service (Story 3.7)\n * Tracks daily request count and determines degradation level\n * Implements graceful degradation under Cloudflare free tier limits\n */\n\nimport type { CapacityLevel, QueuedSubmission } from '../types';\n\n/**\n * Cloudflare free tier daily request limit\n * Source: Architecture - Cloudflare Free Tier Limits\n */\nexport const DAILY_REQUEST_LIMIT = 100000; // 100K requests/day\n\n/**\n * Capacity thresholds as percentage of daily limit\n * Source: Tech Spec Epic 3 - AC7\n */\nexport const CAPACITY_THRESHOLDS = {\n  ELEVATED: 0.8, // 80K requests - log warning\n  HIGH: 0.9, // 90K requests - extend cache, disable chart\n  CRITICAL: 0.95, // 95K requests - queue submissions\n  EXCEEDED: 1.0, // 100K requests - read-only mode\n} as const;\n\n/**\n * KV keys for capacity tracking\n */\nconst KV_KEYS = {\n  REQUEST_COUNT: 'capacity:requests:today',\n  ALERT_SENT: 'capacity:alert:sent',\n} as const;\n\n/**\n * Get current capacity level and request count\n * @param kv - Cloudflare KV namespace for capacity tracking\n * @returns Capacity level, request count, and reset timestamp\n */\nexport async function getCapacityLevel(kv: KVNamespace | undefined): Promise<{\n  level: CapacityLevel;\n  requestsToday: number;\n  resetAt: Date;\n}> {\n  // Fail-open if KV unavailable\n  if (!kv) {\n    console.warn('[Capacity] KV namespace unavailable - failing open to normal capacity');\n    return {\n      level: 'normal',\n      requestsToday: 0,\n      resetAt: getNextMidnightUTC(),\n    };\n  }\n\n  try {\n    // Get current request count from KV\n    const countStr = await kv.get(KV_KEYS.REQUEST_COUNT);\n    const requestsToday = countStr ? parseInt(countStr, 10) : 0;\n\n    // Calculate capacity percentage\n    const capacityPercentage = requestsToday / DAILY_REQUEST_LIMIT;\n\n    // Determine capacity level\n    let level: CapacityLevel;\n    if (capacityPercentage >= CAPACITY_THRESHOLDS.EXCEEDED) {\n      level = 'exceeded';\n    } else if (capacityPercentage >= CAPACITY_THRESHOLDS.CRITICAL) {\n      level = 'critical';\n    } else if (capacityPercentage >= CAPACITY_THRESHOLDS.HIGH) {\n      level = 'high';\n    } else if (capacityPercentage >= CAPACITY_THRESHOLDS.ELEVATED) {\n      level = 'elevated';\n    } else {\n      level = 'normal';\n    }\n\n    return {\n      level,\n      requestsToday,\n      resetAt: getNextMidnightUTC(),\n    };\n  } catch (error) {\n    console.error('[Capacity] Error getting capacity level:', error);\n    // Fail-open to normal capacity on error\n    return {\n      level: 'normal',\n      requestsToday: 0,\n      resetAt: getNextMidnightUTC(),\n    };\n  }\n}\n\n/**\n * Increment daily request counter\n * @param kv - Cloudflare KV namespace for capacity tracking\n * @returns New request count\n */\nexport async function incrementRequestCount(kv: KVNamespace | undefined): Promise<number> {\n  if (!kv) {\n    console.warn('[Capacity] KV namespace unavailable - cannot increment counter');\n    return 0;\n  }\n\n  try {\n    // Get current count\n    const countStr = await kv.get(KV_KEYS.REQUEST_COUNT);\n    const currentCount = countStr ? parseInt(countStr, 10) : 0;\n    const newCount = currentCount + 1;\n\n    // Calculate seconds until midnight UTC\n    const now = new Date();\n    const midnight = getNextMidnightUTC();\n    const secondsUntilMidnight = Math.floor((midnight.getTime() - now.getTime()) / 1000);\n\n    // Update count with TTL (expires at midnight UTC)\n    await kv.put(KV_KEYS.REQUEST_COUNT, newCount.toString(), {\n      expirationTtl: secondsUntilMidnight,\n    });\n\n    return newCount;\n  } catch (error) {\n    console.error('[Capacity] Error incrementing request count:', error);\n    return 0;\n  }\n}\n\n/**\n * Check if alert has been sent for current day\n * @param kv - Cloudflare KV namespace\n * @returns True if alert already sent today\n */\nexport async function hasAlertBeenSent(kv: KVNamespace | undefined): Promise<boolean> {\n  if (!kv) return false;\n\n  try {\n    const alertSent = await kv.get(KV_KEYS.ALERT_SENT);\n    return alertSent === 'true';\n  } catch (error) {\n    console.error('[Capacity] Error checking alert status:', error);\n    return false;\n  }\n}\n\n/**\n * Mark alert as sent for current day\n * @param kv - Cloudflare KV namespace\n */\nexport async function markAlertSent(kv: KVNamespace | undefined): Promise<void> {\n  if (!kv) return;\n\n  try {\n    // Calculate seconds until midnight UTC\n    const now = new Date();\n    const midnight = getNextMidnightUTC();\n    const secondsUntilMidnight = Math.floor((midnight.getTime() - now.getTime()) / 1000);\n\n    // Set flag with TTL (expires at midnight UTC)\n    await kv.put(KV_KEYS.ALERT_SENT, 'true', {\n      expirationTtl: secondsUntilMidnight,\n    });\n  } catch (error) {\n    console.error('[Capacity] Error marking alert sent:', error);\n  }\n}\n\n/**\n * Queue a submission for later processing (Story 3.7 - AC6)\n * Used when capacity is critical (95%+)\n * @param kv - Cloudflare KV namespace\n * @param submission - Queued submission data\n * @returns Queue position (approximate)\n */\nexport async function queueSubmission(\n  kv: KVNamespace | undefined,\n  submission: QueuedSubmission\n): Promise<{ position: number }> {\n  if (!kv) {\n    throw new Error('KV namespace unavailable - cannot queue submission');\n  }\n\n  try {\n    // Generate queue key with timestamp for FIFO ordering\n    const timestamp = Date.now();\n    const uuid = crypto.randomUUID();\n    const queueKey = `queue:${timestamp}:${uuid}`;\n\n    // Store submission with 24-hour TTL (per AC11)\n    await kv.put(queueKey, JSON.stringify(submission), {\n      expirationTtl: 24 * 60 * 60, // 24 hours\n    });\n\n    // Get approximate queue position (count keys with earlier timestamps)\n    const queueList = await kv.list({ prefix: 'queue:' });\n    const position = queueList.keys.filter((k) => {\n      const keyTimestamp = parseInt(k.name.split(':')[1], 10);\n      return keyTimestamp <= timestamp;\n    }).length;\n\n    console.log(\n      JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'INFO',\n        message: 'Submission queued',\n        context: { queueKey, position, cookie_id: submission.cookie_id },\n      })\n    );\n\n    return { position };\n  } catch (error) {\n    console.error('[Capacity] Error queuing submission:', error);\n    throw error;\n  }\n}\n\n/**\n * Process queued submissions in FIFO order (Story 3.7 - AC11)\n * @param kv - Cloudflare KV namespace\n * @param db - D1 database\n * @param batchSize - Number of submissions to process\n * @returns Number of submissions processed\n */\nexport async function processQueue(\n  kv: KVNamespace | undefined,\n  db: D1Database,\n  batchSize: number = 10\n): Promise<{ processed: number }> {\n  if (!kv) {\n    console.warn('[Capacity] KV namespace unavailable - cannot process queue');\n    return { processed: 0 };\n  }\n\n  try {\n    // Get queue items (sorted by timestamp - FIFO)\n    const queueList = await kv.list({ prefix: 'queue:', limit: batchSize });\n    const queueKeys = queueList.keys.sort((a, b) => {\n      const tsA = parseInt(a.name.split(':')[1], 10);\n      const tsB = parseInt(b.name.split(':')[1], 10);\n      return tsA - tsB; // Oldest first\n    });\n\n    let processed = 0;\n\n    for (const key of queueKeys) {\n      try {\n        // Get submission data\n        const dataStr = await kv.get(key.name);\n        if (!dataStr) continue;\n\n        const submission: QueuedSubmission = JSON.parse(dataStr);\n\n        // Insert prediction into database\n        // Note: This is a simplified version - actual implementation would use\n        // the same logic as POST /api/predict endpoint\n        await db\n          .prepare(\n            `INSERT INTO predictions (predicted_date, ip_hash, cookie_id, user_agent, weight, submitted_at, updated_at)\n             VALUES (?, ?, ?, ?, 1.0, ?, ?)`\n          )\n          .bind(\n            submission.predicted_date,\n            submission.ip_hash,\n            submission.cookie_id,\n            submission.user_agent,\n            submission.queued_at,\n            new Date().toISOString()\n          )\n          .run();\n\n        // Delete from queue after successful processing\n        await kv.delete(key.name);\n        processed++;\n\n        console.log(\n          JSON.stringify({\n            timestamp: new Date().toISOString(),\n            level: 'INFO',\n            message: 'Queued submission processed',\n            context: { queueKey: key.name, cookie_id: submission.cookie_id },\n          })\n        );\n      } catch (error) {\n        console.error(`[Capacity] Error processing queue item ${key.name}:`, error);\n        // Continue processing other items\n      }\n    }\n\n    console.log(\n      JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'INFO',\n        message: 'Queue processing completed',\n        context: { processed, remaining: queueList.keys.length - processed },\n      })\n    );\n\n    return { processed };\n  } catch (error) {\n    console.error('[Capacity] Error processing queue:', error);\n    return { processed: 0 };\n  }\n}\n\n/**\n * Calculate next midnight UTC for daily reset\n * @returns Date object for next midnight UTC\n */\nfunction getNextMidnightUTC(): Date {\n  const now = new Date();\n  const midnight = new Date(\n    Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() + 1, 0, 0, 0, 0)\n  );\n  return midnight;\n}\n\n/**\n * Calculate hours until midnight UTC for countdown display\n * @returns Hours until reset (rounded up)\n */\nexport function getHoursUntilReset(): number {\n  const now = new Date();\n  const midnight = getNextMidnightUTC();\n  const hoursUntilReset = Math.ceil((midnight.getTime() - now.getTime()) / (1000 * 60 * 60));\n  return hoursUntilReset;\n}\n", "/**\n * Degradation Utility (Story 3.7)\n * Determines feature flags based on capacity level\n * Implements graceful degradation strategy per AC2-AC8\n */\n\nimport type { CapacityLevel, DegradationState } from '../types';\nimport { DAILY_REQUEST_LIMIT } from '../services/capacity.service';\n\n/**\n * Get degradation state and feature flags based on capacity level\n * @param level - Current capacity level\n * @param requestsToday - Current request count\n * @param resetAt - Reset timestamp\n * @returns Degradation state with feature flags\n */\nexport function getDegradationState(\n  level: CapacityLevel,\n  requestsToday: number,\n  resetAt: Date\n): DegradationState {\n  // Determine feature flags based on capacity level\n  const features = {\n    statsEnabled: true, // Always enabled unless exceeded\n    submissionsEnabled: true, // Disabled at exceeded (100%)\n    chartEnabled: true, // Disabled at high (90%+)\n    cacheExtended: false, // Extended at high (90%+)\n  };\n\n  switch (level) {\n    case 'normal':\n      // All features enabled, normal operation\n      break;\n\n    case 'elevated':\n      // AC1: At 80% - log warning, no user-facing changes\n      break;\n\n    case 'high':\n      // AC2-AC4: At 90% - extend cache, disable chart, show notice\n      features.chartEnabled = false;\n      features.cacheExtended = true;\n      break;\n\n    case 'critical':\n      // AC5-AC7: At 95% - cached stats only, queue submissions\n      features.chartEnabled = false;\n      features.cacheExtended = true;\n      // Note: Queue logic is handled in routes/predict.ts\n      break;\n\n    case 'exceeded':\n      // AC8-AC10: At 100% - read-only mode\n      features.statsEnabled = true; // Keep stats visible\n      features.submissionsEnabled = false; // Disable new submissions\n      features.chartEnabled = false;\n      features.cacheExtended = true;\n      break;\n  }\n\n  return {\n    level,\n    requestsToday,\n    limitToday: DAILY_REQUEST_LIMIT,\n    resetAt: resetAt.toISOString(),\n    features,\n  };\n}\n\n/**\n * Get user-facing message for degradation level\n * @param level - Current capacity level\n * @returns User-friendly message (or null for normal/elevated)\n */\nexport function getDegradationMessage(level: CapacityLevel): string | null {\n  switch (level) {\n    case 'normal':\n    case 'elevated':\n      return null; // No user-facing message\n\n    case 'high':\n      // AC4: At 90%\n      return 'High traffic! Some features temporarily limited.';\n\n    case 'critical':\n      // AC7: At 95%\n      return \"We're experiencing high traffic. Your submission will be processed shortly.\";\n\n    case 'exceeded':\n      // AC9: At 100%\n      return \"We've reached capacity for today. Try again in {hours} hours.\";\n  }\n}\n\n/**\n * Get extended cache TTL for statistics during high capacity\n * @param level - Current capacity level\n * @returns Cache TTL in seconds\n */\nexport function getStatsCacheTTL(level: CapacityLevel): number {\n  const NORMAL_TTL = 5 * 60; // 5 minutes (Story 2.10)\n  const EXTENDED_TTL = 15 * 60; // 15 minutes (AC2)\n\n  // Extend cache at high (90%+) capacity\n  if (level === 'high' || level === 'critical' || level === 'exceeded') {\n    return EXTENDED_TTL;\n  }\n\n  return NORMAL_TTL;\n}\n", "/**\n * Statistics Routes - GET /api/stats\n *\n * Provides aggregated prediction statistics with Cloudflare KV caching.\n * Returns weighted median, min/max dates, and total count.\n *\n * Features:\n * - Cache-first strategy with 5-minute TTL (FR12)\n * - X-Cache header indicating HIT/MISS\n * - Cache-Control header for browser caching\n * - Rate limiting via middleware (60/min per IP)\n *\n * @see Story 2.10: Statistics Calculation and Caching\n * @see docs/architecture.md - API Contracts: GET /api/stats\n */\n\nimport { Hono } from 'hono';\nimport type { Env } from '../types';\nimport { getStatisticsWithCache, STATS_CACHE_KEY } from '../services/statistics.service';\nimport { getCapacityLevel } from '../services/capacity.service';\nimport { getStatsCacheTTL } from '../utils/degradation';\n\n/**\n * Create statistics routes\n *\n * @returns Hono app with /api/stats route configured\n */\nexport function createStatsRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * GET /api/stats - Get aggregated prediction statistics\n   *\n   * Success Response (200 OK):\n   * {\n   *   \"median\": \"2026-11-19\",\n   *   \"min\": \"2025-06-15\",\n   *   \"max\": \"2099-12-31\",\n   *   \"count\": 10234,\n   *   \"cached_at\": \"2025-11-24T14:30:00Z\"\n   * }\n   *\n   * Response Headers:\n   * - Cache-Control: public, max-age=300\n   * - X-Cache: HIT | MISS\n   *\n   * Rate Limit: 60/min per IP (handled by middleware)\n   */\n  app.get('/api/stats', async (c) => {\n    const startTime = Date.now();\n\n    try {\n      // Get current capacity level to determine cache TTL (Story 3.7 - AC2)\n      const { level } = await getCapacityLevel(c.env.gta6_capacity);\n      const cacheTTL = getStatsCacheTTL(level);\n\n      // Get statistics with dynamic caching based on capacity\n      const { stats, cacheHit } = await getStatisticsWithCache(\n        c.env.DB,\n        c.env.gta6_stats_cache,\n        STATS_CACHE_KEY,\n        cacheTTL\n      );\n\n      // Set cache headers with dynamic TTL\n      c.header('Cache-Control', `public, max-age=${cacheTTL}`);\n      c.header('X-Cache', cacheHit ? 'HIT' : 'MISS');\n      c.header('X-Capacity-Level', level); // Debugging header\n\n      // Log request\n      console.log('Stats request processed', {\n        cacheHit,\n        count: stats.count,\n        duration_ms: Date.now() - startTime,\n      });\n\n      // Return statistics\n      return c.json(stats, 200);\n    } catch (error) {\n      console.error('Error fetching statistics:', error);\n\n      // Return error response\n      return c.json(\n        {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to fetch statistics. Please try again.',\n          },\n        },\n        500\n      );\n    }\n  });\n\n  return app;\n}\n\nexport default createStatsRoutes;\n", "/**\n * Sentiment Routes - GET /api/sentiment\n *\n * Provides community sentiment analysis (\"Optimism Score\") based on predictions\n * relative to the official Rockstar-announced release date.\n *\n * Features:\n * - Cache-first strategy with 5-minute TTL\n * - X-Cache header indicating HIT/MISS\n * - Cache-Control header for browser caching\n * - Rate limiting via middleware (60/min per IP)\n * - Respects 50-prediction minimum threshold (FR99)\n *\n * @see Story 10.1: Optimism Score Calculation & API\n * @see docs/epics/epic-10-dashboard-enhancements.md\n */\n\nimport { Hono } from 'hono';\nimport type { Env } from '../types';\nimport { getSentimentWithCache, SENTIMENT_CACHE_KEY } from '../services/sentiment.service';\nimport { getCapacityLevel } from '../services/capacity.service';\nimport { getStatsCacheTTL } from '../utils/degradation';\n\n/**\n * Minimum prediction threshold (FR99)\n * Don't show sentiment score until we have at least 50 predictions\n */\nconst STATS_THRESHOLD = 50;\n\n/**\n * Create sentiment routes\n *\n * @returns Hono app with /api/sentiment route configured\n */\nexport function createSentimentRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * GET /api/sentiment - Get community sentiment (optimism score)\n   *\n   * Success Response (200 OK):\n   * {\n   *   \"success\": true,\n   *   \"data\": {\n   *     \"optimism_score\": 42.5,\n   *     \"optimistic_count\": 4234,\n   *     \"pessimistic_count\": 5766,\n   *     \"total_count\": 10000,\n   *     \"official_date\": \"2026-11-19\",\n   *     \"cached_at\": \"2025-11-27T14:30:00Z\"\n   *   }\n   * }\n   *\n   * Below Threshold Response (200 OK):\n   * {\n   *   \"success\": true,\n   *   \"data\": {\n   *     \"optimism_score\": null,\n   *     \"optimistic_count\": 0,\n   *     \"pessimistic_count\": 0,\n   *     \"total_count\": 45,\n   *     \"official_date\": \"2026-11-19\",\n   *     \"cached_at\": \"2025-11-27T14:30:00Z\",\n   *     \"message\": \"Need 50 predictions\"\n   *   }\n   * }\n   *\n   * Response Headers:\n   * - Cache-Control: public, max-age=300\n   * - X-Cache: HIT | MISS\n   * - X-Capacity-Level: green | yellow | red\n   *\n   * Rate Limit: 60/min per IP (handled by middleware)\n   */\n  app.get('/api/sentiment', async (c) => {\n    const startTime = Date.now();\n\n    try {\n      // Get current capacity level to determine cache TTL (same as stats endpoint)\n      const { level } = await getCapacityLevel(c.env.gta6_capacity);\n      const cacheTTL = getStatsCacheTTL(level);\n\n      // Get sentiment with dynamic caching based on capacity\n      const { sentiment, cacheHit } = await getSentimentWithCache(\n        c.env.DB,\n        c.env.gta6_stats_cache,\n        SENTIMENT_CACHE_KEY,\n        cacheTTL\n      );\n\n      // Set cache headers with dynamic TTL\n      c.header('Cache-Control', `public, max-age=${cacheTTL}`);\n      c.header('X-Cache', cacheHit ? 'HIT' : 'MISS');\n      c.header('X-Capacity-Level', level); // Debugging header\n\n      // Check FR99 threshold (< 50 predictions)\n      if (sentiment.total_count < STATS_THRESHOLD) {\n        console.log('Sentiment request - below threshold', {\n          total_count: sentiment.total_count,\n          threshold: STATS_THRESHOLD,\n          duration_ms: Date.now() - startTime,\n        });\n\n        // Return response with null optimism_score\n        return c.json(\n          {\n            success: true,\n            data: {\n              optimism_score: null,\n              optimistic_count: 0,\n              pessimistic_count: 0,\n              total_count: sentiment.total_count,\n              official_date: sentiment.official_date,\n              cached_at: sentiment.cached_at,\n              message: 'Need 50 predictions',\n            },\n          },\n          200\n        );\n      }\n\n      // Log request\n      console.log('Sentiment request processed', {\n        cacheHit,\n        optimism_score: sentiment.optimism_score,\n        total_count: sentiment.total_count,\n        duration_ms: Date.now() - startTime,\n      });\n\n      // Return sentiment data\n      return c.json(\n        {\n          success: true,\n          data: sentiment,\n        },\n        200\n      );\n    } catch (error) {\n      console.error('Error fetching sentiment:', error);\n\n      // Return error response\n      return c.json(\n        {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to fetch sentiment data. Please try again.',\n          },\n        },\n        500\n      );\n    }\n  });\n\n  return app;\n}\n\nexport default createSentimentRoutes;\n", "/**\n * Sentiment Service Module (Story 10.1)\n *\n * Calculates community sentiment (\"Optimism Score\") based on how many predictions\n * believe GTA 6 will launch before the official Rockstar-announced date.\n *\n * Optimism Score = (count of predictions < official date) / total count * 100\n *\n * Features:\n * - Cloudflare KV caching with 5-minute TTL\n * - Efficient SQL aggregation query\n * - Invalidates on new submission/update\n *\n * @see Story 10.1: Optimism Score Calculation & API\n * @see docs/epics/epic-10-dashboard-enhancements.md\n */\n\nimport dayjs from 'dayjs';\n\n/**\n * Official GTA 6 release date announced by Rockstar\n * November 19, 2026 (subject to delays, but this is our baseline)\n */\nexport const OFFICIAL_RELEASE_DATE = '2026-11-19';\n\n/**\n * Cache key for sentiment data in Cloudflare KV\n */\nexport const SENTIMENT_CACHE_KEY = 'sentiment:score';\n\n/**\n * Sentiment response interface\n * Matches the API contract for GET /api/sentiment\n */\nexport interface SentimentResponse {\n  optimism_score: number; // Percentage (0-100, rounded to 1 decimal)\n  optimistic_count: number; // Count of predictions before official date\n  pessimistic_count: number; // Count of predictions on/after official date\n  total_count: number; // Total predictions\n  official_date: string; // The official date used for comparison (YYYY-MM-DD)\n  cached_at: string; // ISO 8601 timestamp when sentiment was calculated\n}\n\n/**\n * Database row type for sentiment aggregation query\n */\ninterface SentimentAggregation {\n  optimistic_count: number;\n  pessimistic_count: number;\n  total_count: number;\n}\n\n/**\n * Calculate sentiment (optimism score) from the database\n *\n * Performs efficient aggregation query using CASE statements:\n * - Optimistic: predictions < official date\n * - Pessimistic: predictions >= official date\n * - Score: (optimistic / total) * 100\n *\n * @param db - D1Database instance\n * @returns SentimentResponse with optimism score and counts\n *\n * @example\n * const sentiment = await calculateSentiment(c.env.DB);\n * // {\n * //   optimism_score: 42.5,\n * //   optimistic_count: 4234,\n * //   pessimistic_count: 5766,\n * //   total_count: 10000,\n * //   official_date: \"2026-11-19\",\n * //   cached_at: \"2025-11-27T14:30:00Z\"\n * // }\n */\nexport async function calculateSentiment(db: D1Database): Promise<SentimentResponse> {\n  const startTime = Date.now();\n\n  // Query: Count optimistic vs pessimistic predictions using CASE\n  const result = await db\n    .prepare(\n      `SELECT\n        COUNT(CASE WHEN predicted_date < ? THEN 1 END) as optimistic_count,\n        COUNT(CASE WHEN predicted_date >= ? THEN 1 END) as pessimistic_count,\n        COUNT(*) as total_count\n      FROM predictions`\n    )\n    .bind(OFFICIAL_RELEASE_DATE, OFFICIAL_RELEASE_DATE)\n    .first<SentimentAggregation>();\n\n  // Handle empty database case\n  if (!result || result.total_count === 0) {\n    return {\n      optimism_score: 0,\n      optimistic_count: 0,\n      pessimistic_count: 0,\n      total_count: 0,\n      official_date: OFFICIAL_RELEASE_DATE,\n      cached_at: dayjs().toISOString(),\n    };\n  }\n\n  // Calculate optimism score: (optimistic / total) * 100\n  // Round to 1 decimal place\n  const optimismScore = Math.round((result.optimistic_count / result.total_count) * 1000) / 10;\n\n  console.log('Sentiment calculated', {\n    optimism_score: optimismScore,\n    optimistic_count: result.optimistic_count,\n    pessimistic_count: result.pessimistic_count,\n    total_count: result.total_count,\n    duration_ms: Date.now() - startTime,\n  });\n\n  return {\n    optimism_score: optimismScore,\n    optimistic_count: result.optimistic_count,\n    pessimistic_count: result.pessimistic_count,\n    total_count: result.total_count,\n    official_date: OFFICIAL_RELEASE_DATE,\n    cached_at: dayjs().toISOString(),\n  };\n}\n\n/**\n * Get sentiment with caching (Story 10.1 - AC3: Caching Strategy)\n *\n * Cache-first strategy:\n * 1. Check KV cache for existing sentiment data\n * 2. If cache hit and not expired, return cached data\n * 3. If cache miss or expired, calculate fresh sentiment\n * 4. Store in cache with TTL\n *\n * @param db - D1Database instance\n * @param kv - KV namespace for caching\n * @param cacheKey - Cache key to use (default: SENTIMENT_CACHE_KEY)\n * @param cacheTTL - Cache TTL in seconds (default: 300 = 5 minutes)\n * @returns Object with sentiment data and cache hit status\n *\n * @example\n * const { sentiment, cacheHit } = await getSentimentWithCache(\n *   c.env.DB,\n *   c.env.gta6_stats_cache,\n *   SENTIMENT_CACHE_KEY,\n *   300\n * );\n */\nexport async function getSentimentWithCache(\n  db: D1Database,\n  kv: KVNamespace | undefined,\n  cacheKey: string = SENTIMENT_CACHE_KEY,\n  cacheTTL: number = 300 // 5 minutes default\n): Promise<{ sentiment: SentimentResponse; cacheHit: boolean }> {\n  // Try to get from cache first (cache-first strategy) if KV is available\n  const cached = kv ? await kv.get<SentimentResponse>(cacheKey, 'json') : null;\n\n  if (cached) {\n    console.log('Sentiment cache HIT');\n    return { sentiment: cached, cacheHit: true };\n  }\n\n  console.log('Sentiment cache MISS - calculating fresh sentiment');\n\n  // Cache miss - calculate fresh sentiment\n  const sentiment = await calculateSentiment(db);\n\n  // Store in cache with TTL (if KV is available)\n  if (kv) {\n    await kv.put(cacheKey, JSON.stringify(sentiment), {\n      expirationTtl: cacheTTL,\n    });\n  }\n\n  return { sentiment, cacheHit: false };\n}\n\n/**\n * Invalidate sentiment cache (Story 10.1 - AC3: Cache Invalidation)\n *\n * Called when a new prediction is submitted or updated to ensure\n * fresh sentiment data on next request.\n *\n * @param kv - KV namespace for caching\n * @param cacheKey - Cache key to invalidate (default: SENTIMENT_CACHE_KEY)\n *\n * @example\n * // After successful prediction submission\n * await invalidateSentimentCache(c.env.gta6_stats_cache);\n */\nexport async function invalidateSentimentCache(\n  kv: KVNamespace | undefined,\n  cacheKey: string = SENTIMENT_CACHE_KEY\n): Promise<void> {\n  if (kv) {\n    await kv.delete(cacheKey);\n    console.log('Sentiment cache invalidated');\n  }\n}\n", "/**\n * Status Routes - GET /api/status\n *\n * Provides dynamic community sentiment status based on weighted median prediction\n * compared to the official Rockstar-announced release date (2026-11-19).\n *\n * Status Values:\n * - \"Early Release Possible\" (Green): median < official - 60 days\n * - \"On Track\" (Blue): median within \u00B160 days of official\n * - \"Delay Likely\" (Amber): median between +60 and +180 days of official\n * - \"Major Delay Expected\" (Red): median > official + 180 days\n *\n * Features:\n * - Cache-first strategy with 5-minute TTL\n * - X-Cache header indicating HIT/MISS\n * - Cache-Control header for browser caching\n * - Rate limiting via middleware (60/min per IP)\n * - Respects 50-prediction minimum threshold (FR99)\n *\n * @see Story 10.4: Dynamic Status Badge\n * @see docs/epics/epic-10-dashboard-enhancements.md\n * @see Sprint Change Proposal 2025-11-28\n */\n\nimport { Hono } from 'hono';\nimport type { Env } from '../types';\nimport { getStatusWithCache, STATUS_CACHE_KEY } from '../services/status.service';\nimport { getCapacityLevel } from '../services/capacity.service';\nimport { getStatsCacheTTL } from '../utils/degradation';\n\n/**\n * Minimum prediction threshold (FR99)\n * Don't show calculated status until we have at least 50 predictions\n */\nconst STATS_THRESHOLD = 50;\n\n/**\n * Create status routes\n *\n * @returns Hono app with /api/status route configured\n */\nexport function createStatusRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * GET /api/status - Get community sentiment status\n   *\n   * Success Response (200 OK):\n   * {\n   *   \"success\": true,\n   *   \"data\": {\n   *     \"status\": \"Delay Likely\",\n   *     \"status_color\": \"amber\",\n   *     \"median_date\": \"2027-03-15\",\n   *     \"official_date\": \"2026-11-19\",\n   *     \"days_difference\": 116,\n   *     \"cached_at\": \"2025-11-28T14:30:00Z\"\n   *   }\n   * }\n   *\n   * Below Threshold Response (200 OK):\n   * {\n   *   \"success\": true,\n   *   \"data\": {\n   *     \"status\": \"Gathering Data\",\n   *     \"status_color\": \"blue\",\n   *     \"median_date\": null,\n   *     \"official_date\": \"2026-11-19\",\n   *     \"days_difference\": 0,\n   *     \"cached_at\": \"2025-11-28T14:30:00Z\",\n   *     \"message\": \"Need 50 predictions\"\n   *   }\n   * }\n   *\n   * Response Headers:\n   * - Cache-Control: public, max-age=300\n   * - X-Cache: HIT | MISS\n   * - X-Capacity-Level: green | yellow | red\n   *\n   * Rate Limit: 60/min per IP (handled by middleware)\n   */\n  app.get('/api/status', async (c) => {\n    const startTime = Date.now();\n\n    try {\n      // Get current capacity level to determine cache TTL (same as stats endpoint)\n      const { level } = await getCapacityLevel(c.env.gta6_capacity);\n      const cacheTTL = getStatsCacheTTL(level);\n\n      // Get status with dynamic caching based on capacity\n      const { status, cacheHit } = await getStatusWithCache(\n        c.env.DB,\n        c.env.gta6_stats_cache,\n        STATUS_CACHE_KEY,\n        cacheTTL\n      );\n\n      // Set cache headers with dynamic TTL\n      c.header('Cache-Control', `public, max-age=${cacheTTL}`);\n      c.header('X-Cache', cacheHit ? 'HIT' : 'MISS');\n      c.header('X-Capacity-Level', level); // Debugging header\n\n      // Check FR99 threshold (< 50 predictions)\n      if (status.total_count !== undefined && status.total_count < STATS_THRESHOLD) {\n        console.log('Status request - below threshold', {\n          total_count: status.total_count,\n          threshold: STATS_THRESHOLD,\n          duration_ms: Date.now() - startTime,\n        });\n\n        // Return response with \"Gathering Data\" status\n        return c.json(\n          {\n            success: true,\n            data: {\n              status: 'Gathering Data',\n              status_color: 'blue',\n              median_date: null,\n              official_date: status.official_date,\n              days_difference: 0,\n              cached_at: status.cached_at,\n              message: 'Need 50 predictions',\n            },\n          },\n          200\n        );\n      }\n\n      // Log request\n      console.log('Status request processed', {\n        cacheHit,\n        status: status.status,\n        color: status.status_color,\n        days_difference: status.days_difference,\n        duration_ms: Date.now() - startTime,\n      });\n\n      // Return status data\n      return c.json(\n        {\n          success: true,\n          data: status,\n        },\n        200\n      );\n    } catch (error) {\n      console.error('Error fetching status:', error);\n\n      // Return error response with fallback \"Unknown\" status\n      return c.json(\n        {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to fetch status data. Please try again.',\n          },\n          data: {\n            status: 'Unknown',\n            status_color: 'blue',\n            median_date: null,\n            official_date: '2026-11-19',\n            days_difference: 0,\n            cached_at: new Date().toISOString(),\n          },\n        },\n        500\n      );\n    }\n  });\n\n  return app;\n}\n\nexport default createStatusRoutes;\n", "/**\n * Status Service Module (Story 10.4)\n *\n * Calculates community sentiment status based on the weighted median prediction\n * compared to the official Rockstar-announced release date.\n *\n * Status determination:\n * - Early Release Possible (Green): median < official - 60 days\n * - On Track (Blue): median within \u00B160 days of official\n * - Delay Likely (Amber): median between +60 and +180 days of official\n * - Major Delay Expected (Red): median > official + 180 days\n *\n * Features:\n * - Cloudflare KV caching with 5-minute TTL\n * - Reuses weighted median calculation from stats service\n * - Invalidates on new submission/update\n *\n * @see Story 10.4: Dynamic Status Badge\n * @see Sprint Change Proposal 2025-11-28\n * @see docs/epics/epic-10-dashboard-enhancements.md\n */\n\nimport dayjs from 'dayjs';\nimport { calculateWeightedMedianFromRows } from '../utils/weighted-median';\nimport {\n  calculateStatus,\n  OFFICIAL_RELEASE_DATE,\n  type StatusValue,\n  type StatusColor,\n} from '../utils/status-calculator';\n\n/**\n * Cache key for status data in Cloudflare KV\n */\nexport const STATUS_CACHE_KEY = 'status:current';\n\n/**\n * Status response interface\n * Matches the API contract for GET /api/status\n */\nexport interface StatusResponse {\n  status: StatusValue | 'Gathering Data';\n  status_color: StatusColor;\n  median_date: string | null;\n  official_date: string;\n  days_difference: number;\n  cached_at: string;\n  total_count?: number; // For threshold checking\n}\n\n/**\n * Calculate community status from the database\n *\n * Performs the following:\n * 1. Calculates weighted median from predictions (reuses existing utility)\n * 2. Determines status based on median vs official date thresholds\n * 3. Returns status with color and days difference\n *\n * @param db - D1Database instance\n * @returns StatusResponse with status, color, and median information\n *\n * @example\n * const status = await calculateStatusFromDB(c.env.DB);\n * // {\n * //   status: \"Delay Likely\",\n * //   status_color: \"amber\",\n * //   median_date: \"2027-03-15\",\n * //   official_date: \"2026-11-19\",\n * //   days_difference: 116,\n * //   cached_at: \"2025-11-28T14:30:00Z\",\n * //   total_count: 10234\n * // }\n */\nexport async function calculateStatusFromDB(db: D1Database): Promise<StatusResponse> {\n  const startTime = Date.now();\n\n  // Get total prediction count\n  const countResult = await db\n    .prepare('SELECT COUNT(*) as total_count FROM predictions')\n    .first<{ total_count: number }>();\n\n  const totalCount = countResult?.total_count || 0;\n\n  // Handle empty database case\n  if (totalCount === 0) {\n    return {\n      status: 'Gathering Data',\n      status_color: 'blue',\n      median_date: null,\n      official_date: OFFICIAL_RELEASE_DATE,\n      days_difference: 0,\n      cached_at: dayjs().toISOString(),\n      total_count: 0,\n    };\n  }\n\n  // Calculate weighted median (reuses existing utility from Story 2.9)\n  // Query all predictions with their weights\n  const predictionsResult = await db\n    .prepare('SELECT predicted_date, weight FROM predictions ORDER BY predicted_date ASC')\n    .all<{ predicted_date: string; weight: number }>();\n\n  const medianDate = calculateWeightedMedianFromRows(predictionsResult.results || []);\n\n  // Handle case where median calculation fails\n  if (!medianDate) {\n    return {\n      status: 'Gathering Data',\n      status_color: 'blue',\n      median_date: null,\n      official_date: OFFICIAL_RELEASE_DATE,\n      days_difference: 0,\n      cached_at: dayjs().toISOString(),\n      total_count: totalCount,\n    };\n  }\n\n  // Calculate status using status-calculator utility\n  const statusResult = calculateStatus(medianDate, OFFICIAL_RELEASE_DATE);\n\n  console.log('Status calculated', {\n    status: statusResult.status,\n    color: statusResult.color,\n    median_date: medianDate,\n    days_difference: statusResult.daysDifference,\n    total_count: totalCount,\n    duration_ms: Date.now() - startTime,\n  });\n\n  return {\n    status: statusResult.status,\n    status_color: statusResult.color,\n    median_date: medianDate,\n    official_date: OFFICIAL_RELEASE_DATE,\n    days_difference: statusResult.daysDifference,\n    cached_at: dayjs().toISOString(),\n    total_count: totalCount,\n  };\n}\n\n/**\n * Get status with caching (Story 10.4 - AC4: Caching Strategy)\n *\n * Cache-first strategy:\n * 1. Check KV cache for existing status data\n * 2. If cache hit and not expired, return cached data\n * 3. If cache miss or expired, calculate fresh status\n * 4. Store in cache with TTL\n *\n * @param db - D1Database instance\n * @param kv - KV namespace for caching\n * @param cacheKey - Cache key to use (default: STATUS_CACHE_KEY)\n * @param cacheTTL - Cache TTL in seconds (default: 300 = 5 minutes)\n * @returns Object with status data and cache hit status\n *\n * @example\n * const { status, cacheHit } = await getStatusWithCache(\n *   c.env.DB,\n *   c.env.gta6_stats_cache,\n *   STATUS_CACHE_KEY,\n *   300\n * );\n */\nexport async function getStatusWithCache(\n  db: D1Database,\n  kv: KVNamespace | undefined,\n  cacheKey: string = STATUS_CACHE_KEY,\n  cacheTTL: number = 300 // 5 minutes default\n): Promise<{ status: StatusResponse; cacheHit: boolean }> {\n  // Try to get from cache first (cache-first strategy) if KV is available\n  const cached = kv ? await kv.get<StatusResponse>(cacheKey, 'json') : null;\n\n  if (cached) {\n    console.log('Status cache HIT');\n    return { status: cached, cacheHit: true };\n  }\n\n  console.log('Status cache MISS - calculating fresh status');\n\n  // Cache miss - calculate fresh status\n  const status = await calculateStatusFromDB(db);\n\n  // Store in cache with TTL (if KV is available)\n  if (kv) {\n    await kv.put(cacheKey, JSON.stringify(status), {\n      expirationTtl: cacheTTL,\n    });\n  }\n\n  return { status, cacheHit: false };\n}\n\n/**\n * Invalidate status cache (Story 10.4 - AC4: Cache Invalidation)\n *\n * Called when a new prediction is submitted or updated to ensure\n * fresh status data on next request.\n *\n * @param kv - KV namespace for caching\n * @param cacheKey - Cache key to invalidate (default: STATUS_CACHE_KEY)\n *\n * @example\n * // After successful prediction submission\n * await invalidateStatusCache(c.env.gta6_stats_cache);\n */\nexport async function invalidateStatusCache(\n  kv: KVNamespace | undefined,\n  cacheKey: string = STATUS_CACHE_KEY\n): Promise<void> {\n  if (kv) {\n    await kv.delete(cacheKey);\n    console.log('Status cache invalidated');\n  }\n}\n", "/**\n * Status Calculator Utility\n *\n * Calculates community sentiment status based on the weighted median prediction\n * compared to the official GTA 6 release date.\n *\n * Status Thresholds:\n * - Early Release Possible: median < official - 60 days\n * - On Track: median within \u00B160 days of official\n * - Delay Likely: median between +60 and +180 days of official\n * - Major Delay Expected: median > official + 180 days\n */\n\nexport type StatusValue =\n  | 'Early Release Possible'\n  | 'On Track'\n  | 'Delay Likely'\n  | 'Major Delay Expected';\n\nexport type StatusColor = 'green' | 'blue' | 'amber' | 'red';\n\nexport interface StatusResult {\n  status: StatusValue;\n  color: StatusColor;\n  daysDifference: number;\n}\n\n/**\n * Official GTA 6 release date announced by Rockstar Games\n */\nexport const OFFICIAL_RELEASE_DATE = '2026-11-19';\n\n/**\n * Threshold values for status determination (in days)\n */\nexport const STATUS_THRESHOLDS = {\n  EARLY_RELEASE: -60, // More than 60 days before official\n  ON_TRACK_MIN: -60, // 60 days before official\n  ON_TRACK_MAX: 60, // 60 days after official\n  DELAY_LIKELY_MAX: 180, // 180 days after official\n} as const;\n\n/**\n * Calculates the community sentiment status based on the median prediction date\n *\n * @param medianDate - The weighted median prediction date (ISO 8601 format: YYYY-MM-DD)\n * @param officialDate - The official release date (defaults to OFFICIAL_RELEASE_DATE)\n * @returns StatusResult containing status, color, and days difference\n *\n * @example\n * ```typescript\n * const result = calculateStatus('2027-03-15');\n * // Returns: { status: 'Delay Likely', color: 'amber', daysDifference: 116 }\n * ```\n */\nexport function calculateStatus(\n  medianDate: string,\n  officialDate: string = OFFICIAL_RELEASE_DATE\n): StatusResult {\n  const official = new Date(officialDate);\n  const median = new Date(medianDate);\n\n  // Calculate difference in days\n  const daysDiff = Math.round((median.getTime() - official.getTime()) / (24 * 60 * 60 * 1000));\n\n  // Determine status based on thresholds\n  if (daysDiff < STATUS_THRESHOLDS.EARLY_RELEASE) {\n    return {\n      status: 'Early Release Possible',\n      color: 'green',\n      daysDifference: daysDiff,\n    };\n  } else if (\n    daysDiff >= STATUS_THRESHOLDS.ON_TRACK_MIN &&\n    daysDiff <= STATUS_THRESHOLDS.ON_TRACK_MAX\n  ) {\n    return {\n      status: 'On Track',\n      color: 'blue',\n      daysDifference: daysDiff,\n    };\n  } else if (\n    daysDiff > STATUS_THRESHOLDS.ON_TRACK_MAX &&\n    daysDiff <= STATUS_THRESHOLDS.DELAY_LIKELY_MAX\n  ) {\n    return {\n      status: 'Delay Likely',\n      color: 'amber',\n      daysDifference: daysDiff,\n    };\n  } else {\n    return {\n      status: 'Major Delay Expected',\n      color: 'red',\n      daysDifference: daysDiff,\n    };\n  }\n}\n\n/**\n * Validates if a date string is in valid ISO 8601 format\n *\n * @param dateString - The date string to validate\n * @returns true if valid, false otherwise\n */\nexport function isValidDate(dateString: string): boolean {\n  // Check for ISO 8601 format (YYYY-MM-DD)\n  const isoDateRegex = /^\\d{4}-\\d{2}-\\d{2}/;\n  if (!isoDateRegex.test(dateString)) {\n    return false;\n  }\n\n  const date = new Date(dateString);\n  return !isNaN(date.getTime());\n}\n", "/**\n * Predictions Routes - GET /api/predictions\n *\n * Provides aggregated prediction distribution data for chart visualization.\n * Returns predictions grouped by date with counts (privacy-preserving).\n *\n * Features:\n * - Cache-first strategy with 5-minute TTL (matches stats cache)\n * - X-Cache header indicating HIT/MISS\n * - Cache-Control header for browser caching\n * - Rate limiting via middleware (60/min per IP)\n * - 50-prediction minimum threshold (FR99)\n *\n * @see Story 3.4b: Prediction Data API Endpoint\n * @see docs/sprint-artifacts/stories/3-4b-prediction-data-api-endpoint.md\n */\n\nimport { Hono } from 'hono';\nimport type { Env } from '../types';\nimport {\n  getAggregatedPredictionsWithCache,\n  PREDICTIONS_CACHE_KEY,\n  PREDICTIONS_CACHE_TTL,\n} from '../services/predictions-aggregation.service';\n\n/**\n * Create predictions routes\n *\n * @returns Hono app with /api/predictions route configured\n */\nexport function createPredictionsRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * GET /api/predictions - Get aggregated prediction distribution data\n   *\n   * Success Response (200 OK):\n   * {\n   *   \"data\": [\n   *     { \"predicted_date\": \"2026-11-19\", \"count\": 1247 },\n   *     { \"predicted_date\": \"2027-02-14\", \"count\": 823 }\n   *   ],\n   *   \"total_predictions\": 10234,\n   *   \"cached_at\": \"2025-11-26T14:30:00Z\"\n   * }\n   *\n   * Empty Response (when < 50 predictions, FR99):\n   * {\n   *   \"data\": [],\n   *   \"total_predictions\": 42,\n   *   \"cached_at\": \"2025-11-26T14:30:00Z\"\n   * }\n   *\n   * Error Response (500):\n   * {\n   *   \"success\": false,\n   *   \"error\": {\n   *     \"code\": \"SERVER_ERROR\",\n   *     \"message\": \"Unable to fetch prediction data. Please try again.\"\n   *   }\n   * }\n   *\n   * Response Headers:\n   * - Cache-Control: public, max-age=300\n   * - X-Cache: HIT | MISS\n   *\n   * Privacy Considerations:\n   * - Only returns aggregated data (date + count)\n   * - No cookie_id, ip_hash, or weight exposed\n   * - No individual prediction records revealed\n   *\n   * Rate Limit: 60/min per IP (handled by middleware)\n   */\n  app.get('/api/predictions', async (c) => {\n    const startTime = Date.now();\n\n    try {\n      // Get aggregated predictions with caching\n      const { predictions, cacheHit } = await getAggregatedPredictionsWithCache(\n        c.env.DB,\n        c.env.gta6_stats_cache,\n        PREDICTIONS_CACHE_KEY,\n        PREDICTIONS_CACHE_TTL\n      );\n\n      // Set cache headers\n      c.header('Cache-Control', `public, max-age=${PREDICTIONS_CACHE_TTL}`);\n      c.header('X-Cache', cacheHit ? 'HIT' : 'MISS');\n\n      // Log request\n      console.log('Predictions request processed', {\n        cacheHit,\n        total_predictions: predictions.total_predictions,\n        unique_dates: predictions.data.length,\n        duration_ms: Date.now() - startTime,\n      });\n\n      // Return predictions\n      return c.json(predictions, 200);\n    } catch (error) {\n      console.error('Error fetching predictions:', error);\n\n      // Return error response\n      return c.json(\n        {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'Unable to fetch prediction data. Please try again.',\n          },\n        },\n        500\n      );\n    }\n  });\n\n  return app;\n}\n\nexport default createPredictionsRoutes;\n", "/**\n * Degradation API Route (Story 3.7)\n * Provides current degradation state for frontend\n * Returns capacity level and feature flags\n */\n\nimport { Hono } from 'hono';\nimport type { Env } from '../types';\nimport { getCapacityLevel } from '../services/capacity.service';\nimport { getDegradationState, getDegradationMessage } from '../utils/degradation';\nimport { getHoursUntilReset } from '../services/capacity.service';\n\n/**\n * Create degradation routes\n * GET /api/degradation - Get current degradation state\n */\nexport function createDegradationRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * GET /api/degradation\n   * Returns current capacity level and feature flags\n   * Used by frontend to show degradation notices and disable features\n   */\n  app.get('/api/degradation', async (c) => {\n    try {\n      const kv = c.env.gta6_capacity;\n\n      // Get current capacity level\n      const { level, requestsToday, resetAt } = await getCapacityLevel(kv);\n\n      // Get degradation state and feature flags\n      const degradationState = getDegradationState(level, requestsToday, resetAt);\n\n      // Get user-facing message (if applicable)\n      let message = getDegradationMessage(level);\n\n      // Replace {hours} placeholder with actual countdown\n      if (message && message.includes('{hours}')) {\n        const hours = getHoursUntilReset();\n        message = message.replace('{hours}', hours.toString());\n      }\n\n      return c.json({\n        success: true,\n        data: {\n          ...degradationState,\n          message, // null for normal/elevated, string for high/critical/exceeded\n        },\n      });\n    } catch (error) {\n      console.error('[Degradation API] Error getting degradation state:', error);\n\n      // Fail-open: Return normal capacity on error\n      return c.json({\n        success: true,\n        data: {\n          level: 'normal',\n          requestsToday: 0,\n          limitToday: 100000,\n          resetAt: new Date().toISOString(),\n          features: {\n            statsEnabled: true,\n            submissionsEnabled: true,\n            chartEnabled: true,\n            cacheExtended: false,\n          },\n          message: null,\n        },\n      });\n    }\n  });\n\n  return app;\n}\n", "/**\n * Delete Routes - POST /api/delete\n *\n * Handles GDPR data deletion requests with immediate deletion:\n * 1. Cookie ID validation (UUID v4)\n * 2. Deletion execution (immediate)\n *\n * @see Story 4.6: GDPR Data Deletion Request Form\n * @see docs/architecture.md - Security Architecture: GDPR Compliance\n */\n\nimport { Hono } from 'hono';\nimport type { Env, ErrorResponse } from '../types';\nimport { z } from 'zod';\n\n/**\n * Deletion request validation schema\n */\nconst DeletionRequestSchema = z.object({\n  cookie_id: z\n    .string()\n    .trim()\n    .regex(/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i, {\n      message: 'Invalid cookie ID format (must be UUID v4)',\n    }),\n  reason: z.enum(['privacy-concerns', 'no-longer-interested', 'other', '']).optional(),\n  confirm: z.boolean().refine((val) => val === true, {\n    message: 'You must confirm this action is permanent',\n  }),\n});\n\n/**\n * Delete prediction record by cookie_id\n * @param db - D1 database instance\n * @param cookieId - Cookie ID to delete\n * @returns Number of deleted records\n */\nasync function deletePrediction(db: D1Database, cookieId: string): Promise<number> {\n  const result = await db\n    .prepare('DELETE FROM predictions WHERE cookie_id = ?')\n    .bind(cookieId)\n    .run();\n\n  // Log deletion for compliance audit trail\n  console.log(\n    JSON.stringify({\n      timestamp: new Date().toISOString(),\n      level: 'INFO',\n      message: 'GDPR data deletion executed',\n      context: {\n        cookie_id: cookieId.substring(0, 8) + '...', // Partial ID for privacy\n        deleted_rows: result.meta.changes,\n      },\n    })\n  );\n\n  return result.meta.changes || 0;\n}\n\n/**\n * Create delete routes\n */\nexport function createDeleteRoutes() {\n  const app = new Hono<{ Bindings: Env }>();\n\n  /**\n   * POST /api/delete - Request data deletion\n   *\n   * AC: Form submission process (Story 4.6)\n   * - Validate cookie_id exists in database\n   * - Immediate deletion\n   */\n  app.post('/api/delete', async (c) => {\n    try {\n      // Parse and validate request body\n      const body = await c.req.json();\n      const parseResult = DeletionRequestSchema.safeParse(body);\n\n      if (!parseResult.success) {\n        const firstError = parseResult.error.errors[0];\n        return c.json<ErrorResponse>(\n          {\n            success: false,\n            error: {\n              code: 'VALIDATION_ERROR',\n              message: firstError.message,\n              field: firstError.path.join('.'),\n            },\n          },\n          400\n        );\n      }\n\n      const { cookie_id, reason } = parseResult.data;\n\n      // Check if cookie_id exists in database\n      const prediction = await c.env.DB.prepare(\n        'SELECT cookie_id FROM predictions WHERE cookie_id = ?'\n      )\n        .bind(cookie_id)\n        .first();\n\n      if (!prediction) {\n        return c.json<ErrorResponse>(\n          {\n            success: false,\n            error: {\n              code: 'NOT_FOUND',\n              message: 'No prediction found for this Cookie ID. It may have already been deleted.',\n            },\n          },\n          404\n        );\n      }\n\n      // Immediate deletion\n      const deletedCount = await deletePrediction(c.env.DB, cookie_id);\n\n      if (deletedCount === 0) {\n        return c.json<ErrorResponse>(\n          {\n            success: false,\n            error: {\n              code: 'SERVER_ERROR',\n              message: 'Failed to delete prediction. Please try again.',\n            },\n          },\n          500\n        );\n      }\n\n      // Log deletion reason (if provided) for analytics\n      if (reason) {\n        console.log(\n          JSON.stringify({\n            timestamp: new Date().toISOString(),\n            level: 'INFO',\n            message: 'Deletion reason logged',\n            context: { reason },\n          })\n        );\n      }\n\n      return c.json({\n        success: true,\n        message: 'Your data has been deleted successfully.',\n      });\n    } catch (error) {\n      console.error('Deletion request failed:', error);\n      return c.json<ErrorResponse>(\n        {\n          success: false,\n          error: {\n            code: 'SERVER_ERROR',\n            message: 'An unexpected error occurred. Please try again.',\n          },\n        },\n        500\n      );\n    }\n  });\n\n  return app;\n}\n", "/**\n * Data Retention Cleanup Service\n * Story 4.8: Data Retention Policy Implementation\n *\n * Handles automated cleanup of data according to retention policies:\n * - Predictions: Indefinite retention (no cleanup)\n * - Analytics (Cloudflare): 24 months (handled automatically by Cloudflare)\n * - Server logs: 90 days retention\n * - Rate limit data: 60 seconds TTL (automatic via KV)\n * - Cache data: 5 minutes TTL (automatic via KV)\n */\n\nimport dayjs from 'dayjs';\n\nexport interface CleanupReport {\n  timestamp: string;\n  serverLogsDeleted: number;\n  errors: string[];\n}\n\n/**\n * Cleanup server logs older than 90 days\n * Server logs contain: IP addresses, requests, errors\n *\n * @param db D1 database instance\n * @returns Number of server log records deleted\n */\nexport async function cleanupServerLogs(db: D1Database): Promise<number> {\n  const cutoffDate = dayjs().subtract(90, 'days').format('YYYY-MM-DD HH:mm:ss');\n\n  try {\n    // Check if server_logs table exists\n    const tableCheck = await db\n      .prepare(`SELECT name FROM sqlite_master WHERE type='table' AND name='server_logs'`)\n      .first();\n\n    if (!tableCheck) {\n      console.log(\n        JSON.stringify({\n          timestamp: new Date().toISOString(),\n          level: 'INFO',\n          message: 'Server logs table does not exist, skipping cleanup',\n          context: { cutoffDate },\n        })\n      );\n      return 0;\n    }\n\n    const result = await db\n      .prepare(`DELETE FROM server_logs WHERE created_at < ?`)\n      .bind(cutoffDate)\n      .run();\n\n    console.log(\n      JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'INFO',\n        message: 'Server logs cleanup completed',\n        context: {\n          deleted: result.meta.changes,\n          cutoffDate,\n          retentionDays: 90,\n        },\n      })\n    );\n\n    return result.meta.changes;\n  } catch (error) {\n    console.error(\n      JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'ERROR',\n        message: 'Server logs cleanup failed',\n        context: {\n          error: error instanceof Error ? error.message : String(error),\n          cutoffDate,\n        },\n      })\n    );\n    throw error;\n  }\n}\n\n/**\n * Run complete daily cleanup routine\n * Executes all cleanup tasks and generates audit report\n *\n * @param db D1 database instance\n * @returns Cleanup report with deletion counts and audit trail\n */\nexport async function runDailyCleanup(db: D1Database): Promise<CleanupReport> {\n  const report: CleanupReport = {\n    timestamp: new Date().toISOString(),\n    serverLogsDeleted: 0,\n    errors: [],\n  };\n\n  try {\n    // Cleanup server logs (90 days retention)\n    report.serverLogsDeleted = await cleanupServerLogs(db);\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    report.errors.push(`Server logs cleanup failed: ${errorMessage}`);\n  }\n\n  // Log cleanup report for compliance audit trail\n  console.log(\n    JSON.stringify({\n      timestamp: report.timestamp,\n      level: 'INFO',\n      message: 'Daily cleanup completed',\n      context: {\n        serverLogsDeleted: report.serverLogsDeleted,\n        errorCount: report.errors.length,\n        errors: report.errors,\n      },\n    })\n  );\n\n  return report;\n}\n\n/**\n * Get cleanup report summary as human-readable string\n *\n * @param report Cleanup report from runDailyCleanup\n * @returns Formatted report string\n */\nexport function generateCleanupReportSummary(report: CleanupReport): string {\n  const lines: string[] = [\n    `Data Retention Cleanup Report - ${report.timestamp}`,\n    `Server Logs Deleted: ${report.serverLogsDeleted} records (90-day retention)`,\n    `Predictions: No cleanup (indefinite retention)`,\n    `Analytics: Handled by Cloudflare (24-month retention)`,\n    `Rate Limit Data: TTL-based expiration (60 seconds)`,\n    `Cache Data: TTL-based expiration (5 minutes)`,\n  ];\n\n  if (report.errors.length > 0) {\n    lines.push(`Errors: ${report.errors.length}`);\n    report.errors.forEach((error, index) => {\n      lines.push(`  ${index + 1}. ${error}`);\n    });\n  }\n\n  return lines.join('\\n');\n}\n"],
  "mappings": "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",
  "names": ["init_performance", "init_performance", "PerformanceMark", "init_performance", "init_performance", "init_performance", "init_performance", "clear", "count", "countReset", "createTask", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "table", "time", "timeEnd", "timeLog", "timeStamp", "trace", "warn", "init_console", "init_performance", "init_console", "init_performance", "hrtime", "init_performance", "init_performance", "dir", "env", "count", "init_performance", "init_performance", "init_performance", "cwd", "hrtime", "assert", "init_process", "init_performance", "init_process", "init_performance", "t", "e", "n", "r", "i", "s", "u", "a", "M", "m", "f", "l", "$", "y", "v", "g", "D", "o", "d", "c", "h", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "context", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "match", "raw", "init_performance", "context", "init_performance", "init_performance", "app", "env", "context", "init_performance", "init_performance", "init_performance", "init_performance", "context", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "Node", "Node", "Hono", "init_performance", "init_performance", "error", "count", "error", "env", "config", "init_performance", "init_performance", "import_dayjs", "init_performance", "import_dayjs", "init_performance", "dayjs", "dayjs", "stats", "error", "dayjs", "error", "title", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "util", "objectUtil", "error", "init_performance", "init_performance", "init_performance", "errorUtil", "error", "errorMap", "version", "ctx", "result", "issues", "elements", "processed", "result", "r", "ZodFirstPartyTypeKind", "init_performance", "init_performance", "error", "init_performance", "import_dayjs", "dayjs", "predictions", "error", "error", "init_performance", "error", "init_performance", "features", "error", "app", "Hono", "errorResponse", "init_performance", "app", "Hono", "error", "init_performance", "init_performance", "import_dayjs", "dayjs", "app", "Hono", "error", "init_performance", "init_performance", "import_dayjs", "init_performance", "OFFICIAL_RELEASE_DATE", "OFFICIAL_RELEASE_DATE", "dayjs", "STATS_THRESHOLD", "app", "Hono", "error", "init_performance", "app", "Hono", "error", "init_performance", "app", "Hono", "error", "init_performance", "app", "Hono", "error", "init_performance", "import_dayjs", "dayjs", "error", "report", "Hono", "error", "env", "report"]
}
