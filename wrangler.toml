name = "gta6-tracker"
main = "src/index.ts"
compatibility_date = "2025-11-09"
compatibility_flags = ["nodejs_compat"]

# Global environment variables (apply to all environments)
[vars]
TURNSTILE_SITE_KEY = "0x4AAAAAACCQiDtgUQCqo0gC"  # Public - safe to commit

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "gta6-predictions"
database_id = "150217ee-5408-406e-98be-37b15a8e5990"

# KV namespace for rate limiting (Story 2.6)
# Note: KV namespace must be created via: wrangler kv namespace create "gta6-rate-limit"
[[kv_namespaces]]
binding = "gta6_rate_limit"
id = "c7c91030ebcc45038f17419f1e48de45"  # Replace after creating namespace

# KV namespace for statistics caching (Story 2.10)
# Note: KV namespace must be created via: wrangler kv namespace create "gta6-stats-cache"
[[kv_namespaces]]
binding = "gta6_stats_cache"
id = "c93739a812ea477d8cbba96d4b23e469"  # Replace after creating namespace

# Production environment configuration
[env.production]
name = "gta6-tracker"
vars = { ENVIRONMENT = "production" }

[[env.production.d1_databases]]
binding = "DB"
database_name = "gta6-predictions"
database_id = "150217ee-5408-406e-98be-37b15a8e5990"

# Dev environment configuration
[env.dev]
name = "gta6-tracker-dev"
vars = { ENVIRONMENT = "dev" }

[[env.dev.d1_databases]]
binding = "DB"
database_name = "gta6-predictions"
database_id = "150217ee-5408-406e-98be-37b15a8e5990"

# Preview environment configuration (for pull requests)
[env.preview]
name = "gta6-tracker-preview"
vars = { ENVIRONMENT = "preview" }

[[env.preview.d1_databases]]
binding = "DB"
database_name = "gta6-predictions"
database_id = "150217ee-5408-406e-98be-37b15a8e5990"
